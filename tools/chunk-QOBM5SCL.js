import{a as vt,b as Ln,c as Tt,d as ko,e as Mo}from"./chunk-LRLOBHG7.js";import{a as Po,d as Ao}from"./chunk-GVELKS7D.js";import{Ca as ho,Da as Bn,Db as Eo,Eb as jn,Fa as po,Ga as mo,Gb as vo,Ha as go,Hb as To,Ia as bo,Ib as Ro,Ja as _o,Jb as Co,Ka as yo,La as wo,Ma as So,Na as On,Oa as Fn,Pa as ht,Qa as Et,Ra as qt,Sa as Pr,Ua as Ot,Va as it,Wa as pt,Xa as Ar,Ya as xr,Za as Br,_a as Or,bb as cr,cb as kn,db as Mn,eb as Fr,hb as dr,jb as kr,ub as Io}from"./chunk-SNNKPPPV.js";import{b as xo,f as Bo,h as Oo,j as Fo,k as jo,n as Lo,o as Do,r as No,s as Uo}from"./chunk-TMU64VYP.js";import{U as uo,X as co,_ as fo}from"./chunk-7WATJAWA.js";import{$a as De,$b as Xe,Cb as eo,Cc as so,Eb as to,Ec as lo,Fb as ro,Gb as Ee,Hb as we,Ib as An,Jb as no,Kb as io,Lb as Bt,Nb as xn,Ob as $e,Wb as Me,Xb as oo,Zb as Ke,_b as Ze,a as ke,b as ur,bc as ao,da as Ki,e as _l,g as L,h as We,i as ft,j as nt,ja as Zi,k as Ge,na as Xi,ub as Cr,wa as St,wb as zt,xa as It}from"./chunk-CL3WTTFP.js";var tt={};_l(tt,{BlankNode:()=>Vr,DataFactory:()=>Wt,DefaultGraph:()=>Hr,Lexer:()=>$r,Literal:()=>Nt,NamedNode:()=>_r,Parser:()=>yr,Quad:()=>zr,Store:()=>Zr,StreamParser:()=>Ii,StreamWriter:()=>Ei,Term:()=>et,Triple:()=>zr,Util:()=>Ul,Variable:()=>Qr,Writer:()=>qr,termFromId:()=>Kt,termToId:()=>Ne});var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wo,Sl=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:yl):t=>(Wo||(Wo=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),Il=wl(Sl),fr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",hr="http://www.w3.org/2001/XMLSchema#",Dn="http://www.w3.org/2000/10/swap/",Oe={xsd:{decimal:`${hr}decimal`,boolean:`${hr}boolean`,double:`${hr}double`,integer:`${hr}integer`,string:`${hr}string`},rdf:{type:`${fr}type`,nil:`${fr}nil`,first:`${fr}first`,rest:`${fr}rest`,langString:`${fr}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Dn}reify#forSome`,forAll:`${Dn}reify#forAll`},log:{implies:`${Dn}log#implies`}},{xsd:Mr}=Oe,El=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Go={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},vl=/[\x00-\x20<>\\"\{\}\|\^\`]/,Tl={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Rl=/$0^/,$r=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(let r in this)!(r in Tl)&&this[r]instanceof RegExp&&(this[r]=Rl)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,o=n.length;for(;;){let s,m;for(;s=this._newline.exec(n);)this._comments&&(m=this._comment.exec(s[0]))&&l("comment",m[1],"",this._line,s[0].length),n=n.substr(s[0].length,n.length),o=n.length,this._line++;if(!s&&(s=this._whitespace.exec(n))&&(n=n.substr(s[0].length,n.length)),this._endOfFile.test(n))return r&&(this._comments&&(m=this._comment.exec(n))&&l("comment",m[1],"",this._line,n.length),n=null,l("eof","","",this._line,0)),this._input=n;let S=this._line,v=n[0],R="",_="",C="",A=null,P=0,F=!1;switch(v){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){F=!0;break}}else{this._n3Mode&&(P=1,R="^");break}case"<":if(A=this._unescapedIri.exec(n))R="IRI",_=A[1];else if(A=this._iri.exec(n)){if(_=this._unescape(A[1]),_===null||vl.test(_))return d(this);R="IRI"}else n.length>1&&n[1]==="<"?(R="<<",P=2):this._n3Mode&&n.length>1&&n[1]==="="&&(R="inverse",P=2,_=">");break;case">":n.length>1&&n[1]===">"&&(R=">>",P=2);break;case"_":((A=this._blank.exec(n))||r&&(A=this._blank.exec(`${n} `)))&&(R="blank",C="_",_=A[1]);break;case'"':if(A=this._simpleQuotedString.exec(n))_=A[1];else if({value:_,matchLength:P}=this._parseLiteral(n),_===null)return d(this);(A!==null||P!==0)&&(R="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(A=this._simpleApostropheString.exec(n))_=A[1];else if({value:_,matchLength:P}=this._parseLiteral(n),_===null)return d(this);(A!==null||P!==0)&&(R="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(A=this._variable.exec(n))&&(R="var",_=A[0]);break;case"@":this._previousMarker==="literal"&&(A=this._langcode.exec(n))?(R="langcode",_=A[1]):(A=this._keyword.exec(n))&&(R=A[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){R=".",P=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(A=this._number.exec(n)||r&&(A=this._number.exec(`${n} `)))&&(R="literal",_=A[0],C=typeof A[1]=="string"?Mr.double:typeof A[2]=="string"?Mr.decimal:Mr.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(A=this._sparqlKeyword.exec(n))?R=A[0].toUpperCase():F=!0;break;case"f":case"t":(A=this._boolean.exec(n))?(R="literal",_=A[0],C=Mr.boolean):F=!0;break;case"a":(A=this._shortPredicates.exec(n))?(R="abbreviation",_="a"):F=!0;break;case"=":this._n3Mode&&n.length>1&&(R="abbreviation",n[1]!==">"?(P=1,_="="):(P=2,_=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(P=1,R=v);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(R="{|",P=2):(R=v,P=1));break;case"|":n.length>=2&&n[1]==="}"&&(R="|}",P=2);break;default:F=!0}if(F&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(A=this._prefix.exec(n))?(R="prefix",_=A[1]||""):((A=this._prefixed.exec(n))||r&&(A=this._prefixed.exec(`${n} `)))&&(R="prefixed",C=A[1]||"",_=this._unescape(A[2]))),this._previousMarker==="^^")switch(R){case"prefixed":R="type";break;case"IRI":R="typeIRI";break;default:R=""}if(!R)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?d(this):this._input=n;let V=P||A[0].length,G=l(R,_,C,S,V);this.previousToken=G,this._previousMarker=R,n=n.substr(V,n.length)}function l(s,m,S,v,R){let _=n?o-n.length:o,C=_+R,A={type:s,value:m,prefix:S,line:v,start:_,end:C};return e(null,A),A}function d(s){e(s._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1,n=e.replace(El,(o,l,d,s)=>{if(typeof l=="string")return String.fromCharCode(Number.parseInt(l,16));if(typeof d=="string"){let m=Number.parseInt(d,16);return m<=65535?String.fromCharCode(Number.parseInt(d,16)):String.fromCharCode(55296+((m-=65536)>>10),56320+(m&1023))}return s in Go?Go[s]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){let r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length,o=Math.max(this._literalClosingPos,n);for(;(o=e.indexOf(r,o))>0;){let l=0;for(;e[o-l-1]==="\\";)l++;if(l%2===0){let d=e.substring(n,o),s=d.split(/\r\n|\r|\n/).length-1,m=o+n;if(n===1&&s!==0||n===3&&this._lineMode)break;return this._line+=s,{value:this._unescape(d),matchLength:m}}o++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;let r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")Il(()=>this._tokenizeToEnd(r,!0));else{let n=[],o;if(this._tokenizeToEnd((l,d)=>l?o=l:n.push(d),!0),o)throw o;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}},{rdf:Cl,xsd:jt}=Oe,Ir,Pl=0,Wt={namedNode:Al,blankNode:xl,variable:Ol,literal:Bl,defaultGraph:Fl,quad:$o,triple:$o},et=class t{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof t?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},_r=class extends et{get termType(){return"NamedNode"}},Nt=class t extends et{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){let e=this.id,r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new _r(this.datatypeString)}get datatypeString(){let e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?jt.string:Cl.langString}equals(e){return e instanceof t?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},Vr=class extends et{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},Qr=class extends et{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},Hr=class extends et{constructor(){return super(""),Ir||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};Ir=new Hr;function Kt(t,e,r){if(e=e||Wt,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Wt)return new Nt(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));let n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(Kt(t[0],e,!0),Kt(t[1],e,!0),Kt(t[2],e,!0),t[3]&&Kt(t[3],e,!0))}function Ne(t,e){if(typeof t=="string")return t;if(t instanceof et&&t.termType!=="Quad")return t.id;if(!t)return Ir.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==jt.string?`^^${t.datatype.value}`:""}`;case"Quad":let r=[Ne(t.subject,!0),Ne(t.predicate,!0),Ne(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(Ne(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}var zr=class extends et{constructor(e,r,n,o){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=o||Ir}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function Al(t){return new _r(t)}function xl(t){return new Vr(t||`n3-${Pl++}`)}function Bl(t,e){if(typeof e=="string")return new Nt(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=jt.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?jt.integer:jt.double:(r=jt.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===jt.string?new Nt(`"${t}"`):new Nt(`"${t}"^^${r}`)}function Ol(t){return new Qr(t)}function Fl(){return Ir}function $o(t,e,r,n){return new zr(t,e,r,n)}var Vo=0,yr=class{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&Wa(this,e.factory);let r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),o=/trig/.test(r),l=/triple/.test(r),d=/quad/.test(r),s=this._n3Mode=/n3/.test(r),m=l||d;(this._supportsNamedGraphs=!(n||s))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||o||l||s),this._supportsRDFStar=r===""||/star|\*$/.test(r),m&&(this._resolveRelativeIRI=S=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new $r({lineMode:m,n3:s}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Vo=0}_setBase(e){if(!e)this._base="",this._basePath="";else{let r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,o,l){let d=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:o,object:l,graph:r,inverse:d?this._inversePredicate:!1,blankPrefix:d?this._prefixes._:"",quantified:d?this._quantified:null}),d&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){let n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":let o=this._resolveIRI(e.value);if(o===null)return this._error("Invalid IRI",e);n=this._namedNode(o);break;case"type":case"prefixed":let l=this._prefixes[e.prefix];if(l===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(l+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){let r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);let r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,o=this._readListItem,l=this._subject,d=this._contextStack,s=d[d.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),o=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),d.length!==0&&d[d.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(o=this._readPredicate,this._subject===this.RDF_NIL)return o}else if(o=this._getContextEndReader(),this._object===this.RDF_NIL)return o;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,o=this._readListItemDataTypeOrLang):(r=this._literal(e.value,this._namedNode(e.prefix)),o=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),l===null?s.predicate===null?s.subject=n:s.object=n:this._emit(l,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return o}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let r=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":let n=this._readEntity(e);if(n===void 0)return;r=this._literal(this._literalValue,n),e=null;break;case"langcode":r=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:r}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){let n=this._completeLiteral(e);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph,o=this._subject,l=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,l&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);let d=this._predicate,s=this._object;this._subject=this._quad(o,d,s,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(o!==null){let d=this._predicate,s=this._object;l?this._emit(s,d,o,n):this._emit(o,d,s,n)}return r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);let r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){let r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:let r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){let o=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,o,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n,o=this._blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=o):(r=this._object,this._object=o),this._emit(r,n,o,this._graph),this._readPath}_readBackwardPath(e){let r=this._blankNode(),n,o;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(o=this._subject,this._subject=r):(o=this._object,this._object=r),this._emit(r,n,o,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);let r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){let e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,r,n,o){this._callback(null,this._quad(e,r,n,o||this.DEFAULTGRAPH))}_error(e,r){let n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Nn}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;let r=e.length,n="",o=-1,l=-1,d=0,s="/";for(;o<r;){switch(s){case":":if(l<0&&e[++o]==="/"&&e[++o]==="/")for(;(l=o+1)<r&&e[l]!=="/";)o=l;break;case"?":case"#":o=r;break;case"/":if(e[o+1]===".")switch(s=e[++o+1],s){case"/":n+=e.substring(d,o-1),d=o+1;break;case void 0:case"?":case"#":return n+e.substring(d,o)+e.substr(o+1);case".":if(s=e[++o+1],s===void 0||s==="/"||s==="?"||s==="#"){if(n+=e.substring(d,o-2),(d=n.lastIndexOf("/"))>=l&&(n=n.substr(0,d)),s!=="/")return`${n}/${e.substr(o+1)}`;d=o+1}}}s=e[++o]}return n+e.substring(d)}parse(e,r,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Vo++}_`,this._prefixCallback=n||Nn,this._inversePredicate=!1,this._quantified=Object.create(null),!r){let o=[],l;if(this._callback=(d,s)=>{d?l=d:s&&o.push(s)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),l)throw l;return o}this._callback=r,this._lexer.tokenize(e,(o,l)=>{o!==null?(this._callback(o),this._callback=Nn):this._readCallback&&(this._readCallback=this._readCallback(l))})}};function Nn(){}function Wa(t,e){let r=e.namedNode;t._namedNode=r,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=r(Oe.rdf.first),t.RDF_REST=r(Oe.rdf.rest),t.RDF_NIL=r(Oe.rdf.nil),t.N3_FORALL=r(Oe.r.forAll),t.N3_FORSOME=r(Oe.r.forSome),t.ABBREVIATIONS={a:r(Oe.rdf.type),"=":r(Oe.owl.sameAs),">":r(Oe.log.implies)},t.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}Wa(yr.prototype,Wt);function kl(t){return!!t&&t.termType==="NamedNode"}function Ml(t){return!!t&&t.termType==="BlankNode"}function jl(t){return!!t&&t.termType==="Literal"}function Ll(t){return!!t&&t.termType==="Variable"}function wr(t){return!!t&&t.termType==="DefaultGraph"}function Dl(t){return wr(t.graph)}function Nl(t,e){return Ga({"":t.value||t},e)("")}function Ga(t,e){let r=Object.create(null);for(let o in t)n(o,t[o]);e=e||Wt;function n(o,l){if(typeof l=="string"){let d=Object.create(null);r[o]=s=>d[s]||(d[s]=e.namedNode(l+s))}else if(!(o in r))throw new Error(`Unknown prefix: ${o}`);return r[o]}return n}var Ul=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:Dl,isBlankNode:Ml,isDefaultGraph:wr,isLiteral:jl,isNamedNode:kl,isVariable:Ll,prefix:Nl,prefixes:Ga},Symbol.toStringTag,{value:"Module"})),pr=Wt.defaultGraph(),{rdf:Wl,xsd:Yt}=Oe,Qo=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Ho=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,Gl={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},Lt=class extends et{equals(e){return e===this}},qr=class{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(o,l,d){n+=o,d&&d()},end:o=>{o&&o(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=pr,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${qo(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return pr.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,o,l){try{o.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(pr.equals(o)?"":`${this._encodeIriOrBlank(o)} {
`)),this._graph=o,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,l):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,l):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,l)}catch(d){l&&l(d)}}_writeQuadLine(e,r,n,o,l){delete this._prefixMatch,this._write(this.quadToString(e,r,n,o),l)}quadToString(e,r,n,o){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${o&&o.value?` ${this._encodeIriOrBlank(o)} .
`:` .
`}`}quadsToString(e){return e.map(r=>this.quadToString(r.subject,r.predicate,r.object,r.graph)).join("")}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),Qo.test(r)&&(r=r.replace(Ho,zo));let n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;if(Qo.test(r)&&(r=r.replace(Ho,zo)),e.language)return`"${r}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Yt.string)return`"${r}"`}else switch(e.datatype.value){case Yt.string:return`"${r}"`;case Yt.boolean:if(r==="true"||r==="false")return r;break;case Yt.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Yt.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Yt.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===Wl.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:o}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${wr(o)?"":` ${this._encodeIriOrBlank(o)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,o,l){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof o=="function"?this._writeQuad(e,r,n,pr,o):this._writeQuad(e,r,n,o||pr,l)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){let o={};o[e]=r,this.addPrefixes(o,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let o in e){let l=e[o];typeof l!="string"&&(l=l.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[l]=o+=":",this._write(`@prefix ${o} <${l}>.
`)}if(n){let o="",l="";for(let d in this._prefixIRIs)o+=o?`|${d}`:d,l+=(l?"|":"")+this._prefixIRIs[d];o=qo(o),this._prefixRegex=new RegExp(`^(?:${l})[^/]*$|^(${o})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,o,l;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),l=n.length){case 0:return new Lt("[]");case 1:if(o=n[0],!(o.object instanceof Lt))return new Lt(`[ ${this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)} ]`);default:let d="[";for(let s=0;s<l;s++)o=n[s],o.predicate.equals(e)?d+=`, ${this._encodeObject(o.object)}`:(d+=`${(s?`;
  `:`
  `)+this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)}`,e=o.predicate);return new Lt(`${d}
]`)}}list(e){let r=e&&e.length||0,n=new Array(r);for(let o=0;o<r;o++)n[o]=this._encodeObject(e[o]);return new Lt(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,o)=>{r=null,e(n,o)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}};function zo(t){let e=Gl[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function qo(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var $a={exports:{}},Un={exports:{}},Rt={},Er={};Er.byteLength=Vl;Er.toByteArray=Hl;Er.fromByteArray=Yl;var st=[],He=[],$l=typeof Uint8Array<"u"?Uint8Array:Array,Wn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ft=0,Yo=Wn.length;Ft<Yo;++Ft)st[Ft]=Wn[Ft],He[Wn.charCodeAt(Ft)]=Ft;var Ft,Yo;He[45]=62;He[95]=63;function Va(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Vl(t){var e=Va(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Ql(t,e,r){return(e+r)*3/4-r}function Hl(t){var e,r=Va(t),n=r[0],o=r[1],l=new $l(Ql(t,n,o)),d=0,s=o>0?n-4:n,m;for(m=0;m<s;m+=4)e=He[t.charCodeAt(m)]<<18|He[t.charCodeAt(m+1)]<<12|He[t.charCodeAt(m+2)]<<6|He[t.charCodeAt(m+3)],l[d++]=e>>16&255,l[d++]=e>>8&255,l[d++]=e&255;return o===2&&(e=He[t.charCodeAt(m)]<<2|He[t.charCodeAt(m+1)]>>4,l[d++]=e&255),o===1&&(e=He[t.charCodeAt(m)]<<10|He[t.charCodeAt(m+1)]<<4|He[t.charCodeAt(m+2)]>>2,l[d++]=e>>8&255,l[d++]=e&255),l}function zl(t){return st[t>>18&63]+st[t>>12&63]+st[t>>6&63]+st[t&63]}function ql(t,e,r){for(var n,o=[],l=e;l<r;l+=3)n=(t[l]<<16&16711680)+(t[l+1]<<8&65280)+(t[l+2]&255),o.push(zl(n));return o.join("")}function Yl(t){for(var e,r=t.length,n=r%3,o=[],l=16383,d=0,s=r-n;d<s;d+=l)o.push(ql(t,d,d+l>s?s:d+l));return n===1?(e=t[r-1],o.push(st[e>>2]+st[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(st[e>>10]+st[e>>4&63]+st[e<<2&63]+"=")),o.join("")}var Xr={};Xr.read=function(t,e,r,n,o){var l,d,s=o*8-n-1,m=(1<<s)-1,S=m>>1,v=-7,R=r?o-1:0,_=r?-1:1,C=t[e+R];for(R+=_,l=C&(1<<-v)-1,C>>=-v,v+=s;v>0;l=l*256+t[e+R],R+=_,v-=8);for(d=l&(1<<-v)-1,l>>=-v,v+=n;v>0;d=d*256+t[e+R],R+=_,v-=8);if(l===0)l=1-S;else{if(l===m)return d?NaN:(C?-1:1)*(1/0);d=d+Math.pow(2,n),l=l-S}return(C?-1:1)*d*Math.pow(2,l-n)};Xr.write=function(t,e,r,n,o,l){var d,s,m,S=l*8-o-1,v=(1<<S)-1,R=v>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=n?0:l-1,A=n?1:-1,P=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,d=v):(d=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-d))<1&&(d--,m*=2),d+R>=1?e+=_/m:e+=_*Math.pow(2,1-R),e*m>=2&&(d++,m/=2),d+R>=v?(s=0,d=v):d+R>=1?(s=(e*m-1)*Math.pow(2,o),d=d+R):(s=e*Math.pow(2,R-1)*Math.pow(2,o),d=0));o>=8;t[r+C]=s&255,C+=A,s/=256,o-=8);for(d=d<<o|s,S+=o;S>0;t[r+C]=d&255,C+=A,d/=256,S-=8);t[r+C-A]|=P*128};(function(t){let e=Er,r=Xr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=G,t.INSPECT_MAX_BYTES=50;let o=2147483647;t.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=l(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let i=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(i,u),i.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function d(i){if(i>o)throw new RangeError('The value "'+i+'" is invalid for option "size"');let u=new Uint8Array(i);return Object.setPrototypeOf(u,s.prototype),u}function s(i,u,f){if(typeof i=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(i)}return m(i,u,f)}s.poolSize=8192;function m(i,u,f){if(typeof i=="string")return _(i,u);if(ArrayBuffer.isView(i))return A(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(O(i,ArrayBuffer)||i&&O(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(i,SharedArrayBuffer)||i&&O(i.buffer,SharedArrayBuffer)))return P(i,u,f);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let b=i.valueOf&&i.valueOf();if(b!=null&&b!==i)return s.from(b,u,f);let I=F(i);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return s.from(i[Symbol.toPrimitive]("string"),u,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}s.from=function(i,u,f){return m(i,u,f)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function S(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function v(i,u,f){return S(i),i<=0?d(i):u!==void 0?typeof f=="string"?d(i).fill(u,f):d(i).fill(u):d(i)}s.alloc=function(i,u,f){return v(i,u,f)};function R(i){return S(i),d(i<0?0:V(i)|0)}s.allocUnsafe=function(i){return R(i)},s.allocUnsafeSlow=function(i){return R(i)};function _(i,u){if((typeof u!="string"||u==="")&&(u="utf8"),!s.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let f=k(i,u)|0,b=d(f),I=b.write(i,u);return I!==f&&(b=b.slice(0,I)),b}function C(i){let u=i.length<0?0:V(i.length)|0,f=d(u);for(let b=0;b<u;b+=1)f[b]=i[b]&255;return f}function A(i){if(O(i,Uint8Array)){let u=new Uint8Array(i);return P(u.buffer,u.byteOffset,u.byteLength)}return C(i)}function P(i,u,f){if(u<0||i.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<u+(f||0))throw new RangeError('"length" is outside of buffer bounds');let b;return u===void 0&&f===void 0?b=new Uint8Array(i):f===void 0?b=new Uint8Array(i,u):b=new Uint8Array(i,u,f),Object.setPrototypeOf(b,s.prototype),b}function F(i){if(s.isBuffer(i)){let u=V(i.length)|0,f=d(u);return f.length===0||i.copy(f,0,0,u),f}if(i.length!==void 0)return typeof i.length!="number"||K(i.length)?d(0):C(i);if(i.type==="Buffer"&&Array.isArray(i.data))return C(i.data)}function V(i){if(i>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return i|0}function G(i){return+i!=i&&(i=0),s.alloc(+i)}s.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==s.prototype},s.compare=function(i,u){if(O(i,Uint8Array)&&(i=s.from(i,i.offset,i.byteLength)),O(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),!s.isBuffer(i)||!s.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===u)return 0;let f=i.length,b=u.length;for(let I=0,x=Math.min(f,b);I<x;++I)if(i[I]!==u[I]){f=i[I],b=u[I];break}return f<b?-1:b<f?1:0},s.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(i,u){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return s.alloc(0);let f;if(u===void 0)for(u=0,f=0;f<i.length;++f)u+=i[f].length;let b=s.allocUnsafe(u),I=0;for(f=0;f<i.length;++f){let x=i[f];if(O(x,Uint8Array))I+x.length>b.length?(s.isBuffer(x)||(x=s.from(x)),x.copy(b,I)):Uint8Array.prototype.set.call(b,x,I);else if(s.isBuffer(x))x.copy(b,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=x.length}return b};function k(i,u){if(s.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||O(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let f=i.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&f===0)return 0;let I=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return c(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return E(i).length;default:if(I)return b?-1:c(i).length;u=(""+u).toLowerCase(),I=!0}}s.byteLength=k;function H(i,u,f){let b=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,u>>>=0,f<=u))return"";for(i||(i="utf8");;)switch(i){case"hex":return be(this,u,f);case"utf8":case"utf-8":return ie(this,u,f);case"ascii":return ne(this,u,f);case"latin1":case"binary":return pe(this,u,f);case"base64":return N(this,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,u,f);default:if(b)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),b=!0}}s.prototype._isBuffer=!0;function Q(i,u,f){let b=i[u];i[u]=i[f],i[f]=b}s.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<i;u+=2)Q(this,u,u+1);return this},s.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<i;u+=4)Q(this,u,u+3),Q(this,u+1,u+2);return this},s.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<i;u+=8)Q(this,u,u+7),Q(this,u+1,u+6),Q(this,u+2,u+5),Q(this,u+3,u+4);return this},s.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?ie(this,0,i):H.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(i){if(!s.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:s.compare(this,i)===0},s.prototype.inspect=function(){let i="",u=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(i+=" ... "),"<Buffer "+i+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(i,u,f,b,I){if(O(i,Uint8Array)&&(i=s.from(i,i.offset,i.byteLength)),!s.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(u===void 0&&(u=0),f===void 0&&(f=i?i.length:0),b===void 0&&(b=0),I===void 0&&(I=this.length),u<0||f>i.length||b<0||I>this.length)throw new RangeError("out of range index");if(b>=I&&u>=f)return 0;if(b>=I)return-1;if(u>=f)return 1;if(u>>>=0,f>>>=0,b>>>=0,I>>>=0,this===i)return 0;let x=I-b,D=f-u,oe=Math.min(x,D),ve=this.slice(b,I),ce=i.slice(u,f);for(let ae=0;ae<oe;++ae)if(ve[ae]!==ce[ae]){x=ve[ae],D=ce[ae];break}return x<D?-1:D<x?1:0};function ue(i,u,f,b,I){if(i.length===0)return-1;if(typeof f=="string"?(b=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,K(f)&&(f=I?0:i.length-1),f<0&&(f=i.length+f),f>=i.length){if(I)return-1;f=i.length-1}else if(f<0)if(I)f=0;else return-1;if(typeof u=="string"&&(u=s.from(u,b)),s.isBuffer(u))return u.length===0?-1:Te(i,u,f,b,I);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(i,u,f):Uint8Array.prototype.lastIndexOf.call(i,u,f):Te(i,[u],f,b,I);throw new TypeError("val must be string, number or Buffer")}function Te(i,u,f,b,I){let x=1,D=i.length,oe=u.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(i.length<2||u.length<2)return-1;x=2,D/=2,oe/=2,f/=2}function ve(ae,ye){return x===1?ae[ye]:ae.readUInt16BE(ye*x)}let ce;if(I){let ae=-1;for(ce=f;ce<D;ce++)if(ve(i,ce)===ve(u,ae===-1?0:ce-ae)){if(ae===-1&&(ae=ce),ce-ae+1===oe)return ae*x}else ae!==-1&&(ce-=ce-ae),ae=-1}else for(f+oe>D&&(f=D-oe),ce=f;ce>=0;ce--){let ae=!0;for(let ye=0;ye<oe;ye++)if(ve(i,ce+ye)!==ve(u,ye)){ae=!1;break}if(ae)return ce}return-1}s.prototype.includes=function(i,u,f){return this.indexOf(i,u,f)!==-1},s.prototype.indexOf=function(i,u,f){return ue(this,i,u,f,!0)},s.prototype.lastIndexOf=function(i,u,f){return ue(this,i,u,f,!1)};function le(i,u,f,b){f=Number(f)||0;let I=i.length-f;b?(b=Number(b),b>I&&(b=I)):b=I;let x=u.length;b>x/2&&(b=x/2);let D;for(D=0;D<b;++D){let oe=parseInt(u.substr(D*2,2),16);if(K(oe))return D;i[f+D]=oe}return D}function de(i,u,f,b){return B(c(u,i.length-f),i,f,b)}function Re(i,u,f,b){return B(h(u),i,f,b)}function Ce(i,u,f,b){return B(E(u),i,f,b)}function X(i,u,f,b){return B(y(u,i.length-f),i,f,b)}s.prototype.write=function(i,u,f,b){if(u===void 0)b="utf8",f=this.length,u=0;else if(f===void 0&&typeof u=="string")b=u,f=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(f)?(f=f>>>0,b===void 0&&(b="utf8")):(b=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let I=this.length-u;if((f===void 0||f>I)&&(f=I),i.length>0&&(f<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");let x=!1;for(;;)switch(b){case"hex":return le(this,i,u,f);case"utf8":case"utf-8":return de(this,i,u,f);case"ascii":case"latin1":case"binary":return Re(this,i,u,f);case"base64":return Ce(this,i,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,i,u,f);default:if(x)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase(),x=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(i,u,f){return u===0&&f===i.length?e.fromByteArray(i):e.fromByteArray(i.slice(u,f))}function ie(i,u,f){f=Math.min(i.length,f);let b=[],I=u;for(;I<f;){let x=i[I],D=null,oe=x>239?4:x>223?3:x>191?2:1;if(I+oe<=f){let ve,ce,ae,ye;switch(oe){case 1:x<128&&(D=x);break;case 2:ve=i[I+1],(ve&192)===128&&(ye=(x&31)<<6|ve&63,ye>127&&(D=ye));break;case 3:ve=i[I+1],ce=i[I+2],(ve&192)===128&&(ce&192)===128&&(ye=(x&15)<<12|(ve&63)<<6|ce&63,ye>2047&&(ye<55296||ye>57343)&&(D=ye));break;case 4:ve=i[I+1],ce=i[I+2],ae=i[I+3],(ve&192)===128&&(ce&192)===128&&(ae&192)===128&&(ye=(x&15)<<18|(ve&63)<<12|(ce&63)<<6|ae&63,ye>65535&&ye<1114112&&(D=ye))}}D===null?(D=65533,oe=1):D>65535&&(D-=65536,b.push(D>>>10&1023|55296),D=56320|D&1023),b.push(D),I+=oe}return te(b)}let Y=4096;function te(i){let u=i.length;if(u<=Y)return String.fromCharCode.apply(String,i);let f="",b=0;for(;b<u;)f+=String.fromCharCode.apply(String,i.slice(b,b+=Y));return f}function ne(i,u,f){let b="";f=Math.min(i.length,f);for(let I=u;I<f;++I)b+=String.fromCharCode(i[I]&127);return b}function pe(i,u,f){let b="";f=Math.min(i.length,f);for(let I=u;I<f;++I)b+=String.fromCharCode(i[I]);return b}function be(i,u,f){let b=i.length;(!u||u<0)&&(u=0),(!f||f<0||f>b)&&(f=b);let I="";for(let x=u;x<f;++x)I+=_e[i[x]];return I}function fe(i,u,f){let b=i.slice(u,f),I="";for(let x=0;x<b.length-1;x+=2)I+=String.fromCharCode(b[x]+b[x+1]*256);return I}s.prototype.slice=function(i,u){let f=this.length;i=~~i,u=u===void 0?f:~~u,i<0?(i+=f,i<0&&(i=0)):i>f&&(i=f),u<0?(u+=f,u<0&&(u=0)):u>f&&(u=f),u<i&&(u=i);let b=this.subarray(i,u);return Object.setPrototypeOf(b,s.prototype),b};function $(i,u,f){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+u>f)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(i,u,f){i=i>>>0,u=u>>>0,f||$(i,u,this.length);let b=this[i],I=1,x=0;for(;++x<u&&(I*=256);)b+=this[i+x]*I;return b},s.prototype.readUintBE=s.prototype.readUIntBE=function(i,u,f){i=i>>>0,u=u>>>0,f||$(i,u,this.length);let b=this[i+--u],I=1;for(;u>0&&(I*=256);)b+=this[i+--u]*I;return b},s.prototype.readUint8=s.prototype.readUInt8=function(i,u){return i=i>>>0,u||$(i,1,this.length),this[i]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(i,u){return i=i>>>0,u||$(i,2,this.length),this[i]|this[i+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(i,u){return i=i>>>0,u||$(i,2,this.length),this[i]<<8|this[i+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(i,u){return i=i>>>0,u||$(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(i,u){return i=i>>>0,u||$(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},s.prototype.readBigUInt64LE=re(function(i){i=i>>>0,w(i,"offset");let u=this[i],f=this[i+7];(u===void 0||f===void 0)&&T(i,this.length-8);let b=u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,I=this[++i]+this[++i]*2**8+this[++i]*2**16+f*2**24;return BigInt(b)+(BigInt(I)<<BigInt(32))}),s.prototype.readBigUInt64BE=re(function(i){i=i>>>0,w(i,"offset");let u=this[i],f=this[i+7];(u===void 0||f===void 0)&&T(i,this.length-8);let b=u*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],I=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+f;return(BigInt(b)<<BigInt(32))+BigInt(I)}),s.prototype.readIntLE=function(i,u,f){i=i>>>0,u=u>>>0,f||$(i,u,this.length);let b=this[i],I=1,x=0;for(;++x<u&&(I*=256);)b+=this[i+x]*I;return I*=128,b>=I&&(b-=Math.pow(2,8*u)),b},s.prototype.readIntBE=function(i,u,f){i=i>>>0,u=u>>>0,f||$(i,u,this.length);let b=u,I=1,x=this[i+--b];for(;b>0&&(I*=256);)x+=this[i+--b]*I;return I*=128,x>=I&&(x-=Math.pow(2,8*u)),x},s.prototype.readInt8=function(i,u){return i=i>>>0,u||$(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},s.prototype.readInt16LE=function(i,u){i=i>>>0,u||$(i,2,this.length);let f=this[i]|this[i+1]<<8;return f&32768?f|4294901760:f},s.prototype.readInt16BE=function(i,u){i=i>>>0,u||$(i,2,this.length);let f=this[i+1]|this[i]<<8;return f&32768?f|4294901760:f},s.prototype.readInt32LE=function(i,u){return i=i>>>0,u||$(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},s.prototype.readInt32BE=function(i,u){return i=i>>>0,u||$(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},s.prototype.readBigInt64LE=re(function(i){i=i>>>0,w(i,"offset");let u=this[i],f=this[i+7];(u===void 0||f===void 0)&&T(i,this.length-8);let b=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(f<<24);return(BigInt(b)<<BigInt(32))+BigInt(u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),s.prototype.readBigInt64BE=re(function(i){i=i>>>0,w(i,"offset");let u=this[i],f=this[i+7];(u===void 0||f===void 0)&&T(i,this.length-8);let b=(u<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(b)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+f)}),s.prototype.readFloatLE=function(i,u){return i=i>>>0,u||$(i,4,this.length),r.read(this,i,!0,23,4)},s.prototype.readFloatBE=function(i,u){return i=i>>>0,u||$(i,4,this.length),r.read(this,i,!1,23,4)},s.prototype.readDoubleLE=function(i,u){return i=i>>>0,u||$(i,8,this.length),r.read(this,i,!0,52,8)},s.prototype.readDoubleBE=function(i,u){return i=i>>>0,u||$(i,8,this.length),r.read(this,i,!1,52,8)};function J(i,u,f,b,I,x){if(!s.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>I||u<x)throw new RangeError('"value" argument is out of bounds');if(f+b>i.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(i,u,f,b){if(i=+i,u=u>>>0,f=f>>>0,!b){let D=Math.pow(2,8*f)-1;J(this,i,u,f,D,0)}let I=1,x=0;for(this[u]=i&255;++x<f&&(I*=256);)this[u+x]=i/I&255;return u+f},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(i,u,f,b){if(i=+i,u=u>>>0,f=f>>>0,!b){let D=Math.pow(2,8*f)-1;J(this,i,u,f,D,0)}let I=f-1,x=1;for(this[u+I]=i&255;--I>=0&&(x*=256);)this[u+I]=i/x&255;return u+f},s.prototype.writeUint8=s.prototype.writeUInt8=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,1,255,0),this[u]=i&255,u+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,2,65535,0),this[u]=i&255,this[u+1]=i>>>8,u+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,2,65535,0),this[u]=i>>>8,this[u+1]=i&255,u+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,4,4294967295,0),this[u+3]=i>>>24,this[u+2]=i>>>16,this[u+1]=i>>>8,this[u]=i&255,u+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,4,4294967295,0),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4};function z(i,u,f,b,I){Le(u,b,I,i,f,7);let x=Number(u&BigInt(4294967295));i[f++]=x,x=x>>8,i[f++]=x,x=x>>8,i[f++]=x,x=x>>8,i[f++]=x;let D=Number(u>>BigInt(32)&BigInt(4294967295));return i[f++]=D,D=D>>8,i[f++]=D,D=D>>8,i[f++]=D,D=D>>8,i[f++]=D,f}function he(i,u,f,b,I){Le(u,b,I,i,f,7);let x=Number(u&BigInt(4294967295));i[f+7]=x,x=x>>8,i[f+6]=x,x=x>>8,i[f+5]=x,x=x>>8,i[f+4]=x;let D=Number(u>>BigInt(32)&BigInt(4294967295));return i[f+3]=D,D=D>>8,i[f+2]=D,D=D>>8,i[f+1]=D,D=D>>8,i[f]=D,f+8}s.prototype.writeBigUInt64LE=re(function(i,u=0){return z(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=re(function(i,u=0){return he(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(i,u,f,b){if(i=+i,u=u>>>0,!b){let oe=Math.pow(2,8*f-1);J(this,i,u,f,oe-1,-oe)}let I=0,x=1,D=0;for(this[u]=i&255;++I<f&&(x*=256);)i<0&&D===0&&this[u+I-1]!==0&&(D=1),this[u+I]=(i/x>>0)-D&255;return u+f},s.prototype.writeIntBE=function(i,u,f,b){if(i=+i,u=u>>>0,!b){let oe=Math.pow(2,8*f-1);J(this,i,u,f,oe-1,-oe)}let I=f-1,x=1,D=0;for(this[u+I]=i&255;--I>=0&&(x*=256);)i<0&&D===0&&this[u+I+1]!==0&&(D=1),this[u+I]=(i/x>>0)-D&255;return u+f},s.prototype.writeInt8=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,1,127,-128),i<0&&(i=255+i+1),this[u]=i&255,u+1},s.prototype.writeInt16LE=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,2,32767,-32768),this[u]=i&255,this[u+1]=i>>>8,u+2},s.prototype.writeInt16BE=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,2,32767,-32768),this[u]=i>>>8,this[u+1]=i&255,u+2},s.prototype.writeInt32LE=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,4,2147483647,-2147483648),this[u]=i&255,this[u+1]=i>>>8,this[u+2]=i>>>16,this[u+3]=i>>>24,u+4},s.prototype.writeInt32BE=function(i,u,f){return i=+i,u=u>>>0,f||J(this,i,u,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4},s.prototype.writeBigInt64LE=re(function(i,u=0){return z(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=re(function(i,u=0){return he(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xe(i,u,f,b,I,x){if(f+b>i.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function qe(i,u,f,b,I){return u=+u,f=f>>>0,I||xe(i,u,f,4),r.write(i,u,f,b,23,4),f+4}s.prototype.writeFloatLE=function(i,u,f){return qe(this,i,u,!0,f)},s.prototype.writeFloatBE=function(i,u,f){return qe(this,i,u,!1,f)};function Ye(i,u,f,b,I){return u=+u,f=f>>>0,I||xe(i,u,f,8),r.write(i,u,f,b,52,8),f+8}s.prototype.writeDoubleLE=function(i,u,f){return Ye(this,i,u,!0,f)},s.prototype.writeDoubleBE=function(i,u,f){return Ye(this,i,u,!1,f)},s.prototype.copy=function(i,u,f,b){if(!s.isBuffer(i))throw new TypeError("argument should be a Buffer");if(f||(f=0),!b&&b!==0&&(b=this.length),u>=i.length&&(u=i.length),u||(u=0),b>0&&b<f&&(b=f),b===f||i.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length),i.length-u<b-f&&(b=i.length-u+f);let I=b-f;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,f,b):Uint8Array.prototype.set.call(i,this.subarray(f,b),u),I},s.prototype.fill=function(i,u,f,b){if(typeof i=="string"){if(typeof u=="string"?(b=u,u=0,f=this.length):typeof f=="string"&&(b=f,f=this.length),b!==void 0&&typeof b!="string")throw new TypeError("encoding must be a string");if(typeof b=="string"&&!s.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(i.length===1){let x=i.charCodeAt(0);(b==="utf8"&&x<128||b==="latin1")&&(i=x)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(u<0||this.length<u||this.length<f)throw new RangeError("Out of range index");if(f<=u)return this;u=u>>>0,f=f===void 0?this.length:f>>>0,i||(i=0);let I;if(typeof i=="number")for(I=u;I<f;++I)this[I]=i;else{let x=s.isBuffer(i)?i:s.from(i,b),D=x.length;if(D===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(I=0;I<f-u;++I)this[I+u]=x[I%D]}return this};let Pe={};function Je(i,u,f){Pe[i]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(b){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:b,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}Je("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Je("ERR_INVALID_ARG_TYPE",function(i,u){return`The "${i}" argument must be of type number. Received type ${typeof u}`},TypeError),Je("ERR_OUT_OF_RANGE",function(i,u,f){let b=`The value of "${i}" is out of range.`,I=f;return Number.isInteger(f)&&Math.abs(f)>2**32?I=wt(String(f)):typeof f=="bigint"&&(I=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(I=wt(I)),I+="n"),b+=` It must be ${u}. Received ${I}`,b},RangeError);function wt(i){let u="",f=i.length,b=i[0]==="-"?1:0;for(;f>=b+4;f-=3)u=`_${i.slice(f-3,f)}${u}`;return`${i.slice(0,f)}${u}`}function rt(i,u,f){w(u,"offset"),(i[u]===void 0||i[u+f]===void 0)&&T(u,i.length-(f+1))}function Le(i,u,f,b,I,x){if(i>f||i<u){let D=typeof u=="bigint"?"n":"",oe;throw x>3?u===0||u===BigInt(0)?oe=`>= 0${D} and < 2${D} ** ${(x+1)*8}${D}`:oe=`>= -(2${D} ** ${(x+1)*8-1}${D}) and < 2 ** ${(x+1)*8-1}${D}`:oe=`>= ${u}${D} and <= ${f}${D}`,new Pe.ERR_OUT_OF_RANGE("value",oe,i)}rt(b,I,x)}function w(i,u){if(typeof i!="number")throw new Pe.ERR_INVALID_ARG_TYPE(u,"number",i)}function T(i,u,f){throw Math.floor(i)!==i?(w(i,f),new Pe.ERR_OUT_OF_RANGE(f||"offset","an integer",i)):u<0?new Pe.ERR_BUFFER_OUT_OF_BOUNDS:new Pe.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${u}`,i)}let M=/[^+/0-9A-Za-z-_]/g;function a(i){if(i=i.split("=")[0],i=i.trim().replace(M,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function c(i,u){u=u||1/0;let f,b=i.length,I=null,x=[];for(let D=0;D<b;++D){if(f=i.charCodeAt(D),f>55295&&f<57344){if(!I){if(f>56319){(u-=3)>-1&&x.push(239,191,189);continue}else if(D+1===b){(u-=3)>-1&&x.push(239,191,189);continue}I=f;continue}if(f<56320){(u-=3)>-1&&x.push(239,191,189),I=f;continue}f=(I-55296<<10|f-56320)+65536}else I&&(u-=3)>-1&&x.push(239,191,189);if(I=null,f<128){if((u-=1)<0)break;x.push(f)}else if(f<2048){if((u-=2)<0)break;x.push(f>>6|192,f&63|128)}else if(f<65536){if((u-=3)<0)break;x.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((u-=4)<0)break;x.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return x}function h(i){let u=[];for(let f=0;f<i.length;++f)u.push(i.charCodeAt(f)&255);return u}function y(i,u){let f,b,I,x=[];for(let D=0;D<i.length&&!((u-=2)<0);++D)f=i.charCodeAt(D),b=f>>8,I=f%256,x.push(I),x.push(b);return x}function E(i){return e.toByteArray(a(i))}function B(i,u,f,b){let I;for(I=0;I<b&&!(I+f>=u.length||I>=i.length);++I)u[I+f]=i[I];return I}function O(i,u){return i instanceof u||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===u.name}function K(i){return i!==i}let _e=function(){let i="0123456789abcdef",u=new Array(256);for(let f=0;f<16;++f){let b=f*16;for(let I=0;I<16;++I)u[b+I]=i[f]+i[I]}return u}();function re(i){return typeof BigInt>"u"?me:i}function me(){throw new Error("BigInt not supported")}})(Rt);var Se={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array},Qa={exports:{}},mr={exports:{}},Jo;function Sr(){if(Jo)return mr.exports;Jo=1;let{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return mr.exports=t,mr.exports.AbortSignal=e,mr.exports.default=t,mr.exports}var vi={exports:{}},Xt=typeof Reflect=="object"?Reflect:null,Ko=Xt&&typeof Xt.apply=="function"?Xt.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Ur;Xt&&typeof Xt.ownKeys=="function"?Ur=Xt.ownKeys:Object.getOwnPropertySymbols?Ur=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ur=function(t){return Object.getOwnPropertyNames(t)};function Jl(t){console&&console.warn&&console.warn(t)}var Ha=Number.isNaN||function(t){return t!==t};function se(){se.init.call(this)}vi.exports=se;vi.exports.once=eu;se.EventEmitter=se;se.prototype._events=void 0;se.prototype._eventsCount=0;se.prototype._maxListeners=void 0;var Zo=10;function en(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(se,"defaultMaxListeners",{enumerable:!0,get:function(){return Zo},set:function(t){if(typeof t!="number"||t<0||Ha(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Zo=t}});se.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};se.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ha(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function za(t){return t._maxListeners===void 0?se.defaultMaxListeners:t._maxListeners}se.prototype.getMaxListeners=function(){return za(this)};se.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",o=this._events;if(o!==void 0)n=n&&o.error===void 0;else if(!n)return!1;if(n){var l;if(e.length>0&&(l=e[0]),l instanceof Error)throw l;var d=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw d.context=l,d}var s=o[t];if(s===void 0)return!1;if(typeof s=="function")Ko(s,this,e);else for(var m=s.length,S=Za(s,m),r=0;r<m;++r)Ko(S[r],this,e);return!0};function qa(t,e,r,n){var o,l,d;if(en(r),l=t._events,l===void 0?(l=t._events=Object.create(null),t._eventsCount=0):(l.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),l=t._events),d=l[e]),d===void 0)d=l[e]=r,++t._eventsCount;else if(typeof d=="function"?d=l[e]=n?[r,d]:[d,r]:n?d.unshift(r):d.push(r),o=za(t),o>0&&d.length>o&&!d.warned){d.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=d.length,Jl(s)}return t}se.prototype.addListener=function(t,e){return qa(this,t,e,!1)};se.prototype.on=se.prototype.addListener;se.prototype.prependListener=function(t,e){return qa(this,t,e,!0)};function Kl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ya(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=Kl.bind(n);return o.listener=r,n.wrapFn=o,o}se.prototype.once=function(t,e){return en(e),this.on(t,Ya(this,t,e)),this};se.prototype.prependOnceListener=function(t,e){return en(e),this.prependListener(t,Ya(this,t,e)),this};se.prototype.removeListener=function(t,e){var r,n,o,l,d;if(en(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(o=-1,l=r.length-1;l>=0;l--)if(r[l]===e||r[l].listener===e){d=r[l].listener,o=l;break}if(o<0)return this;o===0?r.shift():Zl(r,o),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,d||e)}return this};se.prototype.off=se.prototype.removeListener;se.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),l;for(n=0;n<o.length;++n)l=o[n],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function Ja(t,e,r){var n=t._events;if(n===void 0)return[];var o=n[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?Xl(o):Za(o,o.length)}se.prototype.listeners=function(t){return Ja(this,t,!0)};se.prototype.rawListeners=function(t){return Ja(this,t,!1)};se.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ka.call(t,e)};se.prototype.listenerCount=Ka;function Ka(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}se.prototype.eventNames=function(){return this._eventsCount>0?Ur(this._events):[]};function Za(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Zl(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Xl(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function eu(t,e){return new Promise(function(r,n){function o(d){t.removeListener(e,l),n(d)}function l(){typeof t.removeListener=="function"&&t.removeListener("error",o),r([].slice.call(arguments))}Xa(t,e,l,{once:!0}),e!=="error"&&tu(t,o,{once:!0})})}function tu(t,e,r){typeof t.on=="function"&&Xa(t,"error",e,r)}function Xa(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(l){n.once&&t.removeEventListener(e,o),r(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var tn=vi.exports;(function(t){let e=Rt,{kResistStopPropagation:r,SymbolDispose:n}=Se,o=globalThis.AbortSignal||Sr().AbortSignal,l=globalThis.AbortController||Sr().AbortController,d=Object.getPrototypeOf(function(){return L(this,null,function*(){})}).constructor,s=globalThis.Blob||e.Blob,m=typeof s<"u"?function(_){return _ instanceof s}:function(_){return!1},S=(_,C)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new ERR_INVALID_ARG_TYPE(C,"AbortSignal",_)},v=(_,C)=>{if(typeof _!="function")throw new ERR_INVALID_ARG_TYPE(C,"Function",_)};class R extends Error{constructor(C){if(!Array.isArray(C))throw new TypeError(`Expected input to be an Array, got ${typeof C}`);let A="";for(let P=0;P<C.length;P++)A+=`    ${C[P].stack}
`;super(A),this.name="AggregateError",this.errors=C}}t.exports={AggregateError:R,kEmptyObject:Object.freeze({}),once(_){let C=!1;return function(...A){C||(C=!0,_.apply(this,A))}},createDeferredPromise:function(){let _,C;return{promise:new Promise((A,P)=>{_=A,C=P}),resolve:_,reject:C}},promisify(_){return new Promise((C,A)=>{_((P,...F)=>P?A(P):C(...F))})},debuglog(){return function(){}},format(_,...C){return _.replace(/%([sdifj])/g,function(...[A,P]){let F=C.shift();return P==="f"?F.toFixed(6):P==="j"?JSON.stringify(F):P==="s"&&typeof F=="object"?`${F.constructor!==Object?F.constructor.name:""} {}`.trim():F.toString()})},inspect(_){switch(typeof _){case"string":if(_.includes("'"))if(_.includes('"')){if(!_.includes("`")&&!_.includes("${"))return`\`${_}\``}else return`"${_}"`;return`'${_}'`;case"number":return isNaN(_)?"NaN":Object.is(_,-0)?String(_):_;case"bigint":return`${String(_)}n`;case"boolean":case"undefined":return String(_);case"object":return"{}"}},types:{isAsyncFunction(_){return _ instanceof d},isArrayBufferView(_){return ArrayBuffer.isView(_)}},isBlob:m,deprecate(_,C){return _},addAbortListener:tn.addAbortListener||function(_,C){if(_===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",_);S(_,"signal"),v(C,"listener");let A;return _.aborted?queueMicrotask(()=>C()):(_.addEventListener("abort",C,{__proto__:null,once:!0,[r]:!0}),A=()=>{_.removeEventListener("abort",C)}),{__proto__:null,[n](){var P;(P=A)===null||P===void 0||P()}}},AbortSignalAny:o.any||function(_){if(_.length===1)return _[0];let C=new l,A=()=>C.abort();return _.forEach(P=>{S(P,"signals"),P.addEventListener("abort",A,{once:!0})}),C.signal.addEventListener("abort",()=>{_.forEach(P=>P.removeEventListener("abort",A))},{once:!0}),C.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Qa);var je=Qa.exports,Ti={},{format:ru,inspect:Yr,AggregateError:nu}=je,iu=globalThis.AggregateError||nu,ou=Symbol("kIsNodeError"),au=["string","function","number","object","Function","Object","boolean","bigint","symbol"],su=/^([A-Z][a-z0-9]*)+$/,lu="__node_internal_",rn={};function Ut(t,e){if(!t)throw new rn.ERR_INTERNAL_ASSERTION(e)}function Xo(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function uu(t,e,r){if(typeof e=="function")return Ut(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Ut(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:ru(e,...r)}function Ae(t,e,r){r||(r=Error);class n extends r{constructor(...l){super(uu(t,e,l))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[ou]=!0,rn[t]=n}function ea(t){let e=lu+t.name;return Object.defineProperty(t,"name",{value:e}),t}function cu(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new iu([e,t],e.message);return r.code=e.code,r}return t||e}var du=class extends Error{constructor(t="The operation was aborted",e=void 0){if(e!==void 0&&typeof e!="object")throw new rn.ERR_INVALID_ARG_TYPE("options","Object",e);super(t,e),this.code="ABORT_ERR",this.name="AbortError"}};Ae("ERR_ASSERTION","%s",Error);Ae("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Ut(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let o=[],l=[],d=[];for(let m of e)Ut(typeof m=="string","All expected entries have to be of type string"),au.includes(m)?o.push(m.toLowerCase()):su.test(m)?l.push(m):(Ut(m!=="object",'The value "object" should be written as "Object"'),d.push(m));if(l.length>0){let m=o.indexOf("object");m!==-1&&(o.splice(o,m,1),l.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{let m=o.pop();n+=`one of type ${o.join(", ")}, or ${m}`}}(l.length>0||d.length>0)&&(n+=" or ")}if(l.length>0){switch(l.length){case 1:n+=`an instance of ${l[0]}`;break;case 2:n+=`an instance of ${l[0]} or ${l[1]}`;break;default:{let m=l.pop();n+=`an instance of ${l.join(", ")}, or ${m}`}}d.length>0&&(n+=" or ")}switch(d.length){case 0:break;case 1:d[0].toLowerCase()!==d[0]&&(n+="an "),n+=`${d[0]}`;break;case 2:n+=`one of ${d[0]} or ${d[1]}`;break;default:{let m=d.pop();n+=`one of ${d.join(", ")}, or ${m}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var s;if((s=r.constructor)!==null&&s!==void 0&&s.name)n+=`. Received an instance of ${r.constructor.name}`;else{let m=Yr(r,{depth:-1});n+=`. Received ${m}`}}else{let m=Yr(r,{colors:!1});m.length>25&&(m=`${m.slice(0,25)}...`),n+=`. Received type ${typeof r} (${m})`}return n},TypeError);Ae("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Yr(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Ae("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let o=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${o}.`},TypeError);Ae("ERR_MISSING_ARGS",(...t)=>{Ut(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Ae("ERR_OUT_OF_RANGE",(t,e,r)=>{Ut(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Xo(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Xo(n)),n+="n"):n=Yr(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Ae("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ae("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ae("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ae("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ae("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ae("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ae("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ae("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ae("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ae("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ae("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Ue={AbortError:du,aggregateTwoErrors:ea(cu),hideStackFrames:ea,codes:rn},{ArrayIsArray:Ri,ArrayPrototypeIncludes:es,ArrayPrototypeJoin:ts,ArrayPrototypeMap:fu,NumberIsInteger:Ci,NumberIsNaN:hu,NumberMAX_SAFE_INTEGER:pu,NumberMIN_SAFE_INTEGER:mu,NumberParseInt:gu,ObjectPrototypeHasOwnProperty:bu,RegExpPrototypeExec:rs,String:_u,StringPrototypeToUpperCase:yu,StringPrototypeTrim:wu}=Se,{hideStackFrames:ze,codes:{ERR_SOCKET_BAD_PORT:Su,ERR_INVALID_ARG_TYPE:Fe,ERR_INVALID_ARG_VALUE:nr,ERR_OUT_OF_RANGE:Gt,ERR_UNKNOWN_SIGNAL:ta}}=Ue,{normalizeEncoding:Iu}=je,{isAsyncFunction:Eu,isArrayBufferView:vu}=je.types,ra={};function Tu(t){return t===(t|0)}function Ru(t){return t===t>>>0}var Cu=/^[0-7]+$/,Pu="must be a 32-bit unsigned integer or an octal string";function Au(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(rs(Cu,t)===null)throw new nr(e,t,Pu);t=gu(t,8)}return ns(t,e),t}var xu=ze((t,e,r=mu,n=pu)=>{if(typeof t!="number")throw new Fe(e,"number",t);if(!Ci(t))throw new Gt(e,"an integer",t);if(t<r||t>n)throw new Gt(e,`>= ${r} && <= ${n}`,t)}),Bu=ze((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Fe(e,"number",t);if(!Ci(t))throw new Gt(e,"an integer",t);if(t<r||t>n)throw new Gt(e,`>= ${r} && <= ${n}`,t)}),ns=ze((t,e,r=!1)=>{if(typeof t!="number")throw new Fe(e,"number",t);if(!Ci(t))throw new Gt(e,"an integer",t);let n=r?1:0,o=4294967295;if(t<n||t>o)throw new Gt(e,`>= ${n} && <= ${o}`,t)});function Pi(t,e){if(typeof t!="string")throw new Fe(e,"string",t)}function Ou(t,e,r=void 0,n){if(typeof t!="number")throw new Fe(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&hu(t))throw new Gt(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Fu=ze((t,e,r)=>{if(!es(r,t)){let n="must be one of: "+ts(fu(r,o=>typeof o=="string"?`'${o}'`:_u(o)),", ");throw new nr(e,t,n)}});function is(t,e){if(typeof t!="boolean")throw new Fe(e,"boolean",t)}function Gn(t,e,r){return t==null||!bu(t,e)?r:t[e]}var ku=ze((t,e,r=null)=>{let n=Gn(r,"allowArray",!1),o=Gn(r,"allowFunction",!1);if(!Gn(r,"nullable",!1)&&t===null||!n&&Ri(t)||typeof t!="object"&&(!o||typeof t!="function"))throw new Fe(e,"Object",t)}),Mu=ze((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Fe(e,"a dictionary",t)}),nn=ze((t,e,r=0)=>{if(!Ri(t))throw new Fe(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new nr(e,t,n)}});function ju(t,e){nn(t,e);for(let r=0;r<t.length;r++)Pi(t[r],`${e}[${r}]`)}function Lu(t,e){nn(t,e);for(let r=0;r<t.length;r++)is(t[r],`${e}[${r}]`)}function Du(t,e){nn(t,e);for(let r=0;r<t.length;r++){let n=t[r],o=`${e}[${r}]`;if(n==null)throw new Fe(o,"AbortSignal",n);os(n,o)}}function Nu(t,e="signal"){if(Pi(t,e),ra[t]===void 0)throw ra[yu(t)]!==void 0?new ta(t+" (signals must use all capital letters)"):new ta(t)}var Uu=ze((t,e="buffer")=>{if(!vu(t))throw new Fe(e,["Buffer","TypedArray","DataView"],t)});function Wu(t,e){let r=Iu(e),n=t.length;if(r==="hex"&&n%2!==0)throw new nr("encoding",e,`is invalid for data of length ${n}`)}function Gu(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&wu(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Su(e,t,r);return t|0}var os=ze((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Fe(e,"AbortSignal",t)}),$u=ze((t,e)=>{if(typeof t!="function")throw new Fe(e,"Function",t)}),Vu=ze((t,e)=>{if(typeof t!="function"||Eu(t))throw new Fe(e,"Function",t)}),Qu=ze((t,e)=>{if(t!==void 0)throw new Fe(e,"undefined",t)});function Hu(t,e,r){if(!es(r,t))throw new Fe(e,`('${ts(r,"|")}')`,t)}var zu=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function na(t,e){if(typeof t>"u"||!rs(zu,t))throw new nr(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function qu(t){if(typeof t=="string")return na(t,"hints"),t;if(Ri(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let o=t[n];na(o,"hints"),r+=o,n!==e-1&&(r+=", ")}return r}throw new nr("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var vr={isInt32:Tu,isUint32:Ru,parseFileMode:Au,validateArray:nn,validateStringArray:ju,validateBooleanArray:Lu,validateAbortSignalArray:Du,validateBoolean:is,validateBuffer:Uu,validateDictionary:Mu,validateEncoding:Wu,validateFunction:$u,validateInt32:Bu,validateInteger:xu,validateNumber:Ou,validateObject:ku,validateOneOf:Fu,validatePlainFunction:Vu,validatePort:Gu,validateSignalName:Nu,validateString:Pi,validateUint32:ns,validateUndefined:Qu,validateUnion:Hu,validateAbortSignal:os,validateLinkHeaderValue:qu},Ai={exports:{}},as={exports:{}},Ie=as.exports={},ot,at;function ai(){throw new Error("setTimeout has not been defined")}function si(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ot=setTimeout:ot=ai}catch{ot=ai}try{typeof clearTimeout=="function"?at=clearTimeout:at=si}catch{at=si}})();function ss(t){if(ot===setTimeout)return setTimeout(t,0);if((ot===ai||!ot)&&setTimeout)return ot=setTimeout,setTimeout(t,0);try{return ot(t,0)}catch{try{return ot.call(null,t,0)}catch{return ot.call(this,t,0)}}}function Yu(t){if(at===clearTimeout)return clearTimeout(t);if((at===si||!at)&&clearTimeout)return at=clearTimeout,clearTimeout(t);try{return at(t)}catch{try{return at.call(null,t)}catch{return at.call(this,t)}}}var mt=[],er=!1,Dt,Wr=-1;function Ju(){!er||!Dt||(er=!1,Dt.length?mt=Dt.concat(mt):Wr=-1,mt.length&&ls())}function ls(){if(!er){var t=ss(Ju);er=!0;for(var e=mt.length;e;){for(Dt=mt,mt=[];++Wr<e;)Dt&&Dt[Wr].run();Wr=-1,e=mt.length}Dt=null,er=!1,Yu(t)}}Ie.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];mt.push(new us(t,e)),mt.length===1&&!er&&ss(ls)};function us(t,e){this.fun=t,this.array=e}us.prototype.run=function(){this.fun.apply(null,this.array)};Ie.title="browser";Ie.browser=!0;Ie.env={};Ie.argv=[];Ie.version="";Ie.versions={};function _t(){}Ie.on=_t;Ie.addListener=_t;Ie.once=_t;Ie.off=_t;Ie.removeListener=_t;Ie.removeAllListeners=_t;Ie.emit=_t;Ie.prependListener=_t;Ie.prependOnceListener=_t;Ie.listeners=function(t){return[]};Ie.binding=function(t){throw new Error("process.binding is not supported")};Ie.cwd=function(){return"/"};Ie.chdir=function(t){throw new Error("process.chdir is not supported")};Ie.umask=function(){return 0};var $t=as.exports,{SymbolAsyncIterator:ia,SymbolIterator:oa,SymbolFor:Vt}=Se,cs=Vt("nodejs.stream.destroyed"),ds=Vt("nodejs.stream.errored"),li=Vt("nodejs.stream.readable"),ui=Vt("nodejs.stream.writable"),fs=Vt("nodejs.stream.disturbed"),Ku=Vt("nodejs.webstream.isClosedPromise"),Zu=Vt("nodejs.webstream.controllerErrorFunction");function on(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function an(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Xu(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ct(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function hs(t){return!!(t&&!ct(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function ps(t){return!!(t&&!ct(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function ms(t){return!!(t&&!ct(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function ec(t){return hs(t)||ps(t)||ms(t)}function tc(t,e){return t==null?!1:e===!0?typeof t[ia]=="function":e===!1?typeof t[oa]=="function":typeof t[ia]=="function"||typeof t[oa]=="function"}function sn(t){if(!ct(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[cs]||n!=null&&n.destroyed)}function gs(t){if(!an(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function rc(t,e){if(!an(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function nc(t){if(!on(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function bs(t,e){if(!on(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function _s(t){return t&&t[li]!=null?t[li]:typeof t?.readable!="boolean"?null:sn(t)?!1:on(t)&&t.readable&&!bs(t)}function ys(t){return t&&t[ui]!=null?t[ui]:typeof t?.writable!="boolean"?null:sn(t)?!1:an(t)&&t.writable&&!gs(t)}function ic(t,e){return ct(t)?sn(t)?!0:!(e?.readable!==!1&&_s(t)||e?.writable!==!1&&ys(t)):null}function oc(t){var e,r;return ct(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function ac(t){var e,r;return ct(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function sc(t){if(!ct(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&ws(t)?t._closed:null}function ws(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Ss(t){return typeof t._sent100=="boolean"&&ws(t)}function lc(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function uc(t){if(!ct(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Ss(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function cc(t){var e;return!!(t&&((e=t[fs])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function dc(t){var e,r,n,o,l,d,s,m,S,v;return!!(t&&((e=(r=(n=(o=(l=(d=t[ds])!==null&&d!==void 0?d:t.readableErrored)!==null&&l!==void 0?l:t.writableErrored)!==null&&o!==void 0?o:(s=t._readableState)===null||s===void 0?void 0:s.errorEmitted)!==null&&n!==void 0?n:(m=t._writableState)===null||m===void 0?void 0:m.errorEmitted)!==null&&r!==void 0?r:(S=t._readableState)===null||S===void 0?void 0:S.errored)!==null&&e!==void 0?e:!((v=t._writableState)===null||v===void 0)&&v.errored))}var yt={isDestroyed:sn,kIsDestroyed:cs,isDisturbed:cc,kIsDisturbed:fs,isErrored:dc,kIsErrored:ds,isReadable:_s,kIsReadable:li,kIsClosedPromise:Ku,kControllerErrorFunction:Zu,kIsWritable:ui,isClosed:sc,isDuplexNodeStream:Xu,isFinished:ic,isIterable:tc,isReadableNodeStream:on,isReadableStream:hs,isReadableEnded:nc,isReadableFinished:bs,isReadableErrored:ac,isNodeStream:ct,isWebStream:ec,isWritable:ys,isWritableNodeStream:an,isWritableStream:ps,isWritableEnded:gs,isWritableFinished:rc,isWritableErrored:oc,isServerRequest:lc,isServerResponse:Ss,willEmitClose:uc,isTransformStream:ms},Zt=$t,{AbortError:Is,codes:fc}=Ue,{ERR_INVALID_ARG_TYPE:hc,ERR_STREAM_PREMATURE_CLOSE:aa}=fc,{kEmptyObject:ci,once:di}=je,{validateAbortSignal:pc,validateFunction:mc,validateObject:gc,validateBoolean:bc}=vr,{Promise:_c,PromisePrototypeThen:yc,SymbolDispose:Es}=Se,{isClosed:wc,isReadable:sa,isReadableNodeStream:$n,isReadableStream:Sc,isReadableFinished:la,isReadableErrored:ua,isWritable:ca,isWritableNodeStream:da,isWritableStream:Ic,isWritableFinished:fa,isWritableErrored:ha,isNodeStream:Ec,willEmitClose:vc,kIsClosedPromise:Tc}=yt,tr;function Rc(t){return t.setHeader&&typeof t.abort=="function"}var fi=()=>{};function vs(t,e,r){var n,o;if(arguments.length===2?(r=e,e=ci):e==null?e=ci:gc(e,"options"),mc(r,"callback"),pc(e.signal,"options.signal"),r=di(r),Sc(t)||Ic(t))return Cc(t,e,r);if(!Ec(t))throw new hc("stream",["ReadableStream","WritableStream","Stream"],t);let l=(n=e.readable)!==null&&n!==void 0?n:$n(t),d=(o=e.writable)!==null&&o!==void 0?o:da(t),s=t._writableState,m=t._readableState,S=()=>{t.writable||_()},v=vc(t)&&$n(t)===l&&da(t)===d,R=fa(t,!1),_=()=>{R=!0,t.destroyed&&(v=!1),!(v&&(!t.readable||l))&&(!l||C)&&r.call(t)},C=la(t,!1),A=()=>{C=!0,t.destroyed&&(v=!1),!(v&&(!t.writable||d))&&(!d||R)&&r.call(t)},P=Q=>{r.call(t,Q)},F=wc(t),V=()=>{F=!0;let Q=ha(t)||ua(t);if(Q&&typeof Q!="boolean")return r.call(t,Q);if(l&&!C&&$n(t,!0)&&!la(t,!1))return r.call(t,new aa);if(d&&!R&&!fa(t,!1))return r.call(t,new aa);r.call(t)},G=()=>{F=!0;let Q=ha(t)||ua(t);if(Q&&typeof Q!="boolean")return r.call(t,Q);r.call(t)},k=()=>{t.req.on("finish",_)};Rc(t)?(t.on("complete",_),v||t.on("abort",V),t.req?k():t.on("request",k)):d&&!s&&(t.on("end",S),t.on("close",S)),!v&&typeof t.aborted=="boolean"&&t.on("aborted",V),t.on("end",A),t.on("finish",_),e.error!==!1&&t.on("error",P),t.on("close",V),F?Zt.nextTick(V):s!=null&&s.errorEmitted||m!=null&&m.errorEmitted?v||Zt.nextTick(G):(!l&&(!v||sa(t))&&(R||ca(t)===!1)||!d&&(!v||ca(t))&&(C||sa(t)===!1)||m&&t.req&&t.aborted)&&Zt.nextTick(G);let H=()=>{r=fi,t.removeListener("aborted",V),t.removeListener("complete",_),t.removeListener("abort",V),t.removeListener("request",k),t.req&&t.req.removeListener("finish",_),t.removeListener("end",S),t.removeListener("close",S),t.removeListener("finish",_),t.removeListener("end",A),t.removeListener("error",P),t.removeListener("close",V)};if(e.signal&&!F){let Q=()=>{let ue=r;H(),ue.call(t,new Is(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Zt.nextTick(Q);else{tr=tr||je.addAbortListener;let ue=tr(e.signal,Q),Te=r;r=di((...le)=>{ue[Es](),Te.apply(t,le)})}}return H}function Cc(t,e,r){let n=!1,o=fi;if(e.signal)if(o=()=>{n=!0,r.call(t,new Is(void 0,{cause:e.signal.reason}))},e.signal.aborted)Zt.nextTick(o);else{tr=tr||je.addAbortListener;let d=tr(e.signal,o),s=r;r=di((...m)=>{d[Es](),s.apply(t,m)})}let l=(...d)=>{n||Zt.nextTick(()=>r.apply(t,d))};return yc(t[Tc].promise,l,l),fi}function Pc(t,e){var r;let n=!1;return e===null&&(e=ci),(r=e)!==null&&r!==void 0&&r.cleanup&&(bc(e.cleanup,"cleanup"),n=e.cleanup),new _c((o,l)=>{let d=vs(t,e,s=>{n&&d(),s?l(s):o()})})}Ai.exports=vs;Ai.exports.finished=Pc;var Ct=Ai.exports,lt=$t,{aggregateTwoErrors:Ac,codes:{ERR_MULTIPLE_CALLBACK:xc},AbortError:Bc}=Ue,{Symbol:Ts}=Se,{kIsDestroyed:Oc,isDestroyed:Fc,isFinished:kc,isServerRequest:Mc}=yt,Rs=Ts("kDestroy"),hi=Ts("kConstruct");function Cs(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function jc(t,e){let r=this._readableState,n=this._writableState,o=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(Cs(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?pa(this,t,e):this.once(Rs,function(l){pa(this,Ac(l,t),e)}),this)}function pa(t,e,r){let n=!1;function o(l){if(n)return;n=!0;let d=t._readableState,s=t._writableState;Cs(l,s,d),s&&(s.closed=!0),d&&(d.closed=!0),typeof r=="function"&&r(l),l?lt.nextTick(Lc,t,l):lt.nextTick(Ps,t)}try{t._destroy(e||null,o)}catch(l){o(l)}}function Lc(t,e){pi(t,e),Ps(t)}function Ps(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function pi(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Dc(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function mi(t,e,r){let n=t._readableState,o=t._writableState;if(o!=null&&o.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||o!=null&&o.autoDestroy?t.destroy(e):e&&(e.stack,o&&!o.errored&&(o.errored=e),n&&!n.errored&&(n.errored=e),r?lt.nextTick(pi,t,e):pi(t,e))}function Nc(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(hi,e),!(t.listenerCount(hi)>1)&&lt.nextTick(Uc,t)}function Uc(t){let e=!1;function r(n){if(e){mi(t,n??new xc);return}e=!0;let o=t._readableState,l=t._writableState,d=l||o;o&&(o.constructed=!0),l&&(l.constructed=!0),d.destroyed?t.emit(Rs,n):n?mi(t,n,!0):lt.nextTick(Wc,t)}try{t._construct(n=>{lt.nextTick(r,n)})}catch(n){lt.nextTick(r,n)}}function Wc(t){t.emit(hi)}function ma(t){return t?.setHeader&&typeof t.abort=="function"}function As(t){t.emit("close")}function Gc(t,e){t.emit("error",e),lt.nextTick(As,t)}function $c(t,e){!t||Fc(t)||(!e&&!kc(t)&&(e=new Bc),Mc(t)?(t.socket=null,t.destroy(e)):ma(t)?t.abort():ma(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?lt.nextTick(Gc,t,e):lt.nextTick(As,t),t.destroyed||(t[Oc]=!0))}var ir={construct:Nc,destroyer:$c,destroy:jc,undestroy:Dc,errorOrDestroy:mi},{ArrayIsArray:Vc,ObjectSetPrototypeOf:xs}=Se,{EventEmitter:ln}=tn;function un(t){ln.call(this,t)}xs(un.prototype,ln.prototype);xs(un,ln);un.prototype.pipe=function(t,e){let r=this;function n(v){t.writable&&t.write(v)===!1&&r.pause&&r.pause()}r.on("data",n);function o(){r.readable&&r.resume&&r.resume()}t.on("drain",o),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",d),r.on("close",s));let l=!1;function d(){l||(l=!0,t.end())}function s(){l||(l=!0,typeof t.destroy=="function"&&t.destroy())}function m(v){S(),ln.listenerCount(this,"error")===0&&this.emit("error",v)}gi(r,"error",m),gi(t,"error",m);function S(){r.removeListener("data",n),t.removeListener("drain",o),r.removeListener("end",d),r.removeListener("close",s),r.removeListener("error",m),t.removeListener("error",m),r.removeListener("end",S),r.removeListener("close",S),t.removeListener("close",S)}return r.on("end",S),r.on("close",S),t.on("close",S),t.emit("pipe",r),t};function gi(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Vc(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var xi={Stream:un,prependListener:gi},Bs={exports:{}};(function(t){let{SymbolDispose:e}=Se,{AbortError:r,codes:n}=Ue,{isNodeStream:o,isWebStream:l,kControllerErrorFunction:d}=yt,s=Ct,{ERR_INVALID_ARG_TYPE:m}=n,S,v=(R,_)=>{if(typeof R!="object"||!("aborted"in R))throw new m(_,"AbortSignal",R)};t.exports.addAbortSignal=function(R,_){if(v(R,"signal"),!o(_)&&!l(_))throw new m("stream",["ReadableStream","WritableStream","Stream"],_);return t.exports.addAbortSignalNoValidate(R,_)},t.exports.addAbortSignalNoValidate=function(R,_){if(typeof R!="object"||!("aborted"in R))return _;let C=o(_)?()=>{_.destroy(new r(void 0,{cause:R.reason}))}:()=>{_[d](new r(void 0,{cause:R.reason}))};if(R.aborted)C();else{S=S||je.addAbortListener;let A=S(R,C);s(_,A[e])}return _}})(Bs);var cn=Bs.exports,{StringPrototypeSlice:ga,SymbolIterator:Qc,TypedArrayPrototypeSet:jr,Uint8Array:Hc}=Se,{Buffer:Vn}=Rt,{inspect:zc}=je,qc=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}unshift(t){let e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let e=this.head,r=""+e.data;for(;(e=e.next)!==null;)r+=t+e.data;return r}concat(t){if(this.length===0)return Vn.alloc(0);let e=Vn.allocUnsafe(t>>>0),r=this.head,n=0;for(;r;)jr(e,r.data,n),n+=r.data.length,r=r.next;return e}consume(t,e){let r=this.head.data;if(t<r.length){let n=r.slice(0,t);return this.head.data=r.slice(t),n}return t===r.length?this.shift():e?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Qc](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let e="",r=this.head,n=0;do{let o=r.data;if(t>o.length)e+=o,t-=o.length;else{t===o.length?(e+=o,++n,r.next?this.head=r.next:this.head=this.tail=null):(e+=ga(o,0,t),this.head=r,r.data=ga(o,t));break}++n}while((r=r.next)!==null);return this.length-=n,e}_getBuffer(t){let e=Vn.allocUnsafe(t),r=t,n=this.head,o=0;do{let l=n.data;if(t>l.length)jr(e,l,r-t),t-=l.length;else{t===l.length?(jr(e,l,r-t),++o,n.next?this.head=n.next:this.head=this.tail=null):(jr(e,new Hc(l.buffer,l.byteOffset,t),r-t),this.head=n,n.data=l.slice(t));break}++o}while((n=n.next)!==null);return this.length-=o,e}[Symbol.for("nodejs.util.inspect.custom")](t,e){return zc(this,ur(ke({},e),{depth:0,customInspect:!1}))}},{MathFloor:Yc,NumberIsInteger:Jc}=Se,{validateInteger:Kc}=vr,{ERR_INVALID_ARG_VALUE:Zc}=Ue.codes,Os=16*1024,Fs=16;function Xc(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function ks(t){return t?Fs:Os}function ed(t,e){Kc(e,"value",0),t?Fs=e:Os=e}function td(t,e,r,n){let o=Xc(e,n,r);if(o!=null){if(!Jc(o)||o<0){let l=n?`options.${r}`:"options.highWaterMark";throw new Zc(l,o)}return Yc(o)}return ks(t.objectMode)}var dn={getHighWaterMark:td,getDefaultHighWaterMark:ks,setDefaultHighWaterMark:ed},Ms={},bi={exports:{}},js={};(function(t){var e=Er,r=Xr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=G,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=l(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{var a=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(a,c),a.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function d(a){if(a>o)throw new RangeError('The value "'+a+'" is invalid for option "size"');var c=new Uint8Array(a);return Object.setPrototypeOf(c,s.prototype),c}function s(a,c,h){if(typeof a=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(a)}return m(a,c,h)}s.poolSize=8192;function m(a,c,h){if(typeof a=="string")return _(a,c);if(ArrayBuffer.isView(a))return A(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(w(a,ArrayBuffer)||a&&w(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(w(a,SharedArrayBuffer)||a&&w(a.buffer,SharedArrayBuffer)))return P(a,c,h);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var y=a.valueOf&&a.valueOf();if(y!=null&&y!==a)return s.from(y,c,h);var E=F(a);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return s.from(a[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}s.from=function(a,c,h){return m(a,c,h)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function S(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function v(a,c,h){return S(a),a<=0?d(a):c!==void 0?typeof h=="string"?d(a).fill(c,h):d(a).fill(c):d(a)}s.alloc=function(a,c,h){return v(a,c,h)};function R(a){return S(a),d(a<0?0:V(a)|0)}s.allocUnsafe=function(a){return R(a)},s.allocUnsafeSlow=function(a){return R(a)};function _(a,c){if((typeof c!="string"||c==="")&&(c="utf8"),!s.isEncoding(c))throw new TypeError("Unknown encoding: "+c);var h=k(a,c)|0,y=d(h),E=y.write(a,c);return E!==h&&(y=y.slice(0,E)),y}function C(a){for(var c=a.length<0?0:V(a.length)|0,h=d(c),y=0;y<c;y+=1)h[y]=a[y]&255;return h}function A(a){if(w(a,Uint8Array)){var c=new Uint8Array(a);return P(c.buffer,c.byteOffset,c.byteLength)}return C(a)}function P(a,c,h){if(c<0||a.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');var y;return c===void 0&&h===void 0?y=new Uint8Array(a):h===void 0?y=new Uint8Array(a,c):y=new Uint8Array(a,c,h),Object.setPrototypeOf(y,s.prototype),y}function F(a){if(s.isBuffer(a)){var c=V(a.length)|0,h=d(c);return h.length===0||a.copy(h,0,0,c),h}if(a.length!==void 0)return typeof a.length!="number"||T(a.length)?d(0):C(a);if(a.type==="Buffer"&&Array.isArray(a.data))return C(a.data)}function V(a){if(a>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return a|0}function G(a){return+a!=a&&(a=0),s.alloc(+a)}s.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==s.prototype},s.compare=function(a,c){if(w(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),w(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),!s.isBuffer(a)||!s.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===c)return 0;for(var h=a.length,y=c.length,E=0,B=Math.min(h,y);E<B;++E)if(a[E]!==c[E]){h=a[E],y=c[E];break}return h<y?-1:y<h?1:0},s.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(a,c){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return s.alloc(0);var h;if(c===void 0)for(c=0,h=0;h<a.length;++h)c+=a[h].length;var y=s.allocUnsafe(c),E=0;for(h=0;h<a.length;++h){var B=a[h];if(w(B,Uint8Array))E+B.length>y.length?s.from(B).copy(y,E):Uint8Array.prototype.set.call(y,B,E);else if(s.isBuffer(B))B.copy(y,E);else throw new TypeError('"list" argument must be an Array of Buffers');E+=B.length}return y};function k(a,c){if(s.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||w(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var h=a.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&h===0)return 0;for(var E=!1;;)switch(c){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Pe(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return rt(a).length;default:if(E)return y?-1:Pe(a).length;c=(""+c).toLowerCase(),E=!0}}s.byteLength=k;function H(a,c,h){var y=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,c>>>=0,h<=c))return"";for(a||(a="utf8");;)switch(a){case"hex":return be(this,c,h);case"utf8":case"utf-8":return ie(this,c,h);case"ascii":return ne(this,c,h);case"latin1":case"binary":return pe(this,c,h);case"base64":return N(this,c,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,c,h);default:if(y)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),y=!0}}s.prototype._isBuffer=!0;function Q(a,c,h){var y=a[c];a[c]=a[h],a[h]=y}s.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<a;c+=2)Q(this,c,c+1);return this},s.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<a;c+=4)Q(this,c,c+3),Q(this,c+1,c+2);return this},s.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<a;c+=8)Q(this,c,c+7),Q(this,c+1,c+6),Q(this,c+2,c+5),Q(this,c+3,c+4);return this},s.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?ie(this,0,a):H.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(a){if(!s.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:s.compare(this,a)===0},s.prototype.inspect=function(){var a="",c=t.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(a,c,h,y,E){if(w(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),!s.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(c===void 0&&(c=0),h===void 0&&(h=a?a.length:0),y===void 0&&(y=0),E===void 0&&(E=this.length),c<0||h>a.length||y<0||E>this.length)throw new RangeError("out of range index");if(y>=E&&c>=h)return 0;if(y>=E)return-1;if(c>=h)return 1;if(c>>>=0,h>>>=0,y>>>=0,E>>>=0,this===a)return 0;for(var B=E-y,O=h-c,K=Math.min(B,O),_e=this.slice(y,E),re=a.slice(c,h),me=0;me<K;++me)if(_e[me]!==re[me]){B=_e[me],O=re[me];break}return B<O?-1:O<B?1:0};function ue(a,c,h,y,E){if(a.length===0)return-1;if(typeof h=="string"?(y=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,T(h)&&(h=E?0:a.length-1),h<0&&(h=a.length+h),h>=a.length){if(E)return-1;h=a.length-1}else if(h<0)if(E)h=0;else return-1;if(typeof c=="string"&&(c=s.from(c,y)),s.isBuffer(c))return c.length===0?-1:Te(a,c,h,y,E);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(a,c,h):Uint8Array.prototype.lastIndexOf.call(a,c,h):Te(a,[c],h,y,E);throw new TypeError("val must be string, number or Buffer")}function Te(a,c,h,y,E){var B=1,O=a.length,K=c.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(a.length<2||c.length<2)return-1;B=2,O/=2,K/=2,h/=2}function _e(f,b){return B===1?f[b]:f.readUInt16BE(b*B)}var re;if(E){var me=-1;for(re=h;re<O;re++)if(_e(a,re)===_e(c,me===-1?0:re-me)){if(me===-1&&(me=re),re-me+1===K)return me*B}else me!==-1&&(re-=re-me),me=-1}else for(h+K>O&&(h=O-K),re=h;re>=0;re--){for(var i=!0,u=0;u<K;u++)if(_e(a,re+u)!==_e(c,u)){i=!1;break}if(i)return re}return-1}s.prototype.includes=function(a,c,h){return this.indexOf(a,c,h)!==-1},s.prototype.indexOf=function(a,c,h){return ue(this,a,c,h,!0)},s.prototype.lastIndexOf=function(a,c,h){return ue(this,a,c,h,!1)};function le(a,c,h,y){h=Number(h)||0;var E=a.length-h;y?(y=Number(y),y>E&&(y=E)):y=E;var B=c.length;y>B/2&&(y=B/2);for(var O=0;O<y;++O){var K=parseInt(c.substr(O*2,2),16);if(T(K))return O;a[h+O]=K}return O}function de(a,c,h,y){return Le(Pe(c,a.length-h),a,h,y)}function Re(a,c,h,y){return Le(Je(c),a,h,y)}function Ce(a,c,h,y){return Le(rt(c),a,h,y)}function X(a,c,h,y){return Le(wt(c,a.length-h),a,h,y)}s.prototype.write=function(a,c,h,y){if(c===void 0)y="utf8",h=this.length,c=0;else if(h===void 0&&typeof c=="string")y=c,h=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(h)?(h=h>>>0,y===void 0&&(y="utf8")):(y=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var E=this.length-c;if((h===void 0||h>E)&&(h=E),a.length>0&&(h<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");for(var B=!1;;)switch(y){case"hex":return le(this,a,c,h);case"utf8":case"utf-8":return de(this,a,c,h);case"ascii":case"latin1":case"binary":return Re(this,a,c,h);case"base64":return Ce(this,a,c,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,a,c,h);default:if(B)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),B=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(a,c,h){return c===0&&h===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(c,h))}function ie(a,c,h){h=Math.min(a.length,h);for(var y=[],E=c;E<h;){var B=a[E],O=null,K=B>239?4:B>223?3:B>191?2:1;if(E+K<=h){var _e,re,me,i;switch(K){case 1:B<128&&(O=B);break;case 2:_e=a[E+1],(_e&192)===128&&(i=(B&31)<<6|_e&63,i>127&&(O=i));break;case 3:_e=a[E+1],re=a[E+2],(_e&192)===128&&(re&192)===128&&(i=(B&15)<<12|(_e&63)<<6|re&63,i>2047&&(i<55296||i>57343)&&(O=i));break;case 4:_e=a[E+1],re=a[E+2],me=a[E+3],(_e&192)===128&&(re&192)===128&&(me&192)===128&&(i=(B&15)<<18|(_e&63)<<12|(re&63)<<6|me&63,i>65535&&i<1114112&&(O=i))}}O===null?(O=65533,K=1):O>65535&&(O-=65536,y.push(O>>>10&1023|55296),O=56320|O&1023),y.push(O),E+=K}return te(y)}var Y=4096;function te(a){var c=a.length;if(c<=Y)return String.fromCharCode.apply(String,a);for(var h="",y=0;y<c;)h+=String.fromCharCode.apply(String,a.slice(y,y+=Y));return h}function ne(a,c,h){var y="";h=Math.min(a.length,h);for(var E=c;E<h;++E)y+=String.fromCharCode(a[E]&127);return y}function pe(a,c,h){var y="";h=Math.min(a.length,h);for(var E=c;E<h;++E)y+=String.fromCharCode(a[E]);return y}function be(a,c,h){var y=a.length;(!c||c<0)&&(c=0),(!h||h<0||h>y)&&(h=y);for(var E="",B=c;B<h;++B)E+=M[a[B]];return E}function fe(a,c,h){for(var y=a.slice(c,h),E="",B=0;B<y.length-1;B+=2)E+=String.fromCharCode(y[B]+y[B+1]*256);return E}s.prototype.slice=function(a,c){var h=this.length;a=~~a,c=c===void 0?h:~~c,a<0?(a+=h,a<0&&(a=0)):a>h&&(a=h),c<0?(c+=h,c<0&&(c=0)):c>h&&(c=h),c<a&&(c=a);var y=this.subarray(a,c);return Object.setPrototypeOf(y,s.prototype),y};function $(a,c,h){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+c>h)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(a,c,h){a=a>>>0,c=c>>>0,h||$(a,c,this.length);for(var y=this[a],E=1,B=0;++B<c&&(E*=256);)y+=this[a+B]*E;return y},s.prototype.readUintBE=s.prototype.readUIntBE=function(a,c,h){a=a>>>0,c=c>>>0,h||$(a,c,this.length);for(var y=this[a+--c],E=1;c>0&&(E*=256);)y+=this[a+--c]*E;return y},s.prototype.readUint8=s.prototype.readUInt8=function(a,c){return a=a>>>0,c||$(a,1,this.length),this[a]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(a,c){return a=a>>>0,c||$(a,2,this.length),this[a]|this[a+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(a,c){return a=a>>>0,c||$(a,2,this.length),this[a]<<8|this[a+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(a,c){return a=a>>>0,c||$(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(a,c){return a=a>>>0,c||$(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},s.prototype.readIntLE=function(a,c,h){a=a>>>0,c=c>>>0,h||$(a,c,this.length);for(var y=this[a],E=1,B=0;++B<c&&(E*=256);)y+=this[a+B]*E;return E*=128,y>=E&&(y-=Math.pow(2,8*c)),y},s.prototype.readIntBE=function(a,c,h){a=a>>>0,c=c>>>0,h||$(a,c,this.length);for(var y=c,E=1,B=this[a+--y];y>0&&(E*=256);)B+=this[a+--y]*E;return E*=128,B>=E&&(B-=Math.pow(2,8*c)),B},s.prototype.readInt8=function(a,c){return a=a>>>0,c||$(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},s.prototype.readInt16LE=function(a,c){a=a>>>0,c||$(a,2,this.length);var h=this[a]|this[a+1]<<8;return h&32768?h|4294901760:h},s.prototype.readInt16BE=function(a,c){a=a>>>0,c||$(a,2,this.length);var h=this[a+1]|this[a]<<8;return h&32768?h|4294901760:h},s.prototype.readInt32LE=function(a,c){return a=a>>>0,c||$(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},s.prototype.readInt32BE=function(a,c){return a=a>>>0,c||$(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},s.prototype.readFloatLE=function(a,c){return a=a>>>0,c||$(a,4,this.length),r.read(this,a,!0,23,4)},s.prototype.readFloatBE=function(a,c){return a=a>>>0,c||$(a,4,this.length),r.read(this,a,!1,23,4)},s.prototype.readDoubleLE=function(a,c){return a=a>>>0,c||$(a,8,this.length),r.read(this,a,!0,52,8)},s.prototype.readDoubleBE=function(a,c){return a=a>>>0,c||$(a,8,this.length),r.read(this,a,!1,52,8)};function J(a,c,h,y,E,B){if(!s.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>E||c<B)throw new RangeError('"value" argument is out of bounds');if(h+y>a.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(a,c,h,y){if(a=+a,c=c>>>0,h=h>>>0,!y){var E=Math.pow(2,8*h)-1;J(this,a,c,h,E,0)}var B=1,O=0;for(this[c]=a&255;++O<h&&(B*=256);)this[c+O]=a/B&255;return c+h},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(a,c,h,y){if(a=+a,c=c>>>0,h=h>>>0,!y){var E=Math.pow(2,8*h)-1;J(this,a,c,h,E,0)}var B=h-1,O=1;for(this[c+B]=a&255;--B>=0&&(O*=256);)this[c+B]=a/O&255;return c+h},s.prototype.writeUint8=s.prototype.writeUInt8=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,1,255,0),this[c]=a&255,c+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,2,65535,0),this[c]=a&255,this[c+1]=a>>>8,c+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,2,65535,0),this[c]=a>>>8,this[c+1]=a&255,c+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,4,4294967295,0),this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255,c+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,4,4294967295,0),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4},s.prototype.writeIntLE=function(a,c,h,y){if(a=+a,c=c>>>0,!y){var E=Math.pow(2,8*h-1);J(this,a,c,h,E-1,-E)}var B=0,O=1,K=0;for(this[c]=a&255;++B<h&&(O*=256);)a<0&&K===0&&this[c+B-1]!==0&&(K=1),this[c+B]=(a/O>>0)-K&255;return c+h},s.prototype.writeIntBE=function(a,c,h,y){if(a=+a,c=c>>>0,!y){var E=Math.pow(2,8*h-1);J(this,a,c,h,E-1,-E)}var B=h-1,O=1,K=0;for(this[c+B]=a&255;--B>=0&&(O*=256);)a<0&&K===0&&this[c+B+1]!==0&&(K=1),this[c+B]=(a/O>>0)-K&255;return c+h},s.prototype.writeInt8=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,1,127,-128),a<0&&(a=255+a+1),this[c]=a&255,c+1},s.prototype.writeInt16LE=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,2,32767,-32768),this[c]=a&255,this[c+1]=a>>>8,c+2},s.prototype.writeInt16BE=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,2,32767,-32768),this[c]=a>>>8,this[c+1]=a&255,c+2},s.prototype.writeInt32LE=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,4,2147483647,-2147483648),this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24,c+4},s.prototype.writeInt32BE=function(a,c,h){return a=+a,c=c>>>0,h||J(this,a,c,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4};function z(a,c,h,y,E,B){if(h+y>a.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function he(a,c,h,y,E){return c=+c,h=h>>>0,E||z(a,c,h,4),r.write(a,c,h,y,23,4),h+4}s.prototype.writeFloatLE=function(a,c,h){return he(this,a,c,!0,h)},s.prototype.writeFloatBE=function(a,c,h){return he(this,a,c,!1,h)};function xe(a,c,h,y,E){return c=+c,h=h>>>0,E||z(a,c,h,8),r.write(a,c,h,y,52,8),h+8}s.prototype.writeDoubleLE=function(a,c,h){return xe(this,a,c,!0,h)},s.prototype.writeDoubleBE=function(a,c,h){return xe(this,a,c,!1,h)},s.prototype.copy=function(a,c,h,y){if(!s.isBuffer(a))throw new TypeError("argument should be a Buffer");if(h||(h=0),!y&&y!==0&&(y=this.length),c>=a.length&&(c=a.length),c||(c=0),y>0&&y<h&&(y=h),y===h||a.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),a.length-c<y-h&&(y=a.length-c+h);var E=y-h;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,h,y):Uint8Array.prototype.set.call(a,this.subarray(h,y),c),E},s.prototype.fill=function(a,c,h,y){if(typeof a=="string"){if(typeof c=="string"?(y=c,c=0,h=this.length):typeof h=="string"&&(y=h,h=this.length),y!==void 0&&typeof y!="string")throw new TypeError("encoding must be a string");if(typeof y=="string"&&!s.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(a.length===1){var E=a.charCodeAt(0);(y==="utf8"&&E<128||y==="latin1")&&(a=E)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(c<0||this.length<c||this.length<h)throw new RangeError("Out of range index");if(h<=c)return this;c=c>>>0,h=h===void 0?this.length:h>>>0,a||(a=0);var B;if(typeof a=="number")for(B=c;B<h;++B)this[B]=a;else{var O=s.isBuffer(a)?a:s.from(a,y),K=O.length;if(K===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(B=0;B<h-c;++B)this[B+c]=O[B%K]}return this};var qe=/[^+/0-9A-Za-z-_]/g;function Ye(a){if(a=a.split("=")[0],a=a.trim().replace(qe,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function Pe(a,c){c=c||1/0;for(var h,y=a.length,E=null,B=[],O=0;O<y;++O){if(h=a.charCodeAt(O),h>55295&&h<57344){if(!E){if(h>56319){(c-=3)>-1&&B.push(239,191,189);continue}else if(O+1===y){(c-=3)>-1&&B.push(239,191,189);continue}E=h;continue}if(h<56320){(c-=3)>-1&&B.push(239,191,189),E=h;continue}h=(E-55296<<10|h-56320)+65536}else E&&(c-=3)>-1&&B.push(239,191,189);if(E=null,h<128){if((c-=1)<0)break;B.push(h)}else if(h<2048){if((c-=2)<0)break;B.push(h>>6|192,h&63|128)}else if(h<65536){if((c-=3)<0)break;B.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((c-=4)<0)break;B.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return B}function Je(a){for(var c=[],h=0;h<a.length;++h)c.push(a.charCodeAt(h)&255);return c}function wt(a,c){for(var h,y,E,B=[],O=0;O<a.length&&!((c-=2)<0);++O)h=a.charCodeAt(O),y=h>>8,E=h%256,B.push(E),B.push(y);return B}function rt(a){return e.toByteArray(Ye(a))}function Le(a,c,h,y){for(var E=0;E<y&&!(E+h>=c.length||E>=a.length);++E)c[E+h]=a[E];return E}function w(a,c){return a instanceof c||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===c.name}function T(a){return a!==a}var M=function(){for(var a="0123456789abcdef",c=new Array(256),h=0;h<16;++h)for(var y=h*16,E=0;E<16;++E)c[y+E]=a[h]+a[E];return c}()})(js);(function(t,e){var r=js,n=r.Buffer;function o(d,s){for(var m in d)s[m]=d[m]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=l);function l(d,s,m){return n(d,s,m)}l.prototype=Object.create(n.prototype),o(n,l),l.from=function(d,s,m){if(typeof d=="number")throw new TypeError("Argument must not be a number");return n(d,s,m)},l.alloc=function(d,s,m){if(typeof d!="number")throw new TypeError("Argument must be a number");var S=n(d);return s!==void 0?typeof m=="string"?S.fill(s,m):S.fill(s):S.fill(0),S},l.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return n(d)},l.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(d)}})(bi,bi.exports);var rd=bi.exports,Bi=rd.Buffer,ba=Bi.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function nd(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function id(t){var e=nd(t);if(typeof e!="string"&&(Bi.isEncoding===ba||!ba(t)))throw new Error("Unknown encoding: "+t);return e||t}Ms.StringDecoder=Tr;function Tr(t){this.encoding=id(t);var e;switch(this.encoding){case"utf16le":this.text=cd,this.end=dd,e=4;break;case"utf8":this.fillLast=sd,e=4;break;case"base64":this.text=fd,this.end=hd,e=3;break;default:this.write=pd,this.end=md;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Bi.allocUnsafe(e)}Tr.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Tr.prototype.end=ud;Tr.prototype.text=ld;Tr.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Qn(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function od(t,e,r){var n=e.length-1;if(n<r)return 0;var o=Qn(e[n]);return o>=0?(o>0&&(t.lastNeed=o-1),o):--n<r||o===-2?0:(o=Qn(e[n]),o>=0?(o>0&&(t.lastNeed=o-2),o):--n<r||o===-2?0:(o=Qn(e[n]),o>=0?(o>0&&(o===2?o=0:t.lastNeed=o-3),o):0))}function ad(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function sd(t){var e=this.lastTotal-this.lastNeed,r=ad(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function ld(t,e){var r=od(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function ud(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function cd(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function dd(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function fd(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function hd(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function pd(t){return t.toString(this.encoding)}function md(t){return t&&t.length?this.write(t):""}var _a=$t,{PromisePrototypeThen:gd,SymbolAsyncIterator:ya,SymbolIterator:wa}=Se,{Buffer:bd}=Rt,{ERR_INVALID_ARG_TYPE:_d,ERR_STREAM_NULL_VALUES:yd}=Ue.codes;function wd(t,e,r){let n;if(typeof e=="string"||e instanceof bd)return new t(ur(ke({objectMode:!0},r),{read(){this.push(e),this.push(null)}}));let o;if(e&&e[ya])o=!0,n=e[ya]();else if(e&&e[wa])o=!1,n=e[wa]();else throw new _d("iterable",["Iterable"],e);let l=new t(ke({objectMode:!0,highWaterMark:1},r)),d=!1;l._read=function(){d||(d=!0,m())},l._destroy=function(S,v){gd(s(S),()=>_a.nextTick(v,S),R=>_a.nextTick(v,R||S))};function s(S){return L(this,null,function*(){let v=S!=null,R=typeof n.throw=="function";if(v&&R){let{value:_,done:C}=yield n.throw(S);if(yield _,C)return}if(typeof n.return=="function"){let{value:_}=yield n.return();yield _}})}function m(){return L(this,null,function*(){for(;;){try{let{value:S,done:v}=o?yield n.next():n.next();if(v)l.push(null);else{let R=S&&typeof S.then=="function"?yield S:S;if(R===null)throw d=!1,new yd;if(l.push(R))continue;d=!1}}catch(S){l.destroy(S)}break}})}return l}var Ls=wd,Hn,Sa;function fn(){if(Sa)return Hn;Sa=1;let t=$t,{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:l,ObjectKeys:d,ObjectSetPrototypeOf:s,Promise:m,SafeSet:S,SymbolAsyncDispose:v,SymbolAsyncIterator:R,Symbol:_}=Se;Hn=O,O.ReadableState=B;let{EventEmitter:C}=tn,{Stream:A,prependListener:P}=xi,{Buffer:F}=Rt,{addAbortSignal:V}=cn,G=Ct,k=je.debuglog("stream",p=>{k=p}),H=qc,Q=ir,{getHighWaterMark:ue,getDefaultHighWaterMark:Te}=dn,{aggregateTwoErrors:le,codes:{ERR_INVALID_ARG_TYPE:de,ERR_METHOD_NOT_IMPLEMENTED:Re,ERR_OUT_OF_RANGE:Ce,ERR_STREAM_PUSH_AFTER_EOF:X,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N},AbortError:ie}=Ue,{validateObject:Y}=vr,te=_("kPaused"),{StringDecoder:ne}=Ms,pe=Ls;s(O.prototype,A.prototype),s(O,A);let be=()=>{},{errorOrDestroy:fe}=Q,$=1,J=2,z=4,he=8,xe=16,qe=32,Ye=64,Pe=128,Je=256,wt=512,rt=1024,Le=2048,w=4096,T=8192,M=16384,a=32768,c=65536,h=1<<17,y=1<<18;function E(p){return{enumerable:!1,get(){return(this.state&p)!==0},set(g){g?this.state|=p:this.state&=~p}}}l(B.prototype,{objectMode:E($),ended:E(J),endEmitted:E(z),reading:E(he),constructed:E(xe),sync:E(qe),needReadable:E(Ye),emittedReadable:E(Pe),readableListening:E(Je),resumeScheduled:E(wt),errorEmitted:E(rt),emitClose:E(Le),autoDestroy:E(w),destroyed:E(T),closed:E(M),closeEmitted:E(a),multiAwaitDrain:E(c),readingMore:E(h),dataEmitted:E(y)});function B(p,g,j){typeof j!="boolean"&&(j=g instanceof gt()),this.state=Le|w|xe|qe,p&&p.objectMode&&(this.state|=$),j&&p&&p.readableObjectMode&&(this.state|=$),this.highWaterMark=p?ue(this,p,"readableHighWaterMark",j):Te(!1),this.buffer=new H,this.length=0,this.pipes=[],this.flowing=null,this[te]=null,p&&p.emitClose===!1&&(this.state&=~Le),p&&p.autoDestroy===!1&&(this.state&=~w),this.errored=null,this.defaultEncoding=p&&p.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,p&&p.encoding&&(this.decoder=new ne(p.encoding),this.encoding=p.encoding)}function O(p){if(!(this instanceof O))return new O(p);let g=this instanceof gt();this._readableState=new B(p,this,g),p&&(typeof p.read=="function"&&(this._read=p.read),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.construct=="function"&&(this._construct=p.construct),p.signal&&!g&&V(p.signal,this)),A.call(this,p),Q.construct(this,()=>{this._readableState.needReadable&&I(this,this._readableState)})}O.prototype.destroy=Q.destroy,O.prototype._undestroy=Q.undestroy,O.prototype._destroy=function(p,g){g(p)},O.prototype[C.captureRejectionSymbol]=function(p){this.destroy(p)},O.prototype[v]=function(){let p;return this.destroyed||(p=this.readableEnded?null:new ie,this.destroy(p)),new m((g,j)=>G(this,U=>U&&U!==p?j(U):g(null)))},O.prototype.push=function(p,g){return K(this,p,g,!1)},O.prototype.unshift=function(p,g){return K(this,p,g,!0)};function K(p,g,j,U){k("readableAddChunk",g);let W=p._readableState,Be;if(W.state&$||(typeof g=="string"?(j=j||W.defaultEncoding,W.encoding!==j&&(U&&W.encoding?g=F.from(g,j).toString(W.encoding):(g=F.from(g,j),j=""))):g instanceof F?j="":A._isUint8Array(g)?(g=A._uint8ArrayToBuffer(g),j=""):g!=null&&(Be=new de("chunk",["string","Buffer","Uint8Array"],g))),Be)fe(p,Be);else if(g===null)W.state&=~he,u(p,W);else if(W.state&$||g&&g.length>0)if(U)if(W.state&z)fe(p,new N);else{if(W.destroyed||W.errored)return!1;_e(p,W,g,!0)}else if(W.ended)fe(p,new X);else{if(W.destroyed||W.errored)return!1;W.state&=~he,W.decoder&&!j?(g=W.decoder.write(g),W.objectMode||g.length!==0?_e(p,W,g,!1):I(p,W)):_e(p,W,g,!1)}else U||(W.state&=~he,I(p,W));return!W.ended&&(W.length<W.highWaterMark||W.length===0)}function _e(p,g,j,U){g.flowing&&g.length===0&&!g.sync&&p.listenerCount("data")>0?(g.state&c?g.awaitDrainWriters.clear():g.awaitDrainWriters=null,g.dataEmitted=!0,p.emit("data",j)):(g.length+=g.objectMode?1:j.length,U?g.buffer.unshift(j):g.buffer.push(j),g.state&Ye&&f(p)),I(p,g)}O.prototype.isPaused=function(){let p=this._readableState;return p[te]===!0||p.flowing===!1},O.prototype.setEncoding=function(p){let g=new ne(p);this._readableState.decoder=g,this._readableState.encoding=this._readableState.decoder.encoding;let j=this._readableState.buffer,U="";for(let W of j)U+=g.write(W);return j.clear(),U!==""&&j.push(U),this._readableState.length=U.length,this};let re=1073741824;function me(p){if(p>re)throw new Ce("size","<= 1GiB",p);return p--,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p++,p}function i(p,g){return p<=0||g.length===0&&g.ended?0:g.state&$?1:n(p)?g.flowing&&g.length?g.buffer.first().length:g.length:p<=g.length?p:g.ended?g.length:0}O.prototype.read=function(p){k("read",p),p===void 0?p=NaN:r(p)||(p=o(p,10));let g=this._readableState,j=p;if(p>g.highWaterMark&&(g.highWaterMark=me(p)),p!==0&&(g.state&=~Pe),p===0&&g.needReadable&&((g.highWaterMark!==0?g.length>=g.highWaterMark:g.length>0)||g.ended))return k("read: emitReadable",g.length,g.ended),g.length===0&&g.ended?vn(this):f(this),null;if(p=i(p,g),p===0&&g.ended)return g.length===0&&vn(this),null;let U=(g.state&Ye)!==0;if(k("need readable",U),(g.length===0||g.length-p<g.highWaterMark)&&(U=!0,k("length less than watermark",U)),g.ended||g.reading||g.destroyed||g.errored||!g.constructed)U=!1,k("reading, ended or constructing",U);else if(U){k("do read"),g.state|=he|qe,g.length===0&&(g.state|=Ye);try{this._read(g.highWaterMark)}catch(Be){fe(this,Be)}g.state&=~qe,g.reading||(p=i(j,g))}let W;return p>0?W=Hi(p,g):W=null,W===null?(g.needReadable=g.length<=g.highWaterMark,p=0):(g.length-=p,g.multiAwaitDrain?g.awaitDrainWriters.clear():g.awaitDrainWriters=null),g.length===0&&(g.ended||(g.needReadable=!0),j!==p&&g.ended&&vn(this)),W!==null&&!g.errorEmitted&&!g.closeEmitted&&(g.dataEmitted=!0,this.emit("data",W)),W};function u(p,g){if(k("onEofChunk"),!g.ended){if(g.decoder){let j=g.decoder.end();j&&j.length&&(g.buffer.push(j),g.length+=g.objectMode?1:j.length)}g.ended=!0,g.sync?f(p):(g.needReadable=!1,g.emittedReadable=!0,b(p))}}function f(p){let g=p._readableState;k("emitReadable",g.needReadable,g.emittedReadable),g.needReadable=!1,g.emittedReadable||(k("emitReadable",g.flowing),g.emittedReadable=!0,t.nextTick(b,p))}function b(p){let g=p._readableState;k("emitReadable_",g.destroyed,g.length,g.ended),!g.destroyed&&!g.errored&&(g.length||g.ended)&&(p.emit("readable"),g.emittedReadable=!1),g.needReadable=!g.flowing&&!g.ended&&g.length<=g.highWaterMark,ye(p)}function I(p,g){!g.readingMore&&g.constructed&&(g.readingMore=!0,t.nextTick(x,p,g))}function x(p,g){for(;!g.reading&&!g.ended&&(g.length<g.highWaterMark||g.flowing&&g.length===0);){let j=g.length;if(k("maybeReadMore read 0"),p.read(0),j===g.length)break}g.readingMore=!1}O.prototype._read=function(p){throw new Re("_read()")},O.prototype.pipe=function(p,g){let j=this,U=this._readableState;U.pipes.length===1&&(U.multiAwaitDrain||(U.multiAwaitDrain=!0,U.awaitDrainWriters=new S(U.awaitDrainWriters?[U.awaitDrainWriters]:[]))),U.pipes.push(p),k("pipe count=%d opts=%j",U.pipes.length,g);let W=(!g||g.end!==!1)&&p!==t.stdout&&p!==t.stderr?Qe:lr;U.endEmitted?t.nextTick(W):j.once("end",W),p.on("unpipe",Be);function Be(xt,dt){k("onunpipe"),xt===j&&dt&&dt.hasUnpiped===!1&&(dt.hasUnpiped=!0,bl())}function Qe(){k("onend"),p.end()}let At,qi=!1;function bl(){k("cleanup"),p.removeListener("close",Cn),p.removeListener("finish",Pn),At&&p.removeListener("drain",At),p.removeListener("error",Rn),p.removeListener("unpipe",Be),j.removeListener("end",Qe),j.removeListener("end",lr),j.removeListener("data",Ji),qi=!0,At&&U.awaitDrainWriters&&(!p._writableState||p._writableState.needDrain)&&At()}function Yi(){qi||(U.pipes.length===1&&U.pipes[0]===p?(k("false write response, pause",0),U.awaitDrainWriters=p,U.multiAwaitDrain=!1):U.pipes.length>1&&U.pipes.includes(p)&&(k("false write response, pause",U.awaitDrainWriters.size),U.awaitDrainWriters.add(p)),j.pause()),At||(At=D(j,p),p.on("drain",At))}j.on("data",Ji);function Ji(xt){k("ondata");let dt=p.write(xt);k("dest.write",dt),dt===!1&&Yi()}function Rn(xt){if(k("onerror",xt),lr(),p.removeListener("error",Rn),p.listenerCount("error")===0){let dt=p._writableState||p._readableState;dt&&!dt.errorEmitted?fe(p,xt):p.emit("error",xt)}}P(p,"error",Rn);function Cn(){p.removeListener("finish",Pn),lr()}p.once("close",Cn);function Pn(){k("onfinish"),p.removeListener("close",Cn),lr()}p.once("finish",Pn);function lr(){k("unpipe"),j.unpipe(p)}return p.emit("pipe",j),p.writableNeedDrain===!0?Yi():U.flowing||(k("pipe resume"),j.resume()),p};function D(p,g){return function(){let j=p._readableState;j.awaitDrainWriters===g?(k("pipeOnDrain",1),j.awaitDrainWriters=null):j.multiAwaitDrain&&(k("pipeOnDrain",j.awaitDrainWriters.size),j.awaitDrainWriters.delete(g)),(!j.awaitDrainWriters||j.awaitDrainWriters.size===0)&&p.listenerCount("data")&&p.resume()}}O.prototype.unpipe=function(p){let g=this._readableState,j={hasUnpiped:!1};if(g.pipes.length===0)return this;if(!p){let W=g.pipes;g.pipes=[],this.pause();for(let Be=0;Be<W.length;Be++)W[Be].emit("unpipe",this,{hasUnpiped:!1});return this}let U=e(g.pipes,p);return U===-1?this:(g.pipes.splice(U,1),g.pipes.length===0&&this.pause(),p.emit("unpipe",this,j),this)},O.prototype.on=function(p,g){let j=A.prototype.on.call(this,p,g),U=this._readableState;return p==="data"?(U.readableListening=this.listenerCount("readable")>0,U.flowing!==!1&&this.resume()):p==="readable"&&!U.endEmitted&&!U.readableListening&&(U.readableListening=U.needReadable=!0,U.flowing=!1,U.emittedReadable=!1,k("on readable",U.length,U.reading),U.length?f(this):U.reading||t.nextTick(ve,this)),j},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(p,g){let j=A.prototype.removeListener.call(this,p,g);return p==="readable"&&t.nextTick(oe,this),j},O.prototype.off=O.prototype.removeListener,O.prototype.removeAllListeners=function(p){let g=A.prototype.removeAllListeners.apply(this,arguments);return(p==="readable"||p===void 0)&&t.nextTick(oe,this),g};function oe(p){let g=p._readableState;g.readableListening=p.listenerCount("readable")>0,g.resumeScheduled&&g[te]===!1?g.flowing=!0:p.listenerCount("data")>0?p.resume():g.readableListening||(g.flowing=null)}function ve(p){k("readable nexttick read 0"),p.read(0)}O.prototype.resume=function(){let p=this._readableState;return p.flowing||(k("resume"),p.flowing=!p.readableListening,ce(this,p)),p[te]=!1,this};function ce(p,g){g.resumeScheduled||(g.resumeScheduled=!0,t.nextTick(ae,p,g))}function ae(p,g){k("resume",g.reading),g.reading||p.read(0),g.resumeScheduled=!1,p.emit("resume"),ye(p),g.flowing&&!g.reading&&p.read(0)}O.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[te]=!0,this};function ye(p){let g=p._readableState;for(k("flow",g.flowing);g.flowing&&p.read()!==null;);}O.prototype.wrap=function(p){let g=!1;p.on("data",U=>{!this.push(U)&&p.pause&&(g=!0,p.pause())}),p.on("end",()=>{this.push(null)}),p.on("error",U=>{fe(this,U)}),p.on("close",()=>{this.destroy()}),p.on("destroy",()=>{this.destroy()}),this._read=()=>{g&&p.resume&&(g=!1,p.resume())};let j=d(p);for(let U=1;U<j.length;U++){let W=j[U];this[W]===void 0&&typeof p[W]=="function"&&(this[W]=p[W].bind(p))}return this},O.prototype[R]=function(){return Qi(this)},O.prototype.iterator=function(p){return p!==void 0&&Y(p,"options"),Qi(this,p)};function Qi(p,g){typeof p.read!="function"&&(p=O.wrap(p,{objectMode:!0}));let j=pl(p,g);return j.stream=p,j}function pl(p,g){return ft(this,null,function*(){let j=be;function U(Qe){this===p?(j(),j=be):j=Qe}p.on("readable",U);let W,Be=G(p,{writable:!1},Qe=>{W=Qe?le(W,Qe):null,j(),j=be});try{for(;;){let Qe=p.destroyed?null:p.read();if(Qe!==null)yield Qe;else{if(W)throw W;if(W===null)return;yield new We(new m(U))}}}catch(Qe){throw W=le(W,Qe),W}finally{(W||g?.destroyOnReturn!==!1)&&(W===void 0||p._readableState.autoDestroy)?Q.destroyer(p,null):(p.off("readable",U),Be())}})}l(O.prototype,{readable:{__proto__:null,get(){let p=this._readableState;return!!p&&p.readable!==!1&&!p.destroyed&&!p.errorEmitted&&!p.endEmitted},set(p){this._readableState&&(this._readableState.readable=!!p)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(p){this._readableState&&(this._readableState.flowing=p)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(p){this._readableState&&(this._readableState.destroyed=p)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),l(B.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[te]!==!1},set(p){this[te]=!!p}}}),O._fromList=Hi;function Hi(p,g){if(g.length===0)return null;let j;return g.objectMode?j=g.buffer.shift():!p||p>=g.length?(g.decoder?j=g.buffer.join(""):g.buffer.length===1?j=g.buffer.first():j=g.buffer.concat(g.length),g.buffer.clear()):j=g.buffer.consume(p,g.decoder),j}function vn(p){let g=p._readableState;k("endReadable",g.endEmitted),g.endEmitted||(g.ended=!0,t.nextTick(ml,g,p))}function ml(p,g){if(k("endReadableNT",p.endEmitted,p.length),!p.errored&&!p.closeEmitted&&!p.endEmitted&&p.length===0){if(p.endEmitted=!0,g.emit("end"),g.writable&&g.allowHalfOpen===!1)t.nextTick(gl,g);else if(p.autoDestroy){let j=g._writableState;(!j||j.autoDestroy&&(j.finished||j.writable===!1))&&g.destroy()}}}function gl(p){p.writable&&!p.writableEnded&&!p.destroyed&&p.end()}O.from=function(p,g){return pe(O,p,g)};let Tn;function zi(){return Tn===void 0&&(Tn={}),Tn}return O.fromWeb=function(p,g){return zi().newStreamReadableFromReadableStream(p,g)},O.toWeb=function(p,g){return zi().newReadableStreamFromStreamReadable(p,g)},O.wrap=function(p,g){var j,U;return new O(ur(ke({objectMode:(j=(U=p.readableObjectMode)!==null&&U!==void 0?U:p.objectMode)!==null&&j!==void 0?j:!0},g),{destroy(W,Be){Q.destroyer(p,W),Be(W)}})).wrap(p)},Hn}var zn,Ia;function Oi(){if(Ia)return zn;Ia=1;let t=$t,{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:l,ObjectSetPrototypeOf:d,StringPrototypeToLowerCase:s,Symbol:m,SymbolHasInstance:S}=Se;zn=Y,Y.WritableState=N;let{EventEmitter:v}=tn,R=xi.Stream,{Buffer:_}=Rt,C=ir,{addAbortSignal:A}=cn,{getHighWaterMark:P,getDefaultHighWaterMark:F}=dn,{ERR_INVALID_ARG_TYPE:V,ERR_METHOD_NOT_IMPLEMENTED:G,ERR_MULTIPLE_CALLBACK:k,ERR_STREAM_CANNOT_PIPE:H,ERR_STREAM_DESTROYED:Q,ERR_STREAM_ALREADY_FINISHED:ue,ERR_STREAM_NULL_VALUES:Te,ERR_STREAM_WRITE_AFTER_END:le,ERR_UNKNOWN_ENCODING:de}=Ue.codes,{errorOrDestroy:Re}=C;d(Y.prototype,R.prototype),d(Y,R);function Ce(){}let X=m("kOnFinished");function N(w,T,M){typeof M!="boolean"&&(M=T instanceof gt()),this.objectMode=!!(w&&w.objectMode),M&&(this.objectMode=this.objectMode||!!(w&&w.writableObjectMode)),this.highWaterMark=w?P(this,w,"writableHighWaterMark",M):F(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let a=!!(w&&w.decodeStrings===!1);this.decodeStrings=!a,this.defaultEncoding=w&&w.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=fe.bind(void 0,T),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ie(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!w||w.emitClose!==!1,this.autoDestroy=!w||w.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[X]=[]}function ie(w){w.buffered=[],w.bufferedIndex=0,w.allBuffers=!0,w.allNoop=!0}N.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},o(N.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Y(w){let T=this instanceof gt();if(!T&&!n(Y,this))return new Y(w);this._writableState=new N(w,this,T),w&&(typeof w.write=="function"&&(this._write=w.write),typeof w.writev=="function"&&(this._writev=w.writev),typeof w.destroy=="function"&&(this._destroy=w.destroy),typeof w.final=="function"&&(this._final=w.final),typeof w.construct=="function"&&(this._construct=w.construct),w.signal&&A(w.signal,this)),R.call(this,w),C.construct(this,()=>{let M=this._writableState;M.writing||he(this,M),Pe(this,M)})}o(Y,S,{__proto__:null,value:function(w){return n(this,w)?!0:this!==Y?!1:w&&w._writableState instanceof N}}),Y.prototype.pipe=function(){Re(this,new H)};function te(w,T,M,a){let c=w._writableState;if(typeof M=="function")a=M,M=c.defaultEncoding;else{if(!M)M=c.defaultEncoding;else if(M!=="buffer"&&!_.isEncoding(M))throw new de(M);typeof a!="function"&&(a=Ce)}if(T===null)throw new Te;if(!c.objectMode)if(typeof T=="string")c.decodeStrings!==!1&&(T=_.from(T,M),M="buffer");else if(T instanceof _)M="buffer";else if(R._isUint8Array(T))T=R._uint8ArrayToBuffer(T),M="buffer";else throw new V("chunk",["string","Buffer","Uint8Array"],T);let h;return c.ending?h=new le:c.destroyed&&(h=new Q("write")),h?(t.nextTick(a,h),Re(w,h,!0),h):(c.pendingcb++,ne(w,c,T,M,a))}Y.prototype.write=function(w,T,M){return te(this,w,T,M)===!0},Y.prototype.cork=function(){this._writableState.corked++},Y.prototype.uncork=function(){let w=this._writableState;w.corked&&(w.corked--,w.writing||he(this,w))},Y.prototype.setDefaultEncoding=function(w){if(typeof w=="string"&&(w=s(w)),!_.isEncoding(w))throw new de(w);return this._writableState.defaultEncoding=w,this};function ne(w,T,M,a,c){let h=T.objectMode?1:M.length;T.length+=h;let y=T.length<T.highWaterMark;return y||(T.needDrain=!0),T.writing||T.corked||T.errored||!T.constructed?(T.buffered.push({chunk:M,encoding:a,callback:c}),T.allBuffers&&a!=="buffer"&&(T.allBuffers=!1),T.allNoop&&c!==Ce&&(T.allNoop=!1)):(T.writelen=h,T.writecb=c,T.writing=!0,T.sync=!0,w._write(M,a,T.onwrite),T.sync=!1),y&&!T.errored&&!T.destroyed}function pe(w,T,M,a,c,h,y){T.writelen=a,T.writecb=y,T.writing=!0,T.sync=!0,T.destroyed?T.onwrite(new Q("write")):M?w._writev(c,T.onwrite):w._write(c,h,T.onwrite),T.sync=!1}function be(w,T,M,a){--T.pendingcb,a(M),z(T),Re(w,M)}function fe(w,T){let M=w._writableState,a=M.sync,c=M.writecb;if(typeof c!="function"){Re(w,new k);return}M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0,T?(T.stack,M.errored||(M.errored=T),w._readableState&&!w._readableState.errored&&(w._readableState.errored=T),a?t.nextTick(be,w,M,T,c):be(w,M,T,c)):(M.buffered.length>M.bufferedIndex&&he(w,M),a?M.afterWriteTickInfo!==null&&M.afterWriteTickInfo.cb===c?M.afterWriteTickInfo.count++:(M.afterWriteTickInfo={count:1,cb:c,stream:w,state:M},t.nextTick($,M.afterWriteTickInfo)):J(w,M,1,c))}function $({stream:w,state:T,count:M,cb:a}){return T.afterWriteTickInfo=null,J(w,T,M,a)}function J(w,T,M,a){for(!T.ending&&!w.destroyed&&T.length===0&&T.needDrain&&(T.needDrain=!1,w.emit("drain"));M-- >0;)T.pendingcb--,a();T.destroyed&&z(T),Pe(w,T)}function z(w){if(w.writing)return;for(let c=w.bufferedIndex;c<w.buffered.length;++c){var T;let{chunk:h,callback:y}=w.buffered[c],E=w.objectMode?1:h.length;w.length-=E,y((T=w.errored)!==null&&T!==void 0?T:new Q("write"))}let M=w[X].splice(0);for(let c=0;c<M.length;c++){var a;M[c]((a=w.errored)!==null&&a!==void 0?a:new Q("end"))}ie(w)}function he(w,T){if(T.corked||T.bufferProcessing||T.destroyed||!T.constructed)return;let{buffered:M,bufferedIndex:a,objectMode:c}=T,h=M.length-a;if(!h)return;let y=a;if(T.bufferProcessing=!0,h>1&&w._writev){T.pendingcb-=h-1;let E=T.allNoop?Ce:O=>{for(let K=y;K<M.length;++K)M[K].callback(O)},B=T.allNoop&&y===0?M:e(M,y);B.allBuffers=T.allBuffers,pe(w,T,!0,T.length,B,"",E),ie(T)}else{do{let{chunk:E,encoding:B,callback:O}=M[y];M[y++]=null;let K=c?1:E.length;pe(w,T,!1,K,E,B,O)}while(y<M.length&&!T.writing);y===M.length?ie(T):y>256?(M.splice(0,y),T.bufferedIndex=0):T.bufferedIndex=y}T.bufferProcessing=!1}Y.prototype._write=function(w,T,M){if(this._writev)this._writev([{chunk:w,encoding:T}],M);else throw new G("_write()")},Y.prototype._writev=null,Y.prototype.end=function(w,T,M){let a=this._writableState;typeof w=="function"?(M=w,w=null,T=null):typeof T=="function"&&(M=T,T=null);let c;if(w!=null){let h=te(this,w,T);h instanceof r&&(c=h)}return a.corked&&(a.corked=1,this.uncork()),c||(!a.errored&&!a.ending?(a.ending=!0,Pe(this,a,!0),a.ended=!0):a.finished?c=new ue("end"):a.destroyed&&(c=new Q("end"))),typeof M=="function"&&(c||a.finished?t.nextTick(M,c):a[X].push(M)),this};function xe(w){return w.ending&&!w.destroyed&&w.constructed&&w.length===0&&!w.errored&&w.buffered.length===0&&!w.finished&&!w.writing&&!w.errorEmitted&&!w.closeEmitted}function qe(w,T){let M=!1;function a(c){if(M){Re(w,c??k());return}if(M=!0,T.pendingcb--,c){let h=T[X].splice(0);for(let y=0;y<h.length;y++)h[y](c);Re(w,c,T.sync)}else xe(T)&&(T.prefinished=!0,w.emit("prefinish"),T.pendingcb++,t.nextTick(Je,w,T))}T.sync=!0,T.pendingcb++;try{w._final(a)}catch(c){a(c)}T.sync=!1}function Ye(w,T){!T.prefinished&&!T.finalCalled&&(typeof w._final=="function"&&!T.destroyed?(T.finalCalled=!0,qe(w,T)):(T.prefinished=!0,w.emit("prefinish")))}function Pe(w,T,M){xe(T)&&(Ye(w,T),T.pendingcb===0&&(M?(T.pendingcb++,t.nextTick((a,c)=>{xe(c)?Je(a,c):c.pendingcb--},w,T)):xe(T)&&(T.pendingcb++,Je(w,T))))}function Je(w,T){T.pendingcb--,T.finished=!0;let M=T[X].splice(0);for(let a=0;a<M.length;a++)M[a]();if(w.emit("finish"),T.autoDestroy){let a=w._readableState;(!a||a.autoDestroy&&(a.endEmitted||a.readable===!1))&&w.destroy()}}l(Y.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(w){this._writableState&&(this._writableState.destroyed=w)}},writable:{__proto__:null,get(){let w=this._writableState;return!!w&&w.writable!==!1&&!w.destroyed&&!w.errored&&!w.ending&&!w.ended},set(w){this._writableState&&(this._writableState.writable=!!w)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let w=this._writableState;return w?!w.destroyed&&!w.ending&&w.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});let wt=C.destroy;Y.prototype.destroy=function(w,T){let M=this._writableState;return!M.destroyed&&(M.bufferedIndex<M.buffered.length||M[X].length)&&t.nextTick(z,M),wt.call(this,w,T),this},Y.prototype._undestroy=C.undestroy,Y.prototype._destroy=function(w,T){T(w)},Y.prototype[v.captureRejectionSymbol]=function(w){this.destroy(w)};let rt;function Le(){return rt===void 0&&(rt={}),rt}return Y.fromWeb=function(w,T){return Le().newStreamWritableFromWritableStream(w,T)},Y.toWeb=function(w){return Le().newWritableStreamFromStreamWritable(w)},zn}var qn,Ea;function Sd(){if(Ea)return qn;Ea=1;let t=$t,e=Rt,{isReadable:r,isWritable:n,isIterable:o,isNodeStream:l,isReadableNodeStream:d,isWritableNodeStream:s,isDuplexNodeStream:m,isReadableStream:S,isWritableStream:v}=yt,R=Ct,{AbortError:_,codes:{ERR_INVALID_ARG_TYPE:C,ERR_INVALID_RETURN_VALUE:A}}=Ue,{destroyer:P}=ir,F=gt(),V=fn(),G=Oi(),{createDeferredPromise:k}=je,H=Ls,Q=globalThis.Blob||e.Blob,ue=typeof Q<"u"?function(X){return X instanceof Q}:function(X){return!1},Te=globalThis.AbortController||Sr().AbortController,{FunctionPrototypeCall:le}=Se;class de extends F{constructor(N){super(N),N?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),N?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}qn=function X(N,ie){if(m(N))return N;if(d(N))return Ce({readable:N});if(s(N))return Ce({writable:N});if(l(N))return Ce({writable:!1,readable:!1});if(S(N))return Ce({readable:V.fromWeb(N)});if(v(N))return Ce({writable:G.fromWeb(N)});if(typeof N=="function"){let{value:te,write:ne,final:pe,destroy:be}=Re(N);if(o(te))return H(de,te,{objectMode:!0,write:ne,final:pe,destroy:be});let fe=te?.then;if(typeof fe=="function"){let $,J=le(fe,te,z=>{if(z!=null)throw new A("nully","body",z)},z=>{P($,z)});return $=new de({objectMode:!0,readable:!1,write:ne,final(z){pe(()=>L(this,null,function*(){try{yield J,t.nextTick(z,null)}catch(he){t.nextTick(z,he)}}))},destroy:be})}throw new A("Iterable, AsyncIterable or AsyncFunction",ie,te)}if(ue(N))return X(N.arrayBuffer());if(o(N))return H(de,N,{objectMode:!0,writable:!1});if(S(N?.readable)&&v(N?.writable))return de.fromWeb(N);if(typeof N?.writable=="object"||typeof N?.readable=="object"){let te=N!=null&&N.readable?d(N?.readable)?N?.readable:X(N.readable):void 0,ne=N!=null&&N.writable?s(N?.writable)?N?.writable:X(N.writable):void 0;return Ce({readable:te,writable:ne})}let Y=N?.then;if(typeof Y=="function"){let te;return le(Y,N,ne=>{ne!=null&&te.push(ne),te.push(null)},ne=>{P(te,ne)}),te=new de({objectMode:!0,writable:!1,read(){}})}throw new C(ie,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],N)};function Re(X){let{promise:N,resolve:ie}=k(),Y=new Te,te=Y.signal;return{value:X(function(){return ft(this,null,function*(){for(;;){let ne=N;N=null;let{chunk:pe,done:be,cb:fe}=yield new We(ne);if(t.nextTick(fe),be)return;if(te.aborted)throw new _(void 0,{cause:te.reason});({promise:N,resolve:ie}=k()),yield pe}})}(),{signal:te}),write(ne,pe,be){let fe=ie;ie=null,fe({chunk:ne,done:!1,cb:be})},final(ne){let pe=ie;ie=null,pe({done:!0,cb:ne})},destroy(ne,pe){Y.abort(),pe(ne)}}}function Ce(X){let N=X.readable&&typeof X.readable.read!="function"?V.wrap(X.readable):X.readable,ie=X.writable,Y=!!r(N),te=!!n(ie),ne,pe,be,fe,$;function J(z){let he=fe;fe=null,he?he(z):z&&$.destroy(z)}return $=new de({readableObjectMode:!!(N!=null&&N.readableObjectMode),writableObjectMode:!!(ie!=null&&ie.writableObjectMode),readable:Y,writable:te}),te&&(R(ie,z=>{te=!1,z&&P(N,z),J(z)}),$._write=function(z,he,xe){ie.write(z,he)?xe():ne=xe},$._final=function(z){ie.end(),pe=z},ie.on("drain",function(){if(ne){let z=ne;ne=null,z()}}),ie.on("finish",function(){if(pe){let z=pe;pe=null,z()}})),Y&&(R(N,z=>{Y=!1,z&&P(N,z),J(z)}),N.on("readable",function(){if(be){let z=be;be=null,z()}}),N.on("end",function(){$.push(null)}),$._read=function(){for(;;){let z=N.read();if(z===null){be=$._read;return}if(!$.push(z))return}}),$._destroy=function(z,he){!z&&fe!==null&&(z=new _),be=null,ne=null,pe=null,fe===null?he(z):(fe=he,P(ie,z),P(N,z))},$}return qn}var Yn,va;function gt(){if(va)return Yn;va=1;let{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=Se;Yn=d;let o=fn(),l=Oi();n(d.prototype,o.prototype),n(d,o);{let v=r(l.prototype);for(let R=0;R<v.length;R++){let _=v[R];d.prototype[_]||(d.prototype[_]=l.prototype[_])}}function d(v){if(!(this instanceof d))return new d(v);o.call(this,v),l.call(this,v),v?(this.allowHalfOpen=v.allowHalfOpen!==!1,v.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),v.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(d.prototype,{writable:ke({__proto__:null},e(l.prototype,"writable")),writableHighWaterMark:ke({__proto__:null},e(l.prototype,"writableHighWaterMark")),writableObjectMode:ke({__proto__:null},e(l.prototype,"writableObjectMode")),writableBuffer:ke({__proto__:null},e(l.prototype,"writableBuffer")),writableLength:ke({__proto__:null},e(l.prototype,"writableLength")),writableFinished:ke({__proto__:null},e(l.prototype,"writableFinished")),writableCorked:ke({__proto__:null},e(l.prototype,"writableCorked")),writableEnded:ke({__proto__:null},e(l.prototype,"writableEnded")),writableNeedDrain:ke({__proto__:null},e(l.prototype,"writableNeedDrain")),destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(v){this._readableState&&this._writableState&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}}});let s;function m(){return s===void 0&&(s={}),s}d.fromWeb=function(v,R){return m().newStreamDuplexFromReadableWritablePair(v,R)},d.toWeb=function(v){return m().newReadableWritablePairFromDuplex(v)};let S;return d.from=function(v){return S||(S=Sd()),S(v,"body")},Yn}var{ObjectSetPrototypeOf:Ds,Symbol:Id}=Se,Ns=bt,{ERR_METHOD_NOT_IMPLEMENTED:Ed}=Ue.codes,Fi=gt(),{getHighWaterMark:vd}=dn;Ds(bt.prototype,Fi.prototype);Ds(bt,Fi);var br=Id("kCallback");function bt(t){if(!(this instanceof bt))return new bt(t);let e=t?vd(this,t,"readableHighWaterMark",!0):null;e===0&&(t=ur(ke({},t),{highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0})),Fi.call(this,t),this._readableState.sync=!1,this[br]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Td)}function _i(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Td(){this._final!==_i&&_i.call(this)}bt.prototype._final=_i;bt.prototype._transform=function(t,e,r){throw new Ed("_transform()")};bt.prototype._write=function(t,e,r){let n=this._readableState,o=this._writableState,l=n.length;this._transform(t,e,(d,s)=>{if(d){r(d);return}s!=null&&this.push(s),o.ended||l===n.length||n.length<n.highWaterMark?r():this[br]=r})};bt.prototype._read=function(){if(this[br]){let t=this[br];this[br]=null,t()}};var{ObjectSetPrototypeOf:Us}=Se,Ws=rr,ki=Ns;Us(rr.prototype,ki.prototype);Us(rr,ki);function rr(t){if(!(this instanceof rr))return new rr(t);ki.call(this,t)}rr.prototype._transform=function(t,e,r){r(null,t)};var gr=$t,{ArrayIsArray:Rd,Promise:Cd,SymbolAsyncIterator:Pd,SymbolDispose:Ad}=Se,Jr=Ct,{once:xd}=je,Bd=ir,Ta=gt(),{aggregateTwoErrors:Od,codes:{ERR_INVALID_ARG_TYPE:yi,ERR_INVALID_RETURN_VALUE:Jn,ERR_MISSING_ARGS:Fd,ERR_STREAM_DESTROYED:kd,ERR_STREAM_PREMATURE_CLOSE:Md},AbortError:jd}=Ue,{validateFunction:Ld,validateAbortSignal:Dd}=vr,{isIterable:Mt,isReadable:Kn,isReadableNodeStream:Gr,isNodeStream:Ra,isTransformStream:Jt,isWebStream:Nd,isReadableStream:Zn,isReadableFinished:Ud}=yt,Wd=globalThis.AbortController||Sr().AbortController,Xn,ei,ti;function Ca(t,e,r){let n=!1;t.on("close",()=>{n=!0});let o=Jr(t,{readable:e,writable:r},l=>{n=!l});return{destroy:l=>{n||(n=!0,Bd.destroyer(t,l||new kd("pipe")))},cleanup:o}}function Gd(t){return Ld(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function ri(t){if(Mt(t))return t;if(Gr(t))return $d(t);throw new yi("val",["Readable","Iterable","AsyncIterable"],t)}function $d(t){return ft(this,null,function*(){ei||(ei=fn()),yield*nt(ei.prototype[Pd].call(t))})}function Lr(o,l,d,s){return L(this,arguments,function*(t,e,r,{end:n}){let m,S=null,v=V=>{if(V&&(m=V),S){let G=S;S=null,G()}},R=()=>new Cd((V,G)=>{m?G(m):S=()=>{m?G(m):V()}});e.on("drain",v);let _=Jr(e,{readable:!1},v);try{e.writableNeedDrain&&(yield R());try{for(var C=Ge(t),A,P,F;A=!(P=yield C.next()).done;A=!1){let V=P.value;e.write(V)||(yield R())}}catch{F=[P]}finally{try{A&&(P=C.return)&&(yield P.call(C))}finally{if(F)throw F[0]}}n&&(e.end(),yield R()),r()}catch(V){r(m!==V?Od(m,V):V)}finally{_(),e.off("drain",v)}})}function ni(o,l,d,s){return L(this,arguments,function*(t,e,r,{end:n}){Jt(e)&&(e=e.writable);let m=e.getWriter();try{try{for(var S=Ge(t),v,R,_;v=!(R=yield S.next()).done;v=!1){let C=R.value;yield m.ready,m.write(C).catch(()=>{})}}catch{_=[R]}finally{try{v&&(R=S.return)&&(yield R.call(S))}finally{if(_)throw _[0]}}yield m.ready,n&&(yield m.close()),r()}catch(C){try{yield m.abort(C),r(C)}catch(A){r(A)}}})}function Vd(...t){return Gs(t,xd(Gd(t)))}function Gs(t,e,r){if(t.length===1&&Rd(t[0])&&(t=t[0]),t.length<2)throw new Fd("streams");let n=new Wd,o=n.signal,l=r?.signal,d=[];Dd(l,"options.signal");function s(){A(new jd)}ti=ti||je.addAbortListener;let m;l&&(m=ti(l,s));let S,v,R=[],_=0;function C(G){A(G,--_===0)}function A(G,k){var H;if(G&&(!S||S.code==="ERR_STREAM_PREMATURE_CLOSE")&&(S=G),!(!S&&!k)){for(;R.length;)R.shift()(S);(H=m)===null||H===void 0||H[Ad](),n.abort(),k&&(S||d.forEach(Q=>Q()),gr.nextTick(e,S,v))}}let P;for(let G=0;G<t.length;G++){let k=t[G],H=G<t.length-1,Q=G>0,ue=H||r?.end!==!1,Te=G===t.length-1;if(Ra(k)){let le=function(de){de&&de.name!=="AbortError"&&de.code!=="ERR_STREAM_PREMATURE_CLOSE"&&C(de)};if(ue){let{destroy:de,cleanup:Re}=Ca(k,H,Q);R.push(de),Kn(k)&&Te&&d.push(Re)}k.on("error",le),Kn(k)&&Te&&d.push(()=>{k.removeListener("error",le)})}if(G===0)if(typeof k=="function"){if(P=k({signal:o}),!Mt(P))throw new Jn("Iterable, AsyncIterable or Stream","source",P)}else Mt(k)||Gr(k)||Jt(k)?P=k:P=Ta.from(k);else if(typeof k=="function"){if(Jt(P)){var F;P=ri((F=P)===null||F===void 0?void 0:F.readable)}else P=ri(P);if(P=k(P,{signal:o}),H){if(!Mt(P,!0))throw new Jn("AsyncIterable",`transform[${G-1}]`,P)}else{var V;Xn||(Xn=Ws);let le=new Xn({objectMode:!0}),de=(V=P)===null||V===void 0?void 0:V.then;if(typeof de=="function")_++,de.call(P,X=>{v=X,X!=null&&le.write(X),ue&&le.end(),gr.nextTick(C)},X=>{le.destroy(X),gr.nextTick(C,X)});else if(Mt(P,!0))_++,Lr(P,le,C,{end:ue});else if(Zn(P)||Jt(P)){let X=P.readable||P;_++,Lr(X,le,C,{end:ue})}else throw new Jn("AsyncIterable or Promise","destination",P);P=le;let{destroy:Re,cleanup:Ce}=Ca(P,!1,!0);R.push(Re),Te&&d.push(Ce)}}else if(Ra(k)){if(Gr(P)){_+=2;let le=Qd(P,k,C,{end:ue});Kn(k)&&Te&&d.push(le)}else if(Jt(P)||Zn(P)){let le=P.readable||P;_++,Lr(le,k,C,{end:ue})}else if(Mt(P))_++,Lr(P,k,C,{end:ue});else throw new yi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],P);P=k}else if(Nd(k)){if(Gr(P))_++,ni(ri(P),k,C,{end:ue});else if(Zn(P)||Mt(P))_++,ni(P,k,C,{end:ue});else if(Jt(P))_++,ni(P.readable,k,C,{end:ue});else throw new yi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],P);P=k}else P=Ta.from(k)}return(o!=null&&o.aborted||l!=null&&l.aborted)&&gr.nextTick(s),P}function Qd(t,e,r,{end:n}){let o=!1;if(e.on("close",()=>{o||r(new Md)}),t.pipe(e,{end:!1}),n){let l=function(){o=!0,e.end()};Ud(t)?gr.nextTick(l):t.once("end",l)}else r();return Jr(t,{readable:!0,writable:!1},l=>{let d=t._readableState;l&&l.code==="ERR_STREAM_PREMATURE_CLOSE"&&d&&d.ended&&!d.errored&&!d.errorEmitted?t.once("end",r).once("error",r):r(l)}),Jr(e,{readable:!1,writable:!0},r)}var Mi={pipelineImpl:Gs,pipeline:Vd},{pipeline:Hd}=Mi,Dr=gt(),{destroyer:zd}=ir,{isNodeStream:Nr,isReadable:Pa,isWritable:Aa,isWebStream:ii,isTransformStream:kt,isWritableStream:xa,isReadableStream:Ba}=yt,{AbortError:qd,codes:{ERR_INVALID_ARG_VALUE:Oa,ERR_MISSING_ARGS:Yd}}=Ue,Jd=Ct,$s=function(...t){if(t.length===0)throw new Yd("streams");if(t.length===1)return Dr.from(t[0]);let e=[...t];if(typeof t[0]=="function"&&(t[0]=Dr.from(t[0])),typeof t[t.length-1]=="function"){let _=t.length-1;t[_]=Dr.from(t[_])}for(let _=0;_<t.length;++_)if(!(!Nr(t[_])&&!ii(t[_]))){if(_<t.length-1&&!(Pa(t[_])||Ba(t[_])||kt(t[_])))throw new Oa(`streams[${_}]`,e[_],"must be readable");if(_>0&&!(Aa(t[_])||xa(t[_])||kt(t[_])))throw new Oa(`streams[${_}]`,e[_],"must be writable")}let r,n,o,l,d;function s(_){let C=l;l=null,C?C(_):_?d.destroy(_):!R&&!v&&d.destroy()}let m=t[0],S=Hd(t,s),v=!!(Aa(m)||xa(m)||kt(m)),R=!!(Pa(S)||Ba(S)||kt(S));if(d=new Dr({writableObjectMode:!!(m!=null&&m.writableObjectMode),readableObjectMode:!!(S!=null&&S.readableObjectMode),writable:v,readable:R}),v){if(Nr(m))d._write=function(C,A,P){m.write(C,A)?P():r=P},d._final=function(C){m.end(),n=C},m.on("drain",function(){if(r){let C=r;r=null,C()}});else if(ii(m)){let C=(kt(m)?m.writable:m).getWriter();d._write=function(A,P,F){return L(this,null,function*(){try{yield C.ready,C.write(A).catch(()=>{}),F()}catch(V){F(V)}})},d._final=function(A){return L(this,null,function*(){try{yield C.ready,C.close().catch(()=>{}),n=A}catch(P){A(P)}})}}let _=kt(S)?S.readable:S;Jd(_,()=>{if(n){let C=n;n=null,C()}})}if(R){if(Nr(S))S.on("readable",function(){if(o){let _=o;o=null,_()}}),S.on("end",function(){d.push(null)}),d._read=function(){for(;;){let _=S.read();if(_===null){o=d._read;return}if(!d.push(_))return}};else if(ii(S)){let _=(kt(S)?S.readable:S).getReader();d._read=function(){return L(this,null,function*(){for(;;)try{let{value:C,done:A}=yield _.read();if(!d.push(C))return;if(A){d.push(null);return}}catch{return}})}}}return d._destroy=function(_,C){!_&&l!==null&&(_=new qd),o=null,r=null,n=null,l===null?C(_):(l=C,Nr(S)&&zd(S,_))},d},Kd=globalThis.AbortController||Sr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Zd,ERR_INVALID_ARG_TYPE:Rr,ERR_MISSING_ARGS:Xd,ERR_OUT_OF_RANGE:ef},AbortError:ut}=Ue,{validateAbortSignal:Qt,validateInteger:Fa,validateObject:Ht}=vr,tf=Se.Symbol("kWeak"),rf=Se.Symbol("kResistStopPropagation"),{finished:nf}=Ct,of=$s,{addAbortSignalNoValidate:af}=cn,{isWritable:sf,isNodeStream:lf}=yt,{deprecate:uf}=je,{ArrayPrototypePush:cf,Boolean:df,MathFloor:ka,Number:ff,NumberIsNaN:hf,Promise:Ma,PromiseReject:ja,PromiseResolve:pf,PromisePrototypeThen:La,Symbol:Vs}=Se,Kr=Vs("kEmpty"),Da=Vs("kEof");function mf(t,e){if(e!=null&&Ht(e,"options"),e?.signal!=null&&Qt(e.signal,"options.signal"),lf(t)&&!sf(t))throw new Zd("stream",t,"must be writable");let r=of(this,t);return e!=null&&e.signal&&af(e.signal,r),r}function hn(t,e){if(typeof t!="function")throw new Rr("fn",["Function","AsyncFunction"],t);e!=null&&Ht(e,"options"),e?.signal!=null&&Qt(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=ka(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=ka(e.highWaterMark)),Fa(r,"options.concurrency",1),Fa(n,"options.highWaterMark",0),n+=r,(function(){return ft(this,null,function*(){let o=je.AbortSignalAny([e?.signal].filter(df)),l=this,d=[],s={signal:o},m,S,v=!1,R=0;function _(){v=!0,C()}function C(){R-=1,A()}function A(){S&&!v&&R<r&&d.length<n&&(S(),S=null)}function P(){return L(this,null,function*(){try{try{for(var F=Ge(l),V,G,k;V=!(G=yield F.next()).done;V=!1){let H=G.value;if(v)return;if(o.aborted)throw new ut;try{if(H=t(H,s),H===Kr)continue;H=pf(H)}catch(Q){H=ja(Q)}R+=1,La(H,C,_),d.push(H),m&&(m(),m=null),!v&&(d.length>=n||R>=r)&&(yield new Ma(Q=>{S=Q}))}}catch{k=[G]}finally{try{V&&(G=F.return)&&(yield G.call(F))}finally{if(k)throw k[0]}}d.push(Da)}catch(H){let Q=ja(H);La(Q,C,_),d.push(Q)}finally{v=!0,m&&(m(),m=null)}})}P();try{for(;;){for(;d.length>0;){let F=yield new We(d[0]);if(F===Da)return;if(o.aborted)throw new ut;F!==Kr&&(yield F),d.shift(),A()}yield new We(new Ma(F=>{m=F}))}}finally{v=!0,S&&(S(),S=null)}})}).call(this)}function gf(t=void 0){return t!=null&&Ht(t,"options"),t?.signal!=null&&Qt(t.signal,"options.signal"),(function(){return ft(this,null,function*(){let e=0;try{for(var n=Ge(this),o,l,d;o=!(l=yield new We(n.next())).done;o=!1){let s=l.value;var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ut({cause:t.signal.reason});yield[e++,s]}}catch{d=[l]}finally{try{o&&(l=n.return)&&(yield new We(l.call(n)))}finally{if(d)throw d[0]}}})}).call(this)}function Qs(t,e=void 0){return L(this,null,function*(){try{for(var r=Ge(ji.call(this,t,e)),n,o,l;n=!(o=yield r.next()).done;n=!1){let d=o.value;return!0}}catch{l=[o]}finally{try{n&&(o=r.return)&&(yield o.call(r))}finally{if(l)throw l[0]}}return!1})}function bf(t,e=void 0){return L(this,null,function*(){if(typeof t!="function")throw new Rr("fn",["Function","AsyncFunction"],t);return!(yield Qs.call(this,(...r)=>L(this,null,function*(){return!(yield t(...r))}),e))})}function _f(t,e){return L(this,null,function*(){try{for(var r=Ge(ji.call(this,t,e)),n,o,l;n=!(o=yield r.next()).done;n=!1){let d=o.value;return d}}catch{l=[o]}finally{try{n&&(o=r.return)&&(yield o.call(r))}finally{if(l)throw l[0]}}})}function yf(t,e){return L(this,null,function*(){if(typeof t!="function")throw new Rr("fn",["Function","AsyncFunction"],t);function r(s,m){return L(this,null,function*(){return yield t(s,m),Kr})}try{for(var n=Ge(hn.call(this,r,e)),o,l,d;o=!(l=yield n.next()).done;o=!1){let s=l.value;;}}catch{d=[l]}finally{try{o&&(l=n.return)&&(yield l.call(n))}finally{if(d)throw d[0]}}})}function ji(t,e){if(typeof t!="function")throw new Rr("fn",["Function","AsyncFunction"],t);function r(n,o){return L(this,null,function*(){return(yield t(n,o))?n:Kr})}return hn.call(this,r,e)}var wi=class extends Xd{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};function wf(n,o,l){return L(this,arguments,function*(t,e,r){var d;if(typeof t!="function")throw new Rr("reducer",["Function","AsyncFunction"],t);r!=null&&Ht(r,"options"),r?.signal!=null&&Qt(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(d=r.signal)!==null&&d!==void 0&&d.aborted){let F=new ut(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),yield nf(this.destroy(F)),F}let m=new Kd,S=m.signal;if(r!=null&&r.signal){let F={once:!0,[tf]:this,[rf]:!0};r.signal.addEventListener("abort",()=>m.abort(),F)}let v=!1;try{try{for(var _=Ge(this),C,A,P;C=!(A=yield _.next()).done;C=!1){let F=A.value;var R;if(v=!0,r!=null&&(R=r.signal)!==null&&R!==void 0&&R.aborted)throw new ut;s?e=yield t(e,F,{signal:S}):(e=F,s=!0)}}catch{P=[A]}finally{try{C&&(A=_.return)&&(yield A.call(_))}finally{if(P)throw P[0]}}if(!v&&!s)throw new wi}finally{m.abort()}return e})}function Sf(t){return L(this,null,function*(){t!=null&&Ht(t,"options"),t?.signal!=null&&Qt(t.signal,"options.signal");let e=[];try{for(var n=Ge(this),o,l,d;o=!(l=yield n.next()).done;o=!1){let s=l.value;var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ut(void 0,{cause:t.signal.reason});cf(e,s)}}catch{d=[l]}finally{try{o&&(l=n.return)&&(yield l.call(n))}finally{if(d)throw d[0]}}return e})}function If(t,e){let r=hn.call(this,t,e);return(function(){return ft(this,null,function*(){try{for(var n=Ge(r),o,l,d;o=!(l=yield new We(n.next())).done;o=!1){let s=l.value;yield*nt(s)}}catch{d=[l]}finally{try{o&&(l=n.return)&&(yield new We(l.call(n)))}finally{if(d)throw d[0]}}})}).call(this)}function Hs(t){if(t=ff(t),hf(t))return 0;if(t<0)throw new ef("number",">= 0",t);return t}function Ef(t,e=void 0){return e!=null&&Ht(e,"options"),e?.signal!=null&&Qt(e.signal,"options.signal"),t=Hs(t),(function(){return ft(this,null,function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ut;try{for(var o=Ge(this),l,d,s;l=!(d=yield new We(o.next())).done;l=!1){let m=d.value;var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ut;t--<=0&&(yield m)}}catch{s=[d]}finally{try{l&&(d=o.return)&&(yield new We(d.call(o)))}finally{if(s)throw s[0]}}})}).call(this)}function vf(t,e=void 0){return e!=null&&Ht(e,"options"),e?.signal!=null&&Qt(e.signal,"options.signal"),t=Hs(t),(function(){return ft(this,null,function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ut;try{for(var o=Ge(this),l,d,s;l=!(d=yield new We(o.next())).done;l=!1){let m=d.value;var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ut;if(t-- >0&&(yield m),t<=0)return}}catch{s=[d]}finally{try{l&&(d=o.return)&&(yield new We(d.call(o)))}finally{if(s)throw s[0]}}})}).call(this)}Ti.streamReturningOperators={asIndexedPairs:uf(gf,"readable.asIndexedPairs will be removed in a future version."),drop:Ef,filter:ji,flatMap:If,map:hn,take:vf,compose:mf};Ti.promiseReturningOperators={every:bf,forEach:yf,reduce:wf,toArray:Sf,some:Qs,find:_f};var oi,Na;function zs(){if(Na)return oi;Na=1;let{ArrayPrototypePop:t,Promise:e}=Se,{isIterable:r,isNodeStream:n,isWebStream:o}=yt,{pipelineImpl:l}=Mi,{finished:d}=Ct;qs();function s(...m){return new e((S,v)=>{let R,_,C=m[m.length-1];if(C&&typeof C=="object"&&!n(C)&&!r(C)&&!o(C)){let A=t(m);R=A.signal,_=A.end}l(m,(A,P)=>{A?v(A):S(P)},{signal:R,end:_})})}return oi={finished:d,pipeline:s},oi}var Ua;function qs(){if(Ua)return Un.exports;Ua=1;let{Buffer:t}=Rt,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=Se,{promisify:{custom:o}}=je,{streamReturningOperators:l,promiseReturningOperators:d}=Ti,{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=Ue,m=$s,{setDefaultHighWaterMark:S,getDefaultHighWaterMark:v}=dn,{pipeline:R}=Mi,{destroyer:_}=ir,C=Ct,A=zs(),P=yt,F=Un.exports=xi.Stream;F.isDestroyed=P.isDestroyed,F.isDisturbed=P.isDisturbed,F.isErrored=P.isErrored,F.isReadable=P.isReadable,F.isWritable=P.isWritable,F.Readable=fn();for(let G of r(l)){let k=function(...Q){if(new.target)throw s();return F.Readable.from(n(H,this,Q))},H=l[G];e(k,"name",{__proto__:null,value:H.name}),e(k,"length",{__proto__:null,value:H.length}),e(F.Readable.prototype,G,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(let G of r(d)){let k=function(...Q){if(new.target)throw s();return n(H,this,Q)},H=d[G];e(k,"name",{__proto__:null,value:H.name}),e(k,"length",{__proto__:null,value:H.length}),e(F.Readable.prototype,G,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}F.Writable=Oi(),F.Duplex=gt(),F.Transform=Ns,F.PassThrough=Ws,F.pipeline=R;let{addAbortSignal:V}=cn;return F.addAbortSignal=V,F.finished=C,F.destroy=_,F.compose=m,F.setDefaultHighWaterMark=S,F.getDefaultHighWaterMark=v,e(F,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return A}}),e(R,o,{__proto__:null,enumerable:!0,get(){return A.pipeline}}),e(C,o,{__proto__:null,enumerable:!0,get(){return A.finished}}),F.Stream=F,F._isUint8Array=function(G){return G instanceof Uint8Array},F._uint8ArrayToBuffer=function(G){return t.from(G.buffer,G.byteOffset,G.byteLength)},Un.exports}(function(t){let e=qs(),r=zs(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})($a);var pn=$a.exports,Zr=class{constructor(e,r){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!r&&e&&!e[0]&&(r=e,e=null),r=r||{},this._factory=r.factory||Wt,e&&this.addQuads(e)}_termFromId(e,r){if(e[0]==="."){let n=this._entities,o=e.split(".");return this._factory.quad(this._termFromId(n[o[1]]),this._termFromId(n[o[2]]),this._termFromId(n[o[3]]),o[4]&&this._termFromId(n[o[4]]))}return Kt(e,r)}_termToNumericId(e){if(e.termType==="Quad"){let r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),o=this._termToNumericId(e.object),l;return r&&n&&o&&(wr(e.graph)||(l=this._termToNumericId(e.graph)))&&this._ids[l?`.${r}.${n}.${o}.${l}`:`.${r}.${n}.${o}`]}return this._ids[Ne(e)]}_termToNewNumericId(e){let r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${wr(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Ne(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}get size(){let e=this._size;if(e!==null)return e;e=0;let r=this._graphs,n,o;for(let l in r)for(let d in n=r[l].subjects)for(let s in o=n[d])e+=Object.keys(o[s]).length;return this._size=e}_addToIndex(e,r,n,o){let l=e[r]||(e[r]={}),d=l[n]||(l[n]={}),s=o in d;return s||(d[o]=null),!s}_removeFromIndex(e,r,n,o){let l=e[r],d=l[n];delete d[o];for(let s in d)return;delete l[n];for(let s in l)return;delete e[r]}*_findInIndex(e,r,n,o,l,d,s,m){let S,v,R,_=this._entities,C=this._termFromId(m,this._factory),A={subject:null,predicate:null,object:null};r&&((S=e,e={})[r]=S[r]);for(let P in e)if(v=e[P]){A[l]=this._termFromId(_[P],this._factory),n&&((S=v,v={})[n]=S[n]);for(let F in v)if(R=v[F]){A[d]=this._termFromId(_[F],this._factory);let V=o?o in R?[o]:[]:Object.keys(R);for(let G=0;G<V.length;G++)A[s]=this._termFromId(_[V[G]],this._factory),yield this._factory.quad(A.subject,A.predicate,A.object,C)}}}_loop(e,r){for(let n in e)r(n)}_loopByKey0(e,r,n){let o,l;if(o=e[r])for(l in o)n(l)}_loopByKey1(e,r,n){let o,l;for(o in e)l=e[o],l[r]&&n(o)}_loopBy2Keys(e,r,n,o){let l,d,s;if((l=e[r])&&(d=l[n]))for(s in d)o(s)}_countInIndex(e,r,n,o){let l=0,d,s,m;r&&((d=e,e={})[r]=d[r]);for(let S in e)if(s=e[S]){n&&((d=s,s={})[n]=d[n]);for(let v in s)(m=s[v])&&(o?o in m&&l++:l+=Object.keys(m).length)}return l}_getGraphs(e){if(!Tf(e))return this._graphs;let r={};return r[e]=this._graphs[e],r}_uniqueEntities(e){let r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,o){r||(o=e.graph,n=e.object,r=e.predicate,e=e.subject),o=Ne(o);let l=this._graphs[o];l||(l=this._graphs[o]={subjects:{},predicates:{},objects:{}},Object.freeze(l)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n);let d=this._addToIndex(l.subjects,e,r,n);return this._addToIndex(l.predicates,r,n,e),this._addToIndex(l.objects,n,e,r),this._size=null,d}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,o){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:o}=e),!this.readQuads(e,r,n,o).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,o){r||(o=e.graph,n=e.object,r=e.predicate,e=e.subject),o=Ne(o);let l=this._graphs,d,s,m;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(d=l[o])||!(s=d.subjects[e])||!(m=s[r])||!(n in m))return!1;this._removeFromIndex(d.subjects,e,r,n),this._removeFromIndex(d.predicates,r,n,e),this._removeFromIndex(d.objects,n,e,r),this._size!==null&&this._size--;for(e in d.subjects)return!0;return delete l[o],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,o){let l=new pn.Readable({objectMode:!0});return l._read=()=>{for(let d of this.readQuads(e,r,n,o))l.push(d);l.push(null)},this.remove(l)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,o){return[...this.readQuads(e,r,n,o)]}*readQuads(e,r,n,o){o=o&&Ne(o);let l=this._getGraphs(o),d,s,m,S;if(!(e&&!(s=this._termToNumericId(e))||r&&!(m=this._termToNumericId(r))||n&&!(S=this._termToNumericId(n))))for(let v in l)(d=l[v])&&(s?S?yield*nt(this._findInIndex(d.objects,S,s,m,"object","subject","predicate",v)):yield*nt(this._findInIndex(d.subjects,s,m,null,"subject","predicate","object",v)):m?yield*nt(this._findInIndex(d.predicates,m,S,null,"predicate","object","subject",v)):S?yield*nt(this._findInIndex(d.objects,S,null,null,"object","subject","predicate",v)):yield*nt(this._findInIndex(d.subjects,null,null,null,"subject","predicate","object",v)))}match(e,r,n,o){return new Si(this,e,r,n,o)}countQuads(e,r,n,o){o=o&&Ne(o);let l=this._getGraphs(o),d=0,s,m,S,v;if(e&&!(m=this._termToNumericId(e))||r&&!(S=this._termToNumericId(r))||n&&!(v=this._termToNumericId(n)))return 0;for(let R in l)(s=l[R])&&(e?n?d+=this._countInIndex(s.objects,v,m,S):d+=this._countInIndex(s.subjects,m,S,v):r?d+=this._countInIndex(s.predicates,S,v,m):d+=this._countInIndex(s.objects,v,m,S));return d}forEach(e,r,n,o,l){this.some(d=>(e(d),!1),r,n,o,l)}every(e,r,n,o,l){let d=!1,s=!this.some(m=>(d=!0,!e(m)),r,n,o,l);return d&&s}some(e,r,n,o,l){for(let d of this.readQuads(r,n,o,l))if(e(d))return!0;return!1}getSubjects(e,r,n){let o=[];return this.forSubjects(l=>{o.push(l)},e,r,n),o}forSubjects(e,r,n,o){o=o&&Ne(o);let l=this._getGraphs(o),d,s,m;if(e=this._uniqueEntities(e),!(r&&!(s=this._termToNumericId(r))||n&&!(m=this._termToNumericId(n))))for(o in l)(d=l[o])&&(s?m?this._loopBy2Keys(d.predicates,s,m,e):this._loopByKey1(d.subjects,s,e):m?this._loopByKey0(d.objects,m,e):this._loop(d.subjects,e))}getPredicates(e,r,n){let o=[];return this.forPredicates(l=>{o.push(l)},e,r,n),o}forPredicates(e,r,n,o){o=o&&Ne(o);let l=this._getGraphs(o),d,s,m;if(e=this._uniqueEntities(e),!(r&&!(s=this._termToNumericId(r))||n&&!(m=this._termToNumericId(n))))for(o in l)(d=l[o])&&(s?m?this._loopBy2Keys(d.objects,m,s,e):this._loopByKey0(d.subjects,s,e):m?this._loopByKey1(d.predicates,m,e):this._loop(d.predicates,e))}getObjects(e,r,n){let o=[];return this.forObjects(l=>{o.push(l)},e,r,n),o}forObjects(e,r,n,o){o=o&&Ne(o);let l=this._getGraphs(o),d,s,m;if(e=this._uniqueEntities(e),!(r&&!(s=this._termToNumericId(r))||n&&!(m=this._termToNumericId(n))))for(o in l)(d=l[o])&&(s?m?this._loopBy2Keys(d.subjects,s,m,e):this._loopByKey1(d.objects,s,e):m?this._loopByKey0(d.predicates,m,e):this._loop(d.objects,e))}getGraphs(e,r,n){let o=[];return this.forGraphs(l=>{o.push(l)},e,r,n),o}forGraphs(e,r,n,o){for(let l in this._graphs)this.some(d=>(e(d.graph),!0),r,n,o,l)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){let n={},o=r?()=>!0:(s,m)=>{throw new Error(`${s.value} ${m}`)},l=this.getQuads(null,Oe.rdf.rest,Oe.rdf.nil,null),d=e?[...l]:[];return l.forEach(s=>{let m=[],S=!1,v,R,_=s.graph,C=s.subject;for(;C&&!S;){let A=this.getQuads(null,null,C,null),P=this.getQuads(C,null,null,null),F,V=null,G=null,k=null;for(let H=0;H<P.length&&!S;H++)F=P[H],F.graph.equals(_)?v?S=o(C,"has non-list arcs out"):F.predicate.value===Oe.rdf.first?V?S=o(C,"has multiple rdf:first arcs"):d.push(V=F):F.predicate.value===Oe.rdf.rest?G?S=o(C,"has multiple rdf:rest arcs"):d.push(G=F):A.length?S=o(C,"can't be subject and object"):(v=F,R="subject"):S=o(C,"not confined to single graph");for(let H=0;H<A.length&&!S;++H)F=A[H],v?S=o(C,"can't have coreferences"):F.predicate.value===Oe.rdf.rest?k?S=o(C,"has incoming rdf:rest arcs"):k=F:(v=F,R="object");V?m.unshift(V.object):S=o(C,"has no list head"),C=k&&k.subject}S?e=!1:v&&(n[v[R].value]=m)}),e&&this.removeQuads(d),n}*[Symbol.iterator](){yield*nt(this.readQuads())}};function Tf(t){return typeof t=="string"||t instanceof String}var Si=class t extends pn.Readable{constructor(e,r,n,o,l){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:o,graph:l})}get filtered(){if(!this._filtered){let{n3Store:e,graph:r,object:n,predicate:o,subject:l}=this,d=this._filtered=new Zr({factory:e._factory});for(let s of e.readQuads(l,o,n,r))d.addQuad(s)}return this._filtered}get size(){return this.filtered.size}_read(){for(let e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,o){return new t(this.filtered,e,r,n,o)}*[Symbol.iterator](){yield*nt(this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph))}},Ii=class extends pn.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;let r=new yr(e),n,o;r.parse({on:(l,d)=>{switch(l){case"data":n=d;break;case"end":o=d;break}}},(l,d)=>{l&&this.emit("error",l)||d&&this.push(d)},(l,d)=>{this.emit("prefix",l,d)}),this._transform=(l,d,s)=>{n(l),s()},this._flush=l=>{o(),l()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}},Ei=class extends pn.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});let r=this._writer=new qr({write:(n,o,l)=>{this.push(n),l&&l()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,o,l)=>{r.addQuad(n,l)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}};function mn(t){let e=[],r=[t],n=0;for(;r.length;){let o=r.pop();switch(typeof o){case"boolean":n+=4;break;case"string":n+=o.length*2;break;case"number":n+=8;break;case"object":if(!e.includes(o)){e.push(o);for(let l in o)Object.prototype.hasOwnProperty.call(o,l)&&r.push(o[l])}break}}return n}function gn(t,e=!1,r=1){let n=e?1e3:1024;if(Math.abs(t)<n)return t+" B";let o=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],l=-1,d=10**r;do t/=n,++l;while(Math.round(Math.abs(t)*d)/d>=n&&l<o.length-1);return t.toFixed(r)+" "+o[l]}var bn=class{constructor(){this._idMap={},this._typeMap={},this._properties={}}buildIDMap(e){return L(this,null,function*(){this._idMap={},this._typeMap={};let r=[];return this._streamer=e,e.onPropertiesStreamed.add(n=>L(this,null,function*(){for(let o of Object.keys(n.data)){let l=n.data[parseInt(o)];this._properties[parseInt(o)]=l;let d=this._buildUUID(l);r.push(d),this._idMap[l.expressID]=yield d,l.type!==void 0&&(this._typeMap[l.expressID]=l.type)}})),new Promise(n=>{e.onProgress.add(o=>L(this,null,function*(){o%.1===0&&this._logStatus(o),o===1&&(this._logStatus(1),yield Promise.all(r),n([this._idMap,this._typeMap,this._properties]))}))})})}dispose(){this._streamer?.dispose()}_buildUUID(e){return L(this,null,function*(){let r=e.GlobalId?.value;return r===void 0&&(console.error("No GlobalId!"),console.info(e)),yield vt(r)})}_logStatus(e){let r=e*100,n=mn(this._idMap),o=mn(this._typeMap),l=mn(this._properties),d=Object.keys(this._properties).length;console.info(`Property processing ${r} %. idMap: ${gn(n)}, typeMap: ${gn(o)}, properties: ${gn(l)} (${d} entities)`)}};var or=class{constructor(){this.ifcStreamingSettings=new vo,this.propertiesStreamingSettings=new Li,this.namespace="https://web-bim/resources/",this.filePrefix="",this.makeSpacesTransparent=!0,this.makeOpeningsInvisible=!0,this.includeLBDTriples=!0,this.lbdParserSettings=new Di}},Li=class extends Ro{constructor(){super(...arguments),this.limitTypesTo=new Set}},Di=class{constructor(){this.namespace="https://web-bim/resources/",this.enabledParsers={products:!1,fso:!1,bot:!0},this.subSettings={products:new Ni,fso:new Ui,bot:new Wi},this.fileName="lbd.ttl"}},Ni=class{constructor(){this.includeParents=!0}},Ui=class{constructor(){this.includePorts=!1}};var Wi=class{constructor(){this.includeInterfaces=!1}};var Gi={children:[{children:[{children:[{name:"IfcProject",id:103090709},{name:"IfcProjectLibrary",id:653396225}],name:"IfcContext",id:3419103109},{children:[{children:[{name:"IfcOccupant",id:4143007308}],name:"IfcActor",id:2296667514},{children:[{name:"IfcActionRequest",id:3821786052},{name:"IfcCostItem",id:3895139033},{name:"IfcCostSchedule",id:1419761937},{name:"IfcPerformanceHistory",id:2382730787},{name:"IfcPermit",id:3327091369},{name:"IfcProjectOrder",id:2904328755},{name:"IfcWorkCalendar",id:4088093105},{children:[{name:"IfcWorkPlan",id:4218914973},{name:"IfcWorkSchedule",id:3342526732}],name:"IfcWorkControl",id:1028945134}],name:"IfcControl",id:3293443760},{children:[{name:"IfcAsset",id:3460190687},{name:"IfcInventory",id:2391368822},{children:[{name:"IfcStructuralLoadCase",id:385403989}],name:"IfcStructuralLoadGroup",id:1252848954},{name:"IfcStructuralResultGroup",id:2986769608},{children:[{name:"IfcBuildingSystem",id:1177604601},{children:[{name:"IfcDistributionCircuit",id:562808652}],name:"IfcDistributionSystem",id:3205830791},{name:"IfcStructuralAnalysisModel",id:2515109513},{name:"IfcZone",id:1033361043}],name:"IfcSystem",id:2254336722}],name:"IfcGroup",id:2706460486},{children:[{name:"IfcEvent",id:4148101412},{name:"IfcProcedure",id:2744685151},{name:"IfcTask",id:3473067441}],name:"IfcProcess",id:2945172077},{children:[{name:"IfcAnnotation",id:1674181508},{children:[{children:[{children:[{name:"IfcBeamStandardCase",id:2906023776}],name:"IfcBeam",id:753842376},{name:"IfcBuildingElementProxy",id:1095909175},{name:"IfcChimney",id:3296154744},{children:[{name:"IfcColumnStandardCase",id:905975707}],name:"IfcColumn",id:843113511},{name:"IfcCovering",id:1973544240},{name:"IfcCurtainWall",id:3495092785},{children:[{name:"IfcDoorStandardCase",id:3242481149}],name:"IfcDoor",id:395920057},{name:"IfcFooting",id:900683007},{children:[{name:"IfcMemberStandardCase",id:1911478936}],name:"IfcMember",id:1073191201},{name:"IfcPile",id:1687234759},{children:[{name:"IfcPlateStandardCase",id:1156407060}],name:"IfcPlate",id:3171933400},{name:"IfcRailing",id:2262370178},{name:"IfcRamp",id:3024970846},{name:"IfcRampFlight",id:3283111854},{name:"IfcRoof",id:2016517767},{name:"IfcShadingDevice",id:1329646415},{children:[{name:"IfcSlabElementedCase",id:3127900445},{name:"IfcSlabStandardCase",id:3027962421}],name:"IfcSlab",id:1529196076},{name:"IfcStair",id:331165859},{name:"IfcStairFlight",id:4252922144},{children:[{name:"IfcWallElementedCase",id:4156078855},{name:"IfcWallStandardCase",id:3512223829}],name:"IfcWall",id:2391406946},{children:[{name:"IfcWindowStandardCase",id:486154966}],name:"IfcWindow",id:3304561284}],name:"IfcBuildingElement",id:3299480353},{name:"IfcCivilElement",id:1677625105},{children:[{children:[{name:"IfcActuator",id:4288193352},{name:"IfcAlarm",id:3087945054},{name:"IfcController",id:25142252},{name:"IfcFlowInstrument",id:182646315},{name:"IfcProtectiveDeviceTrippingUnit",id:2295281155},{name:"IfcSensor",id:4086658281},{name:"IfcUnitaryControlElement",id:630975310}],name:"IfcDistributionControlElement",id:1062813311},{children:[{name:"IfcDistributionChamberElement",id:1052013943},{children:[{name:"IfcAirToAirHeatRecovery",id:2056796094},{name:"IfcBoiler",id:32344328},{name:"IfcBurner",id:2938176219},{name:"IfcChiller",id:3902619387},{name:"IfcCoil",id:639361253},{name:"IfcCondenser",id:2272882330},{name:"IfcCooledBeam",id:4136498852},{name:"IfcCoolingTower",id:3640358203},{name:"IfcElectricGenerator",id:264262732},{name:"IfcElectricMotor",id:402227799},{name:"IfcEngine",id:2814081492},{name:"IfcEvaporativeCooler",id:3747195512},{name:"IfcEvaporator",id:484807127},{name:"IfcHeatExchanger",id:3319311131},{name:"IfcHumidifier",id:2068733104},{name:"IfcMotorConnection",id:2474470126},{name:"IfcSolarDevice",id:3420628829},{name:"IfcTransformer",id:3825984169},{name:"IfcTubeBundle",id:3026737570},{name:"IfcUnitaryEquipment",id:4292641817}],name:"IfcEnergyConversionDevice",id:1658829314},{children:[{name:"IfcAirTerminalBox",id:177149247},{name:"IfcDamper",id:4074379575},{name:"IfcElectricDistributionBoard",id:862014818},{name:"IfcElectricTimeControl",id:1003880860},{name:"IfcFlowMeter",id:2188021234},{name:"IfcProtectiveDevice",id:738039164},{name:"IfcSwitchingDevice",id:1162798199},{name:"IfcValve",id:4207607924}],name:"IfcFlowController",id:2058353004},{children:[{name:"IfcCableCarrierFitting",id:635142910},{name:"IfcCableFitting",id:1051757585},{name:"IfcDuctFitting",id:342316401},{name:"IfcJunctionBox",id:2176052936},{name:"IfcPipeFitting",id:310824031}],name:"IfcFlowFitting",id:4278956645},{children:[{name:"IfcCompressor",id:3571504051},{name:"IfcFan",id:3415622556},{name:"IfcPump",id:90941305}],name:"IfcFlowMovingDevice",id:3132237377},{children:[{name:"IfcCableCarrierSegment",id:3758799889},{name:"IfcCableSegment",id:4217484030},{name:"IfcDuctSegment",id:3518393246},{name:"IfcPipeSegment",id:3612865200}],name:"IfcFlowSegment",id:987401354},{children:[{name:"IfcElectricFlowStorageDevice",id:3310460725},{name:"IfcTank",id:812556717}],name:"IfcFlowStorageDevice",id:707683696},{children:[{name:"IfcAirTerminal",id:1634111441},{name:"IfcAudioVisualAppliance",id:277319702},{name:"IfcCommunicationsAppliance",id:3221913625},{name:"IfcElectricAppliance",id:1904799276},{name:"IfcFireSuppressionTerminal",id:1426591983},{name:"IfcLamp",id:76236018},{name:"IfcLightFixture",id:629592764},{name:"IfcMedicalDevice",id:1437502449},{name:"IfcOutlet",id:3694346114},{name:"IfcSanitaryTerminal",id:3053780830},{name:"IfcSpaceHeater",id:1999602285},{name:"IfcStackTerminal",id:1404847402},{name:"IfcWasteTerminal",id:4237592921}],name:"IfcFlowTerminal",id:2223149337},{children:[{name:"IfcDuctSilencer",id:1360408905},{name:"IfcFilter",id:819412036},{name:"IfcInterceptor",id:4175244083}],name:"IfcFlowTreatmentDevice",id:3508470533}],name:"IfcDistributionFlowElement",id:3040386961}],name:"IfcDistributionElement",id:1945004755},{name:"IfcElementAssembly",id:4123344466},{children:[{name:"IfcBuildingElementPart",id:2979338954},{name:"IfcDiscreteAccessory",id:1335981549},{name:"IfcFastener",id:647756555},{name:"IfcMechanicalFastener",id:377706215},{children:[{name:"IfcReinforcingBar",id:979691226},{name:"IfcReinforcingMesh",id:2320036040},{name:"IfcTendon",id:3824725483},{name:"IfcTendonAnchor",id:2347447852}],name:"IfcReinforcingElement",id:3027567501},{name:"IfcVibrationIsolator",id:2391383451}],name:"IfcElementComponent",id:1623761950},{children:[{children:[{name:"IfcProjectionElement",id:3651124850}],name:"IfcFeatureElementAddition",id:2143335405},{children:[{children:[{name:"IfcOpeningStandardCase",id:3079942009}],name:"IfcOpeningElement",id:3588315303},{name:"IfcVoidingFeature",id:926996030}],name:"IfcFeatureElementSubtraction",id:1287392070},{name:"IfcSurfaceFeature",id:3101698114}],name:"IfcFeatureElement",id:2827207264},{children:[{name:"IfcFurniture",id:1509553395},{name:"IfcSystemFurnitureElement",id:413509423}],name:"IfcFurnishingElement",id:263784265},{name:"IfcGeographicElement",id:3493046030},{name:"IfcTransportElement",id:1620046519},{name:"IfcVirtualElement",id:2769231204}],name:"IfcElement",id:1758889154},{name:"IfcGrid",id:3009204131},{children:[{name:"IfcDistributionPort",id:3041715199}],name:"IfcPort",id:3740093272},{name:"IfcProxy",id:3219374653},{children:[{children:[{name:"IfcExternalSpatialElement",id:1209101575}],name:"IfcExternalSpatialStructureElement",id:2853485674},{children:[{name:"IfcBuilding",id:4031249490},{name:"IfcBuildingStorey",id:3124254112},{name:"IfcSite",id:4097777520},{name:"IfcSpace",id:3856911033}],name:"IfcSpatialStructureElement",id:2706606064},{name:"IfcSpatialZone",id:463610769}],name:"IfcSpatialElement",id:1412071761},{children:[{children:[{children:[{name:"IfcStructuralLinearAction",id:1807405624}],name:"IfcStructuralCurveAction",id:1004757350},{name:"IfcStructuralPointAction",id:2082059205},{children:[{name:"IfcStructuralPlanarAction",id:1621171031}],name:"IfcStructuralSurfaceAction",id:3657597509}],name:"IfcStructuralAction",id:682877961},{children:[{name:"IfcStructuralCurveReaction",id:2757150158},{name:"IfcStructuralPointReaction",id:1235345126},{name:"IfcStructuralSurfaceReaction",id:603775116}],name:"IfcStructuralReaction",id:3689010777}],name:"IfcStructuralActivity",id:3544373492},{children:[{children:[{name:"IfcStructuralCurveConnection",id:4243806635},{name:"IfcStructuralPointConnection",id:734778138},{name:"IfcStructuralSurfaceConnection",id:1975003073}],name:"IfcStructuralConnection",id:1179482911},{children:[{children:[{name:"IfcStructuralCurveMemberVarying",id:2445595289}],name:"IfcStructuralCurveMember",id:214636428},{children:[{name:"IfcStructuralSurfaceMemberVarying",id:2218152070}],name:"IfcStructuralSurfaceMember",id:3979015343}],name:"IfcStructuralMember",id:530289379}],name:"IfcStructuralItem",id:3136571912}],name:"IfcProduct",id:4208778838},{children:[{children:[{name:"IfcConstructionEquipmentResource",id:3898045240},{name:"IfcConstructionMaterialResource",id:1060000209},{name:"IfcConstructionProductResource",id:488727124},{name:"IfcCrewResource",id:3295246426},{name:"IfcLaborResource",id:3827777499},{name:"IfcSubContractResource",id:148013059}],name:"IfcConstructionResource",id:2559216714}],name:"IfcResource",id:2914609552}],name:"IfcObject",id:3888040117},{children:[{children:[{name:"IfcEventType",id:4024345920},{name:"IfcProcedureType",id:569719735},{name:"IfcTaskType",id:3206491090}],name:"IfcTypeProcess",id:3736923433},{children:[{name:"IfcDoorStyle",id:526551008},{children:[{children:[{name:"IfcBeamType",id:819618141},{name:"IfcBuildingElementProxyType",id:1909888760},{name:"IfcChimneyType",id:2197970202},{name:"IfcColumnType",id:300633059},{name:"IfcCoveringType",id:1916426348},{name:"IfcCurtainWallType",id:1457835157},{name:"IfcDoorType",id:2323601079},{name:"IfcFootingType",id:1893162501},{name:"IfcMemberType",id:3181161470},{name:"IfcPileType",id:1158309216},{name:"IfcPlateType",id:4017108033},{name:"IfcRailingType",id:2893384427},{name:"IfcRampFlightType",id:2324767716},{name:"IfcRampType",id:1469900589},{name:"IfcRoofType",id:2781568857},{name:"IfcShadingDeviceType",id:4074543187},{name:"IfcSlabType",id:2533589738},{name:"IfcStairFlightType",id:1039846685},{name:"IfcStairType",id:338393293},{name:"IfcWallType",id:1898987631},{name:"IfcWindowType",id:4009809668}],name:"IfcBuildingElementType",id:1950629157},{name:"IfcCivilElementType",id:3893394355},{children:[{children:[{name:"IfcActuatorType",id:2874132201},{name:"IfcAlarmType",id:3001207471},{name:"IfcControllerType",id:578613899},{name:"IfcFlowInstrumentType",id:4037862832},{name:"IfcProtectiveDeviceTrippingUnitType",id:655969474},{name:"IfcSensorType",id:1783015770},{name:"IfcUnitaryControlElementType",id:3179687236}],name:"IfcDistributionControlElementType",id:2063403501},{children:[{name:"IfcDistributionChamberElementType",id:1599208980},{children:[{name:"IfcAirToAirHeatRecoveryType",id:1871374353},{name:"IfcBoilerType",id:231477066},{name:"IfcBurnerType",id:2188180465},{name:"IfcChillerType",id:2951183804},{name:"IfcCoilType",id:2301859152},{name:"IfcCondenserType",id:2816379211},{name:"IfcCooledBeamType",id:335055490},{name:"IfcCoolingTowerType",id:2954562838},{name:"IfcElectricGeneratorType",id:1534661035},{name:"IfcElectricMotorType",id:1217240411},{name:"IfcEngineType",id:132023988},{name:"IfcEvaporativeCoolerType",id:3174744832},{name:"IfcEvaporatorType",id:3390157468},{name:"IfcHeatExchangerType",id:1251058090},{name:"IfcHumidifierType",id:1806887404},{name:"IfcMotorConnectionType",id:977012517},{name:"IfcSolarDeviceType",id:1072016465},{name:"IfcTransformerType",id:1692211062},{name:"IfcTubeBundleType",id:1600972822},{name:"IfcUnitaryEquipmentType",id:1911125066}],name:"IfcEnergyConversionDeviceType",id:2107101300},{children:[{name:"IfcAirTerminalBoxType",id:1411407467},{name:"IfcDamperType",id:3961806047},{name:"IfcElectricDistributionBoardType",id:2417008758},{name:"IfcElectricTimeControlType",id:712377611},{name:"IfcFlowMeterType",id:3815607619},{name:"IfcProtectiveDeviceType",id:1842657554},{name:"IfcSwitchingDeviceType",id:2315554128},{name:"IfcValveType",id:728799441}],name:"IfcFlowControllerType",id:3907093117},{children:[{name:"IfcCableCarrierFittingType",id:395041908},{name:"IfcCableFittingType",id:2674252688},{name:"IfcDuctFittingType",id:869906466},{name:"IfcJunctionBoxType",id:4288270099},{name:"IfcPipeFittingType",id:804291784}],name:"IfcFlowFittingType",id:3198132628},{children:[{name:"IfcCompressorType",id:3850581409},{name:"IfcFanType",id:346874300},{name:"IfcPumpType",id:2250791053}],name:"IfcFlowMovingDeviceType",id:1482959167},{children:[{name:"IfcCableCarrierSegmentType",id:3293546465},{name:"IfcCableSegmentType",id:1285652485},{name:"IfcDuctSegmentType",id:3760055223},{name:"IfcPipeSegmentType",id:4231323485}],name:"IfcFlowSegmentType",id:1834744321},{children:[{name:"IfcElectricFlowStorageDeviceType",id:3277789161},{name:"IfcTankType",id:5716631}],name:"IfcFlowStorageDeviceType",id:1339347760},{children:[{name:"IfcAirTerminalType",id:3352864051},{name:"IfcAudioVisualApplianceType",id:1532957894},{name:"IfcCommunicationsApplianceType",id:400855858},{name:"IfcElectricApplianceType",id:663422040},{name:"IfcFireSuppressionTerminalType",id:4222183408},{name:"IfcLampType",id:1051575348},{name:"IfcLightFixtureType",id:1161773419},{name:"IfcMedicalDeviceType",id:1114901282},{name:"IfcOutletType",id:2837617999},{name:"IfcSanitaryTerminalType",id:1768891740},{name:"IfcSpaceHeaterType",id:1305183839},{name:"IfcStackTerminalType",id:3112655638},{name:"IfcWasteTerminalType",id:1133259667}],name:"IfcFlowTerminalType",id:2297155007},{children:[{name:"IfcDuctSilencerType",id:2030761528},{name:"IfcFilterType",id:1810631287},{name:"IfcInterceptorType",id:3946677679}],name:"IfcFlowTreatmentDeviceType",id:3009222698}],name:"IfcDistributionFlowElementType",id:3849074793}],name:"IfcDistributionElementType",id:3256556792},{name:"IfcElementAssemblyType",id:2397081782},{children:[{name:"IfcBuildingElementPartType",id:39481116},{name:"IfcDiscreteAccessoryType",id:2635815018},{name:"IfcFastenerType",id:2489546625},{name:"IfcMechanicalFastenerType",id:2108223431},{children:[{name:"IfcReinforcingBarType",id:2572171363},{name:"IfcReinforcingMeshType",id:2310774935},{name:"IfcTendonAnchorType",id:3081323446},{name:"IfcTendonType",id:2415094496}],name:"IfcReinforcingElementType",id:964333572},{name:"IfcVibrationIsolatorType",id:3313531582}],name:"IfcElementComponentType",id:2590856083},{children:[{name:"IfcFurnitureType",id:1268542332},{name:"IfcSystemFurnitureElementType",id:1580310250}],name:"IfcFurnishingElementType",id:4238390223},{name:"IfcGeographicElementType",id:4095422895},{name:"IfcTransportElementType",id:2097647324}],name:"IfcElementType",id:339256511},{children:[{children:[{name:"IfcSpaceType",id:3812236995}],name:"IfcSpatialStructureElementType",id:3893378262},{name:"IfcSpatialZoneType",id:2481509218}],name:"IfcSpatialElementType",id:710998568},{name:"IfcWindowStyle",id:1299126871}],name:"IfcTypeProduct",id:2347495698},{children:[{children:[{name:"IfcConstructionEquipmentResourceType",id:2185764099},{name:"IfcConstructionMaterialResourceType",id:4105962743},{name:"IfcConstructionProductResourceType",id:1525564444},{name:"IfcCrewResourceType",id:1815067380},{name:"IfcLaborResourceType",id:428585644},{name:"IfcSubContractResourceType",id:4095615324}],name:"IfcConstructionResourceType",id:2574617495}],name:"IfcTypeResource",id:3698973494}],name:"IfcTypeObject",id:1628702193}],name:"IfcObjectDefinition",id:219451334},{children:[{children:[{children:[{name:"IfcDoorLiningProperties",id:2963535650},{name:"IfcDoorPanelProperties",id:1714330368},{name:"IfcPermeableCoveringProperties",id:3566463478},{name:"IfcReinforcementDefinitionProperties",id:3765753017},{name:"IfcWindowLiningProperties",id:336235671},{name:"IfcWindowPanelProperties",id:512836454}],name:"IfcPreDefinedPropertySet",id:3967405729},{name:"IfcPropertySet",id:1451395588},{children:[{name:"IfcElementQuantity",id:1883228015}],name:"IfcQuantitySet",id:2090586900}],name:"IfcPropertySetDefinition",id:3357820518},{children:[{name:"IfcPropertySetTemplate",id:492091185},{children:[{name:"IfcComplexPropertyTemplate",id:3875453745},{name:"IfcSimplePropertyTemplate",id:3663146110}],name:"IfcPropertyTemplate",id:3521284610}],name:"IfcPropertyTemplateDefinition",id:1482703590}],name:"IfcPropertyDefinition",id:1680319473},{children:[{children:[{name:"IfcRelAssignsToActor",id:1683148259},{name:"IfcRelAssignsToControl",id:2495723537},{children:[{name:"IfcRelAssignsToGroupByFactor",id:1027710054}],name:"IfcRelAssignsToGroup",id:1307041759},{name:"IfcRelAssignsToProcess",id:4278684876},{name:"IfcRelAssignsToProduct",id:2857406711},{name:"IfcRelAssignsToResource",id:205026976}],name:"IfcRelAssigns",id:3939117080},{children:[{name:"IfcRelAssociatesApproval",id:4095574036},{name:"IfcRelAssociatesClassification",id:919958153},{name:"IfcRelAssociatesConstraint",id:2728634034},{name:"IfcRelAssociatesDocument",id:982818633},{name:"IfcRelAssociatesLibrary",id:3840914261},{name:"IfcRelAssociatesMaterial",id:2655215786}],name:"IfcRelAssociates",id:1865459582},{children:[{children:[{name:"IfcRelConnectsPathElements",id:3945020480},{name:"IfcRelConnectsWithRealizingElements",id:3678494232}],name:"IfcRelConnectsElements",id:1204542856},{name:"IfcRelConnectsPortToElement",id:4201705270},{name:"IfcRelConnectsPorts",id:3190031847},{name:"IfcRelConnectsStructuralActivity",id:2127690289},{children:[{name:"IfcRelConnectsWithEccentricity",id:504942748}],name:"IfcRelConnectsStructuralMember",id:1638771189},{name:"IfcRelContainedInSpatialStructure",id:3242617779},{name:"IfcRelCoversBldgElements",id:886880790},{name:"IfcRelCoversSpaces",id:2802773753},{name:"IfcRelFillsElement",id:3940055652},{name:"IfcRelFlowControlElements",id:279856033},{name:"IfcRelInterferesElements",id:427948657},{name:"IfcRelReferencedInSpatialStructure",id:1245217292},{name:"IfcRelSequence",id:4122056220},{name:"IfcRelServicesBuildings",id:366585022},{children:[{children:[{name:"IfcRelSpaceBoundary2ndLevel",id:1521410863}],name:"IfcRelSpaceBoundary1stLevel",id:3523091289}],name:"IfcRelSpaceBoundary",id:3451746338}],name:"IfcRelConnects",id:826625072},{name:"IfcRelDeclares",id:2565941209},{children:[{name:"IfcRelAggregates",id:160246688},{name:"IfcRelNests",id:3268803585},{name:"IfcRelProjectsElement",id:750771296},{name:"IfcRelVoidsElement",id:1401173127}],name:"IfcRelDecomposes",id:2551354335},{children:[{name:"IfcRelDefinesByObject",id:1462361463},{name:"IfcRelDefinesByProperties",id:4186316022},{name:"IfcRelDefinesByTemplate",id:307848117},{name:"IfcRelDefinesByType",id:781010003}],name:"IfcRelDefines",id:693640335}],name:"IfcRelationship",id:478536968}],name:"IfcRoot",id:2341007311};function Ys(t,e,r=!1){return L(this,null,function*(){return new Promise(n=>{let o=Ve(e),l=Object.values(t).filter(d=>o.includes(d.type)).map(d=>r?d:d.expressID);n(l)})})}function Ve(t){let e=[],r=n(Gi,t);return r&&o(r,e),e;function n(l,d){if(l.id==d)return l;if(l.children!=null){let s,m=null;for(s=0;m==null&&s<l.children.length;s++)m=n(l.children[s],d);return m}return null}function o(l,d=[]){if(d.push(l.id),l.children)for(let s=0;s<l.children.length;s++)o(l.children[s],d)}}function Js(t,e){let r=Ks(Gi,t);if(e===void 0)return r;let n=r.indexOf(e);return r.slice(n)}function Ks(t,e,r=[]){if(t.id===e)return[...r,t.id];if(t.children)for(let n of t.children){let o=Ks(n,e,[...r,t.id]);if(o.length>0)return o}return[]}function Zs(t){return L(this,null,function*(){return new Promise(e=>{let r={};Object.values(t).forEach(n=>{n.RelatingPort?.value!==void 0&&n.RelatedPort?.value!==void 0&&(r[n.RelatingPort.value]=n.RelatedPort.value)}),e(r)})})}function Xs(t){return L(this,null,function*(){return new Promise(e=>{let r={};Object.values(t).forEach(n=>{n.RelatingPort?.value!==void 0&&n.RelatedElement?.value!==void 0&&(r[n.RelatingPort.value]=n.RelatedElement.value)}),Object.values(t).forEach(n=>{n.RelatedObjects?.value!==void 0&&n.RelatingObject?.value!==void 0&&n.RelatedObjects.forEach(o=>{r[o.value]=n.RelatingObject.value})}),e(r)})})}var el={2254336722:["fso:DistributionSystem"],3740093272:["fso:Port"],987401354:["fso:Segment","fso:Component"],4278956645:["fso:Fitting","fso:Component"],2058353004:["fso:FlowController","fso:Component"],1658829314:["fso:EnergyConversionDevice","fso:Component"],3132237377:["fso:FlowMovingDevice","fso:Component"],707683696:["fso:StorageDevice","fso:Component"],2223149337:["fso:Terminal","fso:Component"],3508470533:["fso:TreatmentDevice","fso:Component"]};function tl(t){return L(this,null,function*(){return new Promise(e=>{let r=Object.keys(el),n={};Object.values(t).filter(o=>o.type!==void 0).filter(o=>r.includes(o.type.toString())).forEach(o=>{n[o.expressID]=el[o.type]}),e(n)})})}function rl(t){return L(this,null,function*(){return new Promise(e=>{let r={};Object.values(t).filter(n=>n.type===dr).filter(n=>n.RelatingGroup!==void 0&&n.RelatedObjects!==void 0).forEach(n=>{let o=n.RelatingGroup.value;n.RelatedObjects.forEach(l=>{let d=l.value;Object.keys(r).includes(o.toString())?r[o].push(d):r[o]=[d]})}),e(r)})})}function ge(t,e){let r=e[t];if(r===void 0)throw new Error(`ExpressId ${t} not in idMap`);return`inst:${r}`}var{DataFactory:Rf}=tt,{namedNode:Z}=Rf,_n="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",yn=class{constructor(e,r,n,o){this._writer=e,this._properties=r,this._idMap=n,this._settings=o,this._tripleCount=0}full(){return L(this,null,function*(){return this._tripleCount=0,yield Promise.all([this.getSites(),this.getBuildings(),this.getStoreys(),this.getSpaces(),this.getElements(),this.getSpaceAdjacentElementRelationships(),this.getSpaceContainedElementRelationships(),this.getStoreyElementRelationships(),this.getSubElementRelationships(),this.getAdjacentElementRelationships(),this.getStoreySpaceRelationships(),this.getBuildingStoreyRelationships(),this.getSiteBuildingRelationships()]),this._tripleCount})}getSites(){return L(this,null,function*(){return this._writeClasses([Et],"bot:Site")})}getBuildings(){return L(this,null,function*(){return this._writeClasses([pt],"bot:Building")})}getStoreys(){return L(this,null,function*(){return this._writeClasses([it],"bot:Storey")})}getSpaces(){return L(this,null,function*(){return this._writeClasses([ht],"bot:Space")})}getElements(){return L(this,null,function*(){let e=Ve(Ot);return this._writeClasses(e,"bot:Element")})}getSpaceAdjacentElementRelationships(){return L(this,null,function*(){let e=Ve(xr);yield this._writeOneToOneRel(e,"RelatingSpace","RelatedBuildingElement","bot:adjacentElement")})}getSpaceContainedElementRelationships(){return L(this,null,function*(){let e=Ve(cr);yield this._writeOneToManyRel(e,"RelatingStructure","RelatedElements","bot:containsElement",[ht])})}getStoreyElementRelationships(){return L(this,null,function*(){let e=Ve(cr);yield this._writeOneToManyRel(e,"RelatingStructure","RelatedElements","bot:hasElement",[it])})}getSubElementRelationships(){return L(this,null,function*(){this._writeOpeningFills()})}getAdjacentElementRelationships(){return L(this,null,function*(){let e=Ve(Fr);yield this._writeOneToOneRel(e,"RelatingElement","RelatedElement","bot:adjacentElement")})}getStoreySpaceRelationships(){return L(this,null,function*(){yield this._writeOneToManyRel([qt],"RelatingObject","RelatedObjects","bot:hasSpace",[it],[ht])})}getBuildingStoreyRelationships(){return L(this,null,function*(){yield this._writeOneToManyRel([qt],"RelatingObject","RelatedObjects","bot:hasStorey",[pt],[it])})}getSiteBuildingRelationships(){return L(this,null,function*(){yield this._writeOneToManyRel([qt],"RelatingObject","RelatedObjects","bot:hasBuilding",[Et],[pt])})}_writeClasses(e,r){return L(this,null,function*(){let n=Object.values(this._properties).filter(o=>e.includes(o.type));for(let o of n){let l=ge(o.expressID,this._idMap);this._writer.addQuad(Z(l),Z(_n),Z(r)),this._tripleCount++}})}_getOneToOneRel(e,r,n){return Object.values(this._properties).filter(o=>e.includes(o.type)).filter(o=>o[r]?.value!==void 0).filter(o=>o[n]?.value!==void 0).map(o=>{let l=o[r].value,d=o[n].value;return{sourceId:l,targetId:d,relationshipItem:o}})}_writeOneToOneRel(e,r,n,o){return L(this,null,function*(){let l=this._getOneToOneRel(e,r,n);for(let d of l){let s=ge(d.sourceId,this._idMap),m=ge(d.targetId,this._idMap);if(this._writer.addQuad(Z(s),Z(o),Z(m)),this._tripleCount++,this._settings.includeInterfaces){let S=ge(d.relationshipItem.expressID,this._idMap);this._writer.addQuad(Z(S),Z(_n),Z("bot:Interface")),this._tripleCount++,this._writer.addQuad(Z(S),Z("bot:interfaceOf"),Z(s)),this._tripleCount++,this._writer.addQuad(Z(S),Z("bot:interfaceOf"),Z(m)),this._tripleCount++}}})}_writeOneToManyRel(e,r,n,o,l,d){return L(this,null,function*(){let s=Object.values(this._properties).filter(m=>m!==void 0).filter(m=>e.includes(m.type)).filter(m=>m[r]!==void 0).filter(m=>m[n]!==void 0);for(let m of s){let S=m[r].value,v=m[n],R=this._properties[S];if(R===void 0||l!==void 0&&!l.includes(R.type))continue;let _=ge(S,this._idMap);for(let C of v){let A=this._properties[C.value];if(!A){console.error(`${C.value} not available in properties - because it's an asset?`);continue}if(d!==void 0&&!d.includes(A.type))continue;let P=ge(C.value,this._idMap);if(this._writer.addQuad(Z(_),Z(o),Z(P)),this._tripleCount++,this._settings.includeInterfaces){let F=ge(m.expressID,this._idMap);this._writer.addQuad(Z(F),Z(_n),Z("bot:Interface")),this._tripleCount++,this._writer.addQuad(Z(F),Z("bot:interfaceOf"),Z(_)),this._tripleCount++,this._writer.addQuad(Z(F),Z("bot:interfaceOf"),Z(P)),this._tripleCount++}}}})}_writeOpeningFills(){return L(this,null,function*(){let e=this._getOneToOneRel([Ar],"RelatingBuildingElement","RelatedOpeningElement"),r=this._getOneToOneRel([Or],"RelatingOpeningElement","RelatedBuildingElement");for(let n of r){let o=n.sourceId,l=e.find(v=>v.targetId===o);if(l===void 0)continue;let d=l.targetId,s=n.sourceId,m=ge(d,this._idMap),S=ge(s,this._idMap);if(this._writer.addQuad(Z(m),Z("bot:hasSubElement"),Z(S)),this._tripleCount++,this._settings.includeInterfaces){let v=ge(o,this._idMap);this._writer.addQuad(Z(v),Z(_n),Z("bot:Interface")),this._tripleCount++,this._writer.addQuad(Z(v),Z("bot:interfaceOf"),Z(m)),this._tripleCount++,this._writer.addQuad(Z(v),Z("bot:interfaceOf"),Z(S)),this._tripleCount++}}})}};var{DataFactory:Cf}=tt,{namedNode:q,literal:nl}=Cf,$i="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",wn=class{constructor(e,r,n,o){this._writer=e,this._properties=r,this._idMap=n,this._settings=o,this._tripleCount=0}full(){return L(this,null,function*(){this._tripleCount=0;let e=yield this.addPorts();return yield Promise.all([this.addTypes(),this.addSystems(e),this.getConnections()]),this._tripleCount})}addTypes(){return L(this,null,function*(){let e=yield tl(this._properties);for(let r of Object.keys(e)){let n=ge(parseInt(r),this._idMap);e[parseInt(r)].forEach(l=>{this._writer.addQuad(q(n),q($i),q(l)),this._tripleCount++})}})}addSystems(e){return L(this,null,function*(){let r=yield rl(this._properties);for(let n of Object.keys(r)){let o=this._properties[parseInt(n)];if(o===void 0){console.info("Skipping unknown system "+n);continue}let l=ge(parseInt(n),this._idMap);this._writer.addQuad(q(l),q("rdfs:label"),nl(o.Name.value)),this._tripleCount++;for(let d of r[n])if(!e.includes(d)){let s=ge(d,this._idMap);this._writer.addQuad(q(l),q("fso:hasComponent"),q(s)),this._tripleCount++}}})}addPorts(){return L(this,null,function*(){let e=yield Ys(this._properties,Pr,!0),r=[],n=!1;for(let o of e){if(this._settings.includePorts){let l=ge(o.expressID,this._idMap);this._writer.addQuad(q(l),q($i),q("fso:Port")),this._tripleCount++,this._writer.addQuad(q(l),q("rdfs:label"),nl(o.Name.value)),this._tripleCount++;let d=o.FlowDirection.value,s={SINK:"fso:InPort",SOURCE:"fso:OutPort",SOURCEANDSINK:"fso:BidirectionalPort",NOTDEFINED:"fso:BidirectionalPort"};Object.keys(s).includes(d)&&(!n&&s[d]!="fso:BidirectionalPort"&&(n=!0),this._writer.addQuad(q(l),q($i),q(s[d])),this._tripleCount++)}r.push(o.expressID)}return n||console.warn("None of the ports in the model are directed, and therefore, it was not possible to determine flow directions!"),r})}getConnections(){return L(this,null,function*(){let[e,r]=yield Promise.all([this._getPortPortConnections(),this._getPortComponentConnections()]),n=Object.keys(r).map(o=>parseInt(o));for(let o of n){let l=r[o],d=e[o],s=r[d];if(l!==void 0&&s!==void 0){let m=ge(l,this._idMap),S=ge(s,this._idMap);this._writer.addQuad(q(m),q("fso:connectedWith"),q(S)),this._tripleCount++,this._writer.addQuad(q(S),q("fso:connectedWith"),q(m)),this._tripleCount++;let v=this._properties[o].FlowDirection?.value;v&&(v==="SOURCE"?(this._writer.addQuad(q(m),q("fso:suppliesFluidTo"),q(S)),this._tripleCount++,this._writer.addQuad(q(S),q("fso:hasFluidSuppliedBy"),q(m)),this._tripleCount++):v==="SINK"&&(this._writer.addQuad(q(m),q("fso:hasFluidSuppliedBy"),q(S)),this._tripleCount++,this._writer.addQuad(q(S),q("fso:suppliesFluidTo"),q(m)),this._tripleCount++))}}})}_getPortPortConnections(){return L(this,null,function*(){let e=yield Zs(this._properties);if(this._settings.includePorts)for(let r of Object.keys(e)){let n=e[r],o=ge(parseInt(r),this._idMap),l=ge(n,this._idMap);this._writer.addQuad(q(o),q("fso:connectedPort"),q(l)),this._tripleCount++,this._writer.addQuad(q(l),q("fso:connectedPort"),q(o)),this._tripleCount++}return e})}_getPortComponentConnections(){return L(this,null,function*(){let e=yield Xs(this._properties);if(this._settings.includePorts)for(let r of Object.keys(e)){let n=e[r],o=ge(parseInt(r),this._idMap),l=ge(n,this._idMap);this._writer.addQuad(q(o),q("fso:connectedElement"),q(l)),this._tripleCount++,this._writer.addQuad(q(l),q("fso:connectedPort"),q(o)),this._tripleCount++}return e})}};var Pf="Bumper GuideBearing ImpactProtectionDevice StraightRunStair Vessel OdorFilter DuctEntry MultipositionController SignalAssembly DirectDrive Refrigerator InductionMotor NavigationElement FrostSensor Geoslice Counterweigth MedicalDevice Stair SphericalBearing RoofingCovering Cistern Bearing AdiabaticRigidMediaHumidifier Bidet SticthWire EarthquakeSensor TwoQuarterTurnRamp OilRetentionTray HatstoneBeam ContactWireSegment ElementedWall SmokeSensor ReinforcingBar GableRoof GullySump EvaporativeCooler SwitchDisconnector SoundAbsortion CableTrunkingSegment RailLubrication OpticalNetworkUnit BeamGrid Ceiling IntelligentPeripheral Two-positionController Faucet PressureReliefValve RackRail Printer RailJoint Signal ElectricTimeControl FiberSegment StudShearConnector TwoStairRunRamp CohesionPile WaterCoolingCoil Tiebar PipeExit WeatherStation Wall Chain EnergyConversionDevice Ladder Inverter Sprinkler FluorescentLamp Brace LandingSlab AdiabaticCompressedAirNozzleHumidifier TrasnportUnit WasteDisposalUnit RooftopUnit Telecommand HumiditySensor Insulation CableCarrierBend ButterflyRoof TendonDuct Post TransportElement GroutingDuct Coupling SafetyCage HighPressureSodiumLamp Ligature DomeRoof Trench SteaminjectionHumidifier DirectEvaporativeRandomMediaAirCooler CableTransition RotaryVaneCompressor FlowInstrument VoltmeterPeak SolarPanel BusBarSegment MansardRoof Feed-AirUnit AntivacuumValve AirTerminalBox DoubleRegulatingValve RadiationSensor TendonConduitCoupler BackdraftDamper SolidStratum MasterUnit Backfill FreestandingWaterCooler Air-cooledCondenser PointMachineLockingDevice BasebandUnit InternalCombustionMotor StraightRampFlight DuctSilencer ProtectiveDeviceTrippingUnit ThermostaticActuator PhaseAngleMeter GeotechnicalStratum BreakglassButton ReinforcedSoil FreestandingFan ControlPanel Switcher Reciever HipRoof PneumaticActuator DirectEvaporativePackagedRotaryAirCooler ElectronicFilter RailMechanicalEquipment SlabField NailPlate Shutter BlockingDevice LinesideElectronicUnit Trasnponder ThermalTrippingUnit Course TurnoutClosureSensor FlowSegment Hosereel ReplacedSoil QuarterTurnRamp FootingBeam InductorBank Microphone FlatRoof BallastedCourse Bath CompressionIsolator HippedGableRoof DeckAssembly LiquidTerminal StraightRunRamp RemoteUnit GeotechnicalAssembly Strand BirdProtection VoidStratum STRIPFOOTING ThermosiphonSealedTubeHeatExchanger DirectExpansionShell-and-TubeEvaporator WearingSlab Geomodel StraightStairFlight TendonConduit ControlDamper Bell DynamicallyCompactedSoil FuseDisconnector ManualPullBox RotaryCompressor CentrifugalBackward-InclinedCurvedFan FrictionPile Light Door ReluctanceSynchronousMotor TwoCurvedRunStair BaseIsolator Truss StayCable Telephone SuspensionAssembly Balustrade TendonAnchor DoubleReturnStair PipeJunction PowerJuntionBox Jalouise StackTerminal Molding Blade Semi-hermeticCompressor PHSensor RigidFrame Handrail Fender ShearConnector TimeDelay HeatExchanger PierAssembly WashingMachine DuctFitting RubberDamper DispatchingBoard ShearWall IndirectEvaporativeWetCoil Fan SumpBuster CommunicationsAppliance CircuitBreaker CargoVehicle Stud BarTendon GullyTrap Ramp BRACKET Gate VacuumMooringDevice Boiler DXCoolingCoil BaseStationController ResidualCurrentTrippingUnit Roller QuarterTurnStair StartandStopSwitch ProgrammableController Evaporator Dowel Fence PierStem AirTerminal CompactFluorescentLamp Chimney SumpPump ProtectiveDevice Bolt CombinedControlElement ValveChamber HermeticCompressor CapacitorBank PowerFactorMeter StopCock DistributionChamberElement Flashing SteamBoiler CombinedFlowInstrument VoltmeterRMS MotorConnection RadiactivitySensor Pile LineTensioner HALFTURNRAMP DeepFoundation Mast InspectionChamber DuctBend FixedPlateCounterFlowExchanger SolarCollector TechnicalGabinet OxygenGenerator FireHydrant Speaker Guardrail FinnedTubeBundle PylonAssembly Membrane Buoy NaturalDraftCoolingTower DirectVaporativeWasher MixedSignalingDevice HighPressureMercuryLamp IonConcentrationSensor RailwayCrocodile FloorSlab Pump Plate DCMotor AdiabaticAtomizingHumidifier CO2Sensor LevelSensor ConductorSegment TransitionComponent Elevator ThinScrewCompressor Compressor AudioVisualAppliance DiscreteAccessory Insulator WindSensor DuctJuntion ProtectionCourse Pictoral ShearBar Railing CrossBracing DuctObstruction Timelock DampingSystem RigidDuctSegment Thermometer AirVehicle RollingStock PierCap Siren Condenser Apron FixedPlateParallelFlowExchanger WaterHeatingCoil Recharger CableArranger HalogenLamp DuctTransition GasCock PressureVessel RailMechanicalEquipmentAssembly SubscriberServer GasDetectionPanel UPS IndirectEvaporativeCoolingTowerorCoilCooler Pavement FiberTube MainBar Strainer ConductanceSensor CoatedTendon CurtainPanel SystemFurnitureElement Water-cooledBrazed-plateCondenser BuildingElementPart Water-cooledCondenser ShellandTubeExchanger Water-cooledShellTubeCondenser ResidualCurrentCircuitBreaker CableJunction Derailer ReinforcementRing Diaphragm CurrentTransformer RoofSlab Bed Coupler FlowMovingDevice ESCALATOR OpenTypeCompressor WheelSensor ApproachSlab GuardRail HydraulicActuator CoreSegment HarmonicFilter GasMeter Furniture SuspensionCable Terrain TurnoutHeating ScrollCompressor Table TumbleDryer JetGroutingPile ElectricFlowStorageDevice FireHosereel Weld Trumpet TensionEquipment WebPlate CentrfugalForward-CurvedFan Starter RainSensor SpiralStairFlight CableCarrierJunction Varistor BlastDamper CableSegment Sensor Chiller HeatPipe BreechingInlet Subgrade Transformer BeltDrive SubgradeBed Computer Arch ShedRoof TransitionSection ExpansionJointDevice Display Register RectangularSilencer ChangeoverValve SkirtingBoard TwoQuarterWindingStair ReciprocatingCompressor WirePairSegment DistributionFrame AnchorBolt Freezer FurnishingElement FreestandingElectricHeater RetainingWall AirHandler TrackElement LoadingArm FloorWaste WheeledVehicle Shelf AssitedButaneHumidifier SteamTrap Manhole DistributionControlElement Sleeving Sink Trunstile SlopeFill OpticalCableSegment Contactor IndicatorPanel CraneWaySystem SanitaryTerminal Modem ConduitSegment PlumbingWall Bending-yieldDamper Diffuser PipeFitting SmokeDamper EmergencyStop CableConnector PointMachineMountingDevice. ElectricGenerator VendingMachine Awning Rivet FlowFitting FixedEndAnchor Dropper VehicleStop CheckRail StructuralCable EarthworksElement PropellorAxialFan Ammeter TrafficCalminfgDevice Pilaster MechanicalForcedDraftCoolingTower Coil WaterCooledChiller PassiveCooledBeam FlowSensor TBeam Stringer DataOutlet SecurityLightning TelephoneOutlet PileCap DirectionSourceLightFixture LEDLamp FlowMeter Embankment SparkGap MovementSensor AudioSignalingDevice WallStud AirStation FireSensor IndirectEvaporativePackageAirCooler Damper Camera Actuator QuarterWindingStair PartitioningWall LightSensor PressureReducingValve GasSensor PavementCourse WaterBoiler MarineVehicle MomentarySwitch GroutedSoil TrochoidalCompressor ProportionalController CommunicationOutlet SolidWall RotaryWheel Humidistat SupportPile VisualSignalingDevice SteamHeatingCoil ElasticCushion HalfTurnStair DuctExit MechanicalInducedDraftCoolingTower E-UtranNodeB FireSmokeDamper CableCarrierConnector UnitaryControlElement COSensor HaulingGear Chopper ResidualCurrentSwitch DimmerSwitch EntranceWorks ChuteConveyor BalancingDamper BreakPressureTank Anti-ArcingDevice Burner Panel Shear-yieldDamper DuctSegment BeltConveyor Axial-yieldDamper OilMeter Thermostat HeatSensor CableExit SynchronousMotor FlowTreatmentDevice VariableFlowPressureIndependantTerminalBox HandOperatedActuator DynamicCompressor Amplifier WaterMeter EdgeBar Alarm SplicePlate Microwave GreaseInterceptor EarthingSwitch CoreCourse AircooledChiller Cladding EndSuctionPump CooledBeam BorePile Gravity-reliefDamper ScrewConveyor ElectricAppliance NetworkBridge Cowl Shelter WaveWall CaissonFoundation Caisson RailFastening AirToAirHeatRecovery Basin Grid MixingValve PipeBend EvaporativeCooledCondenser VibrationDamper DirectEvaporativeSlingersPackagedAirCooler WasteTrap ReinforcingMesh ElementComponent FreestandingWaterHeater SpeedRegulator SpiralRamp StairFlight Desk FloatingController CableEntry PavingSlab MimicPanel GeotechnicalElement FlowStorageDevice ExternalCombustionMotor PavilionRoof FreeFormRoof Ligthdome DrivenPile FlexiblePavement MovingWalkway RainbowRoof WasteTerminal RadioBlockCenter WaterStratum Grille Coping Purlin CoolingTower Voltmeter TendonCoupler AirConditioningUnit ConsumerUnit Kerb SpaceHeater TungstenFilamentLamp FormedDuct CylindricalBearing CombinedTransformer Radiator InsulationElement Tuner AirReleaseValve Booster Antenna ReliefDamper Footing PolyphaseMotor RailPad VibrationIsolator Flat-ovalSilencer Sump NetworkHub IsolatingValve StockRail TwoStraightRunStair Armour Sleeper Keypad PressureSensor ObstacleSensor ConveyorSegment RoofDrain InspectionPit Beam ElectricCooker DirectEvaporativeRigidMediaAirCooler Draw-OffCock BracedFrame DuctConnector GeographicElement PlateMember SoundSensor PierStemSegment Chord WaterFilter AssistedPropaneHumidifier Vehicle Wrapping Sprandel FilterCourse AccessoryAssembly DistributionBoard Covering TransportationDevice ElementAssembly SantirayFountain Mirror CatenaryWire ElectromagneticTrippingUnit HeatRecoveryChiller RoundSilencer Shoe Element FloodedShellandTubeEvaporator AdiabaticPan FrequencyTransformer DoubleCheckValve TubeAxialFan MobileTelecommunicationsAppliance Inductor PipeObstruction ElectricFlowTreatmentDevice GasTap FeedandExpansionTank FlowController BuildingElementProxy Beacon ShadingDevice Water-cooledShellCoilCondenser MovableWall HalfSetofBlades UnitaryEquipment TrackSlab Culvert ElectricMotor IndirectDirectCombination ServiceGPRSSupportNode TrackEndofAlignment CableBracket OLEDLamp Fax FireDamper Controller AnchoringBar StandaloneGenerator BasePlate CableCarrierTransition DirectExpansionEvaporator LiftingGear SpaceBar FlexibleDuctSegment CirculatorPump Skylight Slab TelephonyExchange DataJuntionBox Fastener RainwaterHopper AssistedSteamHumidifier Spool GravityDamper EarthworksFill VoltageLimiter Player CrashCushion Tank PadFooting IndentifierSensor AdiabaticUltrasonicHumidifier Vegetation Suspender ArmourUnit Filler Run-aroundCoilLoop BaseTranscieverStation GambrelRoof VerticallyDrainedSoil ContactSensor GussetPlate Rectifier Borehole PowerOutlet ElectricActuator DivertingValve OxygenPlant Rocker HalfWindingStair EnergyMeter CableFanout Rafter CHP Bollard Router CentrifugalAirfoilFan DilatationPanel AssistedElectricHumidifier AdiabaticWettedElement Valve ToggleSwitch Dishwasher RollerCompactedSoil DistributionElement ElectronicTrippingUnit MeterChamber PANELSTRENGTHENING AirParticlefilter VariableFlowPressureDependantTerminalBOx PipeConector BarrelRoof AlarmPanel RigidPipeSegment BirdCage StiffenerPlate RecordingEquipment SpringIsolator ArchSegement SnowDepthSensor TwoQuarterTurnStair ToiletPan SecurityCut-offValve FloorTrap PacketControlUnit Strut GatewayGPRSNodeSupport Lintel MooringDevice HollowcoreBeam SpiralRampFlight Glue Capacitor CheckValve RailBrace WorkSurface CoverPlate Well FreeFormStairFlight SwitchingDevice CompressedAirFilter OpticalLineTerminal FireMonitor ThreeQuarterWindingStair ReinforcingElement VerticalInlinePump Chair GasHeatCoil Diabolo BucketConveyor Whistle AbutmentAssembly GirderSegment TrainSensor RigidPavement Girder WeldedShellHermeticCompressor SolarDevice Filter LightFixture JunctionBox OilFilter AchorPlate ExpansionTank Outlet RollingPiston ShellandCoilEvaporator RampFlight ThermosiphonCoilTypeHeatExchanger Wire Gutter TimeRelay Sofa SidewalkSlab MobileSwitchingCenter Mullion CableFitting ElectricHeatingCoil PressureGauge TubeBundle Dehumidifier Repeater Collar TemperatureSensor SplitSystem ForeignObjectDetectionSensor Compensator Tendon ActiveCooledBeam CurvedStairFlight AdiabaticAirWasher SupportingGasAssembly Interceptor OilInterceptor Trapdoor EarthLeakerCircuitBreaker Lamp TrackedVehicle Lock StiffeningRib DistributionFlowElement Roof SingleScrewCompressor JoistBeam BoomBarrier WashHandBasin Scanner ConstantFlowTerminalBox Window Shower Water-cooledTube-in-TubeCondenser Urinal HandDryer Subrack Rail DiskBearing SubmersiblePump Automaton ViscousDamper SwitchBoard FlangePlate RemoteRadioUnit HydronicCoil ElastomericBearing PipeTransition NetworkAppliance Topping SpiralStair PlateHeatExchanger Mortar TensioningEndAnchor DirectExpansionTube-in-TubeEvaporator Relay CableCarrierFitting SurchargePreloadedSoil CurvedRunStair TurnoutPanel Photocopier PetrolInterceptor MSCServer MetalHalideLamp FireSuppressionTerminal ReinforcmentUnit Gateway PointSourceLightFixture Staple SplitCasePump MooringHooks FrequencyMeter KitchenMachine ThreeQuarterTurnStair RegulatingValve DirectExpansionBrazedPlateEvaporator PrecastPanel FlushingValve Frog EdgeBeam Column CyclonicInterceptor Louvre Battery SelectorSwitch VerticalTurbinePump MageneticMooringDevice FileCabinet FrictionDamper CableCarrierSegment Fridge-Freezer VacuumStation VoltageTransformer Convector CommissioningValve PunchingBar StorageTank BaseSlab FlowTerminal AssistedNaturalGasHumidifier TractionSwitchingAssembly TrackPanel Member FlexiblePipeSegment Sign WinderStairFlight Accesspoint IPNetworkEquipment FumeHoodExhaustDamper Nail PipeEntry CentrifugalRadialFan Engine Marker CurtainWall FixedPlateCrossFlowExchanger RailwayDetonator Rope AudiovisualOutlet VaneAxialFan EngineGenerator Cornice Sheet Screw CommunicationTerminal BuiltElement STANDCOLUMN MotorControlCentre Pot PipeSegment Projector CableLadderSegment MechanicalFastener TwinTowerEnthalpyRecoveryLoops CableTraySegment SlidingChair Flooring Humidifier SingleStageCompressor Parapet",il=()=>Pf.split(" ");var{DataFactory:Af}=tt,{namedNode:ar}=Af,ol="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",sl=il(),xf=sl.map(t=>t.toLowerCase()),Sn=class{constructor(e,r,n,o){this._writer=e,this._properties=r,this._idMap=n,this._settings=o,this._tripleCount=0}full(){return L(this,null,function*(){return this._tripleCount=0,yield this.addProducts(),this._tripleCount})}addProducts(){return L(this,null,function*(){let e=Ve(Ot),r=Object.values(this._properties).filter(n=>e.includes(n.type));for(let n of r){let o=ge(n.expressID,this._idMap),l=jn[n.type];if(l===void 0&&(console.info(`No mapping available for type ${n.type}`),console.info(n)),o!==void 0&&l!==void 0)if(this._settings.includeParents)Js(n.type,Ot).forEach(d=>{let s=jn[d];if(s!==void 0){let m=al(s);m&&(this._writer.addQuad(ar(o),ar(ol),ar(`beo:${m}`)),this._tripleCount++)}});else{let d=al(l);d&&(this._writer.addQuad(ar(o),ar(ol),ar(`beo:${d}`)),this._tripleCount++)}}})}};function al(t){let e=xf.indexOf(t.toLowerCase().split("ifc")[1]);return e!==-1?sl[e]:null}var{Writer:Bf}=tt,sr=class{constructor(){this.tripleCount={bot:0,fso:0,products:0,total:0},this.triples=""}},In=class{processProperties(e,r,n){return L(this,null,function*(){let o=new sr,l=new Bf({prefixes:{ifc:Tt.ifc,fso:Tt.fso,beo:Tt.beo,bot:Tt.bot,fog:Tt.fog,omg:Tt.omg,rdfs:Tt.rdfs,inst:n.namespace}});if(n.enabledParsers.bot){console.time("BOT parsed");let d=new yn(l,e,r,n.subSettings.bot);o.tripleCount.bot=yield d.full(),o.tripleCount.total+=o.tripleCount.bot,console.timeEnd("BOT parsed"),console.info(`${o.tripleCount.bot} triples`)}if(n.enabledParsers.fso){console.time("FSO parsed");let d=new wn(l,e,r,n.subSettings.fso);o.tripleCount.fso=yield d.full(),o.tripleCount.total+=o.tripleCount.fso,console.timeEnd("FSO parsed"),console.info(`${o.tripleCount.fso} triples`)}if(n.enabledParsers.products){console.time("PRODUCTS parsed");let d=new Sn(l,e,r,n.subSettings.products);o.tripleCount.products=yield d.full(),o.tripleCount.total+=o.tripleCount.fso,console.timeEnd("PRODUCTS parsed"),console.info(`${o.tripleCount.products} triples`)}return new Promise((d,s)=>{l.end((m,S)=>{m&&s(m),o.triples=S,d(o)})})})}};var ll=new Set([1123145078,574549367,1675464909,2059837836,3798115385,32440307,3125803723,3207858831,2740243338,2624227202,4240577450,3615266464,3724593414,220341763,477187591,1878645084,1300840506,3303107099,1607154358,1878645084,846575682,1351298697,2417041796,3049322572,3331915920,1416205885,776857604,3285139300,3958052878,2827736869,2732653382,673634403,3448662350,4142052618,2924175390,803316827,2556980723,1809719519,2205249479,807026263,3737207727,1660063152,2347385850,2705031697,3732776249,2485617015,2611217952,1704287377,2937912522,2770003689,1281925730,1484403080,3448662350,4142052618,3800577675,4006246654,3590301190,1383045692,2775532180,2047409740,370225590,3593883385,2665983363,4124623270,812098782,3649129432,987898635,1105321065,3510044353,1635779807,2603310189,3406155212,1310608509,4261334040,2736907675,3649129432,1136057603,1260505505,4182860854,2713105998,2898889636,59481748,3749851601,3486308946,3150382593,1062206242,3264961684,15328376,1485152156,370225590,1981873012,2859738748,45288368,2614616156,2732653382,775493141,2147822146,2601014836,2629017746,1186437898,2367409068,1213902940,3632507154,3900360178,476780140,1472233963,2804161546,3008276851,738692330,374418227,315944413,3905492369,3570813810,2571569899,178912537,2294589976,1437953363,2133299955,572779678,3092502836,388784114,2624227202,1425443689,3057273783,2347385850,1682466193,2519244187,2839578677,3958567839,2513912981,2830218821,427810014]);function ul(t){return L(this,null,function*(){t.streamAllProperties=function(){return L(this,null,function*(){let r=this.settings,{propertiesSize:n}=r,o=r.limitTypesTo.size!==0?r.limitTypesTo:new Set(this.webIfc.GetIfcEntityList(0)),l=new Set([kr,Et,pt,it,ht]);if(r.limitTypesTo.size===0)for(let v of l)o.add(v);let d=.01,s=0;for(let v of o){if(s++,ll.has(v))continue;let R=l.has(v),_=this.webIfc.GetLineIDsWithType(0,v),C=_.size(),A=0;for(let F=0;F<C-n;F+=n){let V={};for(let G=0;G<n;G++){A++;let k=_.get(F+G);try{let H=this.webIfc.GetLine(0,k,R);V[H.expressID]=H}catch{console.log(`Could not get property: ${k}`),console.log(v)}}yield this.onPropertiesStreamed.trigger({type:v,data:V})}if(A!==C){let F={};for(let V=A;V<C;V++){let G=_.get(V);try{let k=this.webIfc.GetLine(0,G,R);F[k.expressID]=k}catch{console.log(`Could not get property: ${G}`)}}yield this.onPropertiesStreamed.trigger({type:v,data:F})}let P=s/o.size;P>d&&(d+=.01,d=Math.max(d,P),yield this.onProgress.trigger(Math.round(d*100)/100))}let S=yield this.components.get(Eo).processFromWebIfc(this.webIfc,0);yield this.onIndicesStreamed.trigger(S)})}})}function cl(t){return new Promise(e=>setTimeout(e,t))}var dl=t=>{let e=new Set;return Ve(Ot).forEach(r=>e.add(r)),e.add(kr),e.add(Et),e.add(pt),e.add(it),e.add(ht),t.includeLBDTriples&&(t.lbdParserSettings.enabledParsers.bot&&(Ve(Fr).forEach(r=>e.add(r)),e.add(Et),e.add(pt),e.add(it),e.add(ht),e.add(qt),e.add(cr),e.add(Or),e.add(xr),e.add(Ar),e.add(ho)),t.lbdParserSettings.enabledParsers.fso&&(Ve(Pr).forEach(r=>e.add(r)),e.add(On),e.add(kn),e.add(Mn),e.add(dr),e.add(Br),e.add(Bn),e.add(Fn),e.add(bo),e.add(yo),e.add(wo),e.add(So),e.add(_o),e.add(go),e.add(mo),e.add(po),e.add(Br))),e};var{Writer:fl,DataFactory:Of}=tt,{namedNode:ee,literal:Pt}=Of,Vi="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",En=class{constructor(){this._settings=new or,this._components=new Io,this._prefixes={obc:"https://w3id.org/obc#",omg:"https://w3id.org/omg#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",ifc:"http://ifcowl.openbimstandards.org/IFC2X3_Final#",inst:"https://web-bim/resources/"},this._wasmPath={path:"https://unpkg.com/web-ifc@0.0.54/",absolute:!0},this._propsProcessor=new bn,this._lbdParser=new In,this._modelMD5="",this._modelUUID="",this._assetIDMap={},this._globalFile=new Uint8Array,this._geometries={},this._assetsCount=0,this._geometryCount=0,this._assets=[],this._geometryMap={},this._lbdResults=new sr,this._assetFactPromises=[],this._geometryFactPromises=[],this._tiler=new To(this._components),this._propsStreamer=this._components.get(Co),ul(this._propsStreamer),this._tiler.settings.wasm=this._wasmPath,this._propsStreamer.settings.wasm=this._wasmPath,this._writer=new fl({prefixes:this._prefixes}),this._initEventHandlers()}dispose(){this._components.dispose(),this._tiler.dispose(),this._propsProcessor.dispose(),this.reset()}reset(){this._globalFile=new Uint8Array,this._geometries={},this._assetsCount=0,this._geometryCount=0,this._assetFactPromises=[],this._geometryFactPromises=[],this._assets=[],this._geometryMap={},this._assetIDMap={},this._lbdResults=new sr}get settings(){return this._settings}set settings(e){e.ifcStreamingSettings.wasm=this._wasmPath,e.propertiesStreamingSettings.wasm=this._wasmPath,this._tiler.settings=e.ifcStreamingSettings,this._propsStreamer.settings=e.propertiesStreamingSettings,this._prefixes.inst=e.namespace,this._writer=new fl({prefixes:this._prefixes}),this._settings=e}loadModel(e){return L(this,null,function*(){this.reset();let r=yield fetch(e);console.log("got file");let n=yield r.arrayBuffer(),o=this._buildIDs(n),l=new Uint8Array(n),d=this._propsStreamer.settings;d.limitTypesTo=dl(this._settings),yield o;let s=this._propsProcessor.buildIDMap(this._propsStreamer);this._propsStreamer.streamFromBuffer(l),console.log("props stream started");let[m,S,v]=yield s;this._idMap=m,this._typeMap=S,this._writeContextFacts();let R=!1;if(this._tiler.onIfcLoaded.add(()=>{R=!0}),this._tiler.streamFromBuffer(l),this._settings.includeLBDTriples&&s!==void 0){yield cl(5);let _=this._lbdParser.processProperties(v,m,this._settings.lbdParserSettings);this._lbdResults=yield _}return new Promise(_=>{R&&_(),this._tiler.onIfcLoaded.add(()=>{_()})})})}getStats(){return{geometryCount:Object.keys(this._geometries).length,assetsCount:this._assetsCount,tripleCount:this._lbdResults.tripleCount}}getProcessingResult(){return L(this,null,function*(){let e=yield this._getWriterResult();if(this._idMap!==void 0)return{globalModel:this._globalFile,geometryTiles:this._geometries,rdf:e,idMap:this._idMap,globalDataFileId:`${this._settings.filePrefix}${this._modelUUID}-global`,modelUUID:this._modelUUID,lbdTriples:this._lbdResults.triples}})}getGeometryDefinition(){return{assets:this._assets,geometries:this._geometryMap,globalDataFileId:`${this._settings.filePrefix}${this._modelUUID}-global`,idMap:this._assetIDMap,modelUUID:this._modelUUID}}_buildIDs(e){return L(this,null,function*(){this._modelMD5=yield Ln(e),this._modelUUID=yield vt(this._modelMD5),console.info("Got ids")})}_writeContextFacts(){return L(this,null,function*(){let e=`inst:${this._modelUUID}`;this._writer.addQuad(ee(e),ee(Vi),ee("omg:GeometryContext")),this._writer.addQuad(ee(e),ee("obc:md5"),Pt(this._modelMD5)),this._writer.addQuad(ee(e),ee("obc:globalDataFileId"),Pt(`${this._settings.filePrefix}${this._modelUUID}-global`)),this._writer.addQuad(ee(e),ee("obc:idMapId"),Pt(`${this._settings.filePrefix}${this._modelUUID}-ids`))})}_initEventHandlers(){this._tiler.onGeometryStreamed.add(e=>L(this,null,function*(){this._geometryCount+=Object.keys(e.data).length;let r=yield Ln(e.buffer),n=yield vt(r);this._geometryFactPromises.push(this._handleGeometryFacts(e.data,n));for(let o of Object.keys(e.data)){let l=e.data[parseInt(o)];l.geometryFile=n,this._geometryMap[parseInt(o)]=l}this._geometries[n]=e.buffer})),this._tiler.onAssetStreamed.add(e=>{this._assetsCount+=e.length,this._assets.push(...e),this._assetFactPromises.push(this._handleAssetFacts(e))}),this._tiler.onIfcLoaded.add(e=>{this._globalFile=e})}_handleGeometryFacts(e,r){return L(this,null,function*(){for(let n of Object.keys(e)){let o=yield this._getUUID(parseInt(n)),l=e[parseInt(n)],d=`inst:${o}`;this._writer.addQuad(ee(d),ee(Vi),ee("omg:Geometry")),this._writer.addQuad(ee(d),ee("obc:oobb"),Pt(JSON.stringify(l.boundingBox))),this._writer.addQuad(ee(d),ee("obc:hasHoles"),Pt(JSON.stringify(l.hasHoles))),this._writer.addQuad(ee(d),ee("obc:geometryFile"),Pt(`${this._settings.filePrefix}${r}`)),this._writer.addQuad(ee(d),ee("omg:hasGeometryContext"),ee(`inst:${this._modelUUID}`))}})}_handleAssetFacts(e){return L(this,null,function*(){if(this._typeMap===void 0)throw new Error("TypeMap is undefined");for(let r of e){let n=r.id,o=yield this._getUUID(n);this._assetIDMap[n]=o;let l=`inst:${o}`,d=this._typeMap[n];for(let s of r.geometries){let m=yield this._getUUID(s.geometryID);m===void 0&&console.log(s.geometryID),this._settings.makeSpacesTransparent&&d===3856911033&&(s.color=[.3,.3,.3,.5]),this._settings.makeOpeningsInvisible&&d===3588315303&&(s.color=[0,0,0,0]);let S=yield vt(o+m),v=`inst:${m}`,R=`inst:${S}`;this._writer.addQuad(ee(R),ee(Vi),ee("omg:Geometry")),this._writer.addQuad(ee(l),ee("omg:hasGeometry"),ee(R)),this._writer.addQuad(ee(R),ee("obc:transformation"),Pt(JSON.stringify(s.transformation))),this._writer.addQuad(ee(R),ee("obc:color"),Pt(JSON.stringify(s.color))),this._writer.addQuad(ee(R),ee("omg:transformsGeometry"),ee(v)),this._writer.addQuad(ee(R),ee("omg:hasGeometryContext"),ee(`inst:${this._modelUUID}`))}}})}_allWritingResolved(){return L(this,null,function*(){yield Promise.all(this._assetFactPromises),yield Promise.all(this._geometryFactPromises),console.info("All writing resolved")})}_getWriterResult(){return L(this,null,function*(){return yield this._allWritingResolved(),new Promise((e,r)=>{this._writer.end((n,o)=>{n&&r(n),e(o)})})})}_getUUID(e){return L(this,null,function*(){if(this._idMap===void 0)throw new Error("IDMap is not defined");let r=this._idMap[e];return r===void 0&&(r=yield vt(this._modelUUID+e),this._idMap[e]=r),r})}};var hl=(()=>{let e=class e{processFile(n,o){return L(this,null,function*(){this._settings=o,this._processingResult=void 0;let l=new En;l.settings=o;let d=URL.createObjectURL(n);console.time("Processing file"),yield l.loadModel(d),this._processingResult=yield l.getProcessingResult(),console.timeEnd("Processing file"),this._geometryDefinition=l.getGeometryDefinition(),l.dispose()})}buildForGithub(){return L(this,null,function*(){let n=this._processingResult;if(n===void 0){console.error("File not processed");return}let o={type:"blob",compression:"DEFLATE",compressionOptions:{level:6}},l=new JSZip;l.file(`backend/${n.globalDataFileId}`,n.globalModel),this._settings?.includeLBDTriples&&l.file(`backend/${this._settings.lbdParserSettings.fileName}`,n.lbdTriples),Object.keys(n.geometryTiles).forEach(s=>{let m=`backend/${s}`;l.file(m,n.geometryTiles[s])}),l.file("frontend/geometry.json",JSON.stringify(this._geometryDefinition));let d=yield l.generateAsync(o);Po(d)})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=Ki({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kf(t,e){if(t&1){let r=Bt();Ee(0,"mat-slide-toggle",5),Xe("ngModelChange",function(o){let l=St(r).$implicit,d=$e(2);return Ze(d.enabledParsers[l],o)||(d.enabledParsers[l]=o),It(o)}),Me(1),we()}if(t&2){let r=e.$implicit,n=$e(2);Ke("ngModel",n.enabledParsers[r]),De(),oo(r)}}function Mf(t,e){if(t&1){let r=Bt();Ee(0,"mat-slide-toggle",5),Xe("ngModelChange",function(o){St(r);let l=$e(2);return Ze(l.settings.lbdParserSettings.subSettings.bot.includeInterfaces,o)||(l.settings.lbdParserSettings.subSettings.bot.includeInterfaces=o),It(o)}),Me(1,"Include BOT interfaces"),we()}if(t&2){let r=$e(2);Ke("ngModel",r.settings.lbdParserSettings.subSettings.bot.includeInterfaces)}}function jf(t,e){if(t&1){let r=Bt();Ee(0,"mat-slide-toggle",5),Xe("ngModelChange",function(o){St(r);let l=$e(2);return Ze(l.settings.lbdParserSettings.subSettings.products.includeParents,o)||(l.settings.lbdParserSettings.subSettings.products.includeParents=o),It(o)}),Me(1,"Include product parents"),we()}if(t&2){let r=$e(2);Ke("ngModel",r.settings.lbdParserSettings.subSettings.products.includeParents)}}function Lf(t,e){if(t&1){let r=Bt();Ee(0,"mat-slide-toggle",5),Xe("ngModelChange",function(o){St(r);let l=$e(2);return Ze(l.settings.lbdParserSettings.subSettings.fso.includePorts,o)||(l.settings.lbdParserSettings.subSettings.fso.includePorts=o),It(o)}),Me(1,"Include ports"),we()}if(t&2){let r=$e(2);Ke("ngModel",r.settings.lbdParserSettings.subSettings.fso.includePorts)}}function Df(t,e){if(t&1){let r=Bt();no(0),An(1,"hr"),Ee(2,"p"),Me(3,"LBD Export settings"),we(),Ee(4,"mat-form-field")(5,"mat-label"),Me(6,"Namespace"),we(),Ee(7,"input",4),Xe("ngModelChange",function(o){St(r);let l=$e();return Ze(l.settings.lbdParserSettings.namespace,o)||(l.settings.lbdParserSettings.namespace=o),It(o)}),we()(),Ee(8,"mat-form-field")(9,"mat-label"),Me(10,"LBD triples file name"),we(),Ee(11,"input",4),Xe("ngModelChange",function(o){St(r);let l=$e();return Ze(l.settings.lbdParserSettings.fileName,o)||(l.settings.lbdParserSettings.fileName=o),It(o)}),we()(),Ee(12,"div",3)(13,"p"),Me(14,"Included subsets:"),we(),to(15,kf,2,2,"mat-slide-toggle",9,eo),we(),Cr(17,Mf,2,1,"mat-slide-toggle",10)(18,jf,2,1,"mat-slide-toggle",10)(19,Lf,2,1,"mat-slide-toggle",10),io()}if(t&2){let r=$e();De(7),Ke("ngModel",r.settings.lbdParserSettings.namespace),De(4),Ke("ngModel",r.settings.lbdParserSettings.fileName),De(4),ro(r.parsers),De(2),zt("ngIf",r.enabledParsers.bot),De(),zt("ngIf",r.enabledParsers.products),De(),zt("ngIf",r.enabledParsers.fso)}}function Nf(t,e){if(t&1){let r=Bt();Ee(0,"button",7),xn("click",function(){St(r);let o=$e();return It(o.buildForGithub())}),Me(1," Build for Github "),we()}}var Jp=(()=>{let e=class e{constructor(){this._tilesService=Zi(hl),this.settings=new or,this.parsers=Object.keys(this.settings.lbdParserSettings.enabledParsers),this.enabledParsers=this.settings.lbdParserSettings.enabledParsers,this.processed=!1,this.settings.ifcStreamingSettings.minGeometrySize=20,this.settings.ifcStreamingSettings.minAssetsSize=1e3,this.settings.propertiesStreamingSettings.propertiesSize=1e3}loadIFC(){return L(this,null,function*(){this.processed=!1;let n=yield Ao(".ifc");yield this._tilesService.processFile(n,this.settings),this.processed=!0})}buildForGithub(){return L(this,null,function*(){yield this._tilesService.buildForGithub()})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=Xi({type:e,selectors:[["app-convert-tiles"]],standalone:!0,features:[ao],decls:23,vars:6,consts:[["title","Convert IFC to tiles"],[2,"display","flex","flex-direction","column","gap","5px"],[1,"col"],[1,"row"],["matInput","",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[4,"ngIf"],["mat-stroked-button","",3,"click"],["mat-stroked-button","",3,"click",4,"ngIf"],[3,"ngModel"],[3,"ngModel","ngModelChange",4,"ngIf"]],template:function(o,l){o&1&&(Ee(0,"lib-page-section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field")(5,"mat-label"),Me(6,"Min Geometry Size"),we(),Ee(7,"input",4),Xe("ngModelChange",function(s){return Ze(l.settings.ifcStreamingSettings.minGeometrySize,s)||(l.settings.ifcStreamingSettings.minGeometrySize=s),s}),we()(),Ee(8,"mat-form-field")(9,"mat-label"),Me(10,"Min Asset Size"),we(),Ee(11,"input",4),Xe("ngModelChange",function(s){return Ze(l.settings.ifcStreamingSettings.minAssetsSize,s)||(l.settings.ifcStreamingSettings.minAssetsSize=s),s}),we()(),Ee(12,"mat-form-field")(13,"mat-label"),Me(14,"Properties Size"),we(),Ee(15,"input",4),Xe("ngModelChange",function(s){return Ze(l.settings.propertiesStreamingSettings.propertiesSize,s)||(l.settings.propertiesStreamingSettings.propertiesSize=s),s}),we()()(),Ee(16,"mat-slide-toggle",5),Xe("ngModelChange",function(s){return Ze(l.settings.includeLBDTriples,s)||(l.settings.includeLBDTriples=s),s}),Me(17,"Include LBD triples"),we(),Cr(18,Df,20,5,"ng-container",6),An(19,"hr"),we(),Ee(20,"button",7),xn("click",function(){return l.loadIFC()}),Me(21,"Load file"),we(),Cr(22,Nf,2,0,"button",8),we()()),o&2&&(De(7),Ke("ngModel",l.settings.ifcStreamingSettings.minGeometrySize),De(4),Ke("ngModel",l.settings.ifcStreamingSettings.minAssetsSize),De(4),Ke("ngModel",l.settings.propertiesStreamingSettings.propertiesSize),De(),Ke("ngModel",l.settings.includeLBDTriples),De(2),zt("ngIf",l.settings.includeLBDTriples),De(4),zt("ngIf",l.processed))},dependencies:[lo,so,fo,co,uo,Mo,ko,Fo,xo,Bo,Oo,Do,Lo,jo,Uo,No],styles:[".col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}hr[_ngcontent-%COMP%]{border:1px solid;width:100%}"]});let t=e;return t})();export{Jp as a};

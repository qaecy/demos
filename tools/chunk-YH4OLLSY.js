import{b as Pn,f as Un,h as zn,j as Vn,k as Gn,n as Xn,o as $n,p as Qn,q as Cn,r as Wn,s as Kn}from"./chunk-TMU64VYP.js";import{U as Jn,X as Hn,_ as Bn}from"./chunk-7WATJAWA.js";import{$a as B,$b as Pt,Cc as qn,Ec as Fn,Gb as $,Hb as H,Ib as Jt,Lb as Tn,Nb as kn,Ob as Ge,Wb as re,Yb as Ze,Zb as Ht,_b as Bt,a as J,b as W,bc as Mn,c as Ln,d as j,f as ss,g as E,na as An,ub as Ve,wa as gt,wb as he,xa as yt}from"./chunk-CL3WTTFP.js";var mt=j((ho,Zn)=>{"use strict";Zn.exports=class Yn{constructor(t,n=new Map,r=0){this.prefix=t,this._existing=n,this.counter=r}clone(){let{prefix:t,_existing:n,counter:r}=this;return new Yn(t,new Map(n),r)}getId(t){let n=t&&this._existing.get(t);if(n)return n;let r=this.prefix+this.counter;return this.counter++,t&&this._existing.set(t,r),r}hasId(t){return this._existing.has(t)}getOldIds(){return[...this._existing.keys()]}}});var tr=j(er=>{"use strict";(function(e,t){"use strict";if(e.setImmediate)return;var n=1,r={},s=!1,a=e.document,i;function o(v){typeof v!="function"&&(v=new Function(""+v));for(var b=new Array(arguments.length-1),x=0;x<b.length;x++)b[x]=arguments[x+1];var w={callback:v,args:b};return r[n]=w,i(n),n++}function u(v){delete r[v]}function d(v){var b=v.callback,x=v.args;switch(x.length){case 0:b();break;case 1:b(x[0]);break;case 2:b(x[0],x[1]);break;case 3:b(x[0],x[1],x[2]);break;default:b.apply(t,x);break}}function p(v){if(s)setTimeout(p,0,v);else{var b=r[v];if(b){s=!0;try{d(b)}finally{u(v),s=!1}}}}function g(){i=function(v){process.nextTick(function(){p(v)})}}function y(){if(e.postMessage&&!e.importScripts){var v=!0,b=e.onmessage;return e.onmessage=function(){v=!1},e.postMessage("","*"),e.onmessage=b,v}}function l(){var v="setImmediate$"+Math.random()+"$",b=function(x){x.source===e&&typeof x.data=="string"&&x.data.indexOf(v)===0&&p(+x.data.slice(v.length))};e.addEventListener?e.addEventListener("message",b,!1):e.attachEvent("onmessage",b),i=function(x){e.postMessage(v+x,"*")}}function c(){var v=new MessageChannel;v.port1.onmessage=function(b){var x=b.data;p(x)},i=function(b){v.port2.postMessage(b)}}function f(){var v=a.documentElement;i=function(b){var x=a.createElement("script");x.onreadystatechange=function(){p(b),x.onreadystatechange=null,v.removeChild(x),x=null},v.appendChild(x)}}function m(){i=function(v){setTimeout(p,0,v)}}var h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,{}.toString.call(e.process)==="[object process]"?g():y()?l():e.MessageChannel?c():a&&"onreadystatechange"in a.createElement("script")?f():m(),h.setImmediate=o,h.clearImmediate=u})(typeof self>"u"?typeof global>"u"?er:global:self)});var et=j((mo,nr)=>{"use strict";tr();var Ut=self.crypto||self.msCrypto;nr.exports=class{constructor(t){if(!(Ut&&Ut.subtle))throw new Error("crypto.subtle not found.");if(t==="sha256")this.algorithm={name:"SHA-256"};else if(t==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${t}".`);this._content=""}update(t){this._content+=t}digest(){return E(this,null,function*(){let t=new TextEncoder().encode(this._content),n=new Uint8Array(yield Ut.subtle.digest(this.algorithm,t)),r="";for(let s=0;s<n.length;++s)r+=n[s].toString(16).padStart(2,"0");return r})}}});var zt=j((wo,rr)=>{"use strict";rr.exports=class{constructor(t){this.current=t.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<t.length;++n)this.dir.set(t[n],!0)}hasNext(){return!this.done}next(){let{current:t,dir:n}=this,r=t.slice(),s=null,a=0,i=t.length;for(let o=0;o<i;++o){let u=t[o],d=n.get(u);(s===null||u>s)&&(d&&o>0&&u>t[o-1]||!d&&o<i-1&&u>t[o+1])&&(s=u,a=o)}if(s===null)this.done=!0;else{let o=n.get(s)?a-1:a+1;t[a]=t[o],t[o]=s;for(let u of t)u>s&&n.set(u,!n.get(u))}return r}}});var wt=j((xo,sr)=>{"use strict";var as="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Vt=as+"langString",Gt="http://www.w3.org/2001/XMLSchema#string",ue="NamedNode",Ae="BlankNode",vt="Literal",ir="DefaultGraph",Xe={};(()=>{let e="(?:<([^:]+:[^>]*)>)",n="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD"+"_",r=n+"0-9-\xB7\u0300-\u036F\u203F-\u2040",a="(_:(?:["+n+"0-9])(?:(?:["+r+".])*(?:["+r+"]))?)",i='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',o="(?:\\^\\^"+e+")",d="(?:"+i+"(?:"+o+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",p="[ \\t]+",g="[ \\t]*",y="(?:"+e+"|"+a+")"+p,l=e+p,c="(?:"+e+"|"+a+"|"+d+")"+g,f="(?:\\.|(?:(?:"+e+"|"+a+")"+g+"\\.))";Xe.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,Xe.empty=new RegExp("^"+g+"$"),Xe.quad=new RegExp("^"+g+y+l+c+f+g+"$")})();sr.exports=class bt{static parse(t){let n=[],r={},s=t.split(Xe.eoln),a=0;for(let i of s){if(a++,Xe.empty.test(i))continue;let o=i.match(Xe.quad);if(o===null)throw new Error("N-Quads parse error on line "+a+".");let u={subject:null,predicate:null,object:null,graph:null};if(o[1]!==void 0?u.subject={termType:ue,value:o[1]}:u.subject={termType:Ae,value:o[2]},u.predicate={termType:ue,value:o[3]},o[4]!==void 0?u.object={termType:ue,value:o[4]}:o[5]!==void 0?u.object={termType:Ae,value:o[5]}:(u.object={termType:vt,value:void 0,datatype:{termType:ue}},o[7]!==void 0?u.object.datatype.value=o[7]:o[8]!==void 0?(u.object.datatype.value=Vt,u.object.language=o[8]):u.object.datatype.value=Gt,u.object.value=ds(o[6])),o[9]!==void 0?u.graph={termType:ue,value:o[9]}:o[10]!==void 0?u.graph={termType:Ae,value:o[10]}:u.graph={termType:ir,value:""},!(u.graph.value in r))r[u.graph.value]=[u],n.push(u);else{let d=!0,p=r[u.graph.value];for(let g of p)if(os(g,u)){d=!1;break}d&&(p.push(u),n.push(u))}}return n}static serialize(t){Array.isArray(t)||(t=bt.legacyDatasetToQuads(t));let n=[];for(let r of t)n.push(bt.serializeQuad(r));return n.sort().join("")}static serializeQuadComponents(t,n,r,s){let a="";return t.termType===ue?a+=`<${t.value}>`:a+=`${t.value}`,a+=` <${n.value}> `,r.termType===ue?a+=`<${r.value}>`:r.termType===Ae?a+=r.value:(a+=`"${cs(r.value)}"`,r.datatype.value===Vt?r.language&&(a+=`@${r.language}`):r.datatype.value!==Gt&&(a+=`^^<${r.datatype.value}>`)),s.termType===ue?a+=` <${s.value}>`:s.termType===Ae&&(a+=` ${s.value}`),a+=` .
`,a}static serializeQuad(t){return bt.serializeQuadComponents(t.subject,t.predicate,t.object,t.graph)}static legacyDatasetToQuads(t){let n=[],r={"blank node":Ae,IRI:ue,literal:vt};for(let s in t)t[s].forEach(i=>{let o={};for(let u in i){let d=i[u],p={termType:r[d.type],value:d.value};p.termType===vt&&(p.datatype={termType:ue},"datatype"in d&&(p.datatype.value=d.datatype),"language"in d?("datatype"in d||(p.datatype.value=Vt),p.language=d.language):"datatype"in d||(p.datatype.value=Gt)),o[u]=p}s==="@default"?o.graph={termType:ir,value:""}:o.graph={termType:s.startsWith("_:")?Ae:ue,value:s},n.push(o)});return n}};function os(e,t){return!(e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType)||!(e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value)?!1:e.object.termType!==vt?!0:e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value}var ls=/["\\\n\r]/g;function cs(e){return e.replace(ls,function(t){switch(t){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}var us=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function ds(e){return e.replace(us,function(t,n,r,s){if(n)switch(n){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(s)throw new Error("Unsupported U escape")})}});var Xt=j((_o,lr)=>{"use strict";var ar=mt(),fs=et(),ps=zt(),or=wt();lr.exports=class{constructor({createMessageDigest:t=()=>new fs("sha256"),canonicalIdMap:n=new Map,maxDeepIterations:r=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new ar("_:c14n",n),this.createMessageDigest=t,this.maxDeepIterations=r,this.quads=null,this.deepIterations=null}main(t){return E(this,null,function*(){this.deepIterations=new Map,this.quads=t;for(let u of t)this._addBlankNodeQuadInfo({quad:u,component:u.subject}),this._addBlankNodeQuadInfo({quad:u,component:u.object}),this._addBlankNodeQuadInfo({quad:u,component:u.graph});let n=new Map,r=[...this.blankNodeInfo.keys()],s=0;for(let u of r)++s%100===0&&(yield this._yield()),yield this._hashAndTrackBlankNode({id:u,hashToBlankNodes:n});let a=[...n.keys()].sort(),i=[];for(let u of a){let d=n.get(u);if(d.length>1){i.push(d);continue}let p=d[0];this.canonicalIssuer.getId(p)}for(let u of i){let d=[];for(let p of u){if(this.canonicalIssuer.hasId(p))continue;let g=new ar("_:b");g.getId(p);let y=yield this.hashNDegreeQuads(p,g);d.push(y)}d.sort(hs);for(let p of d){let g=p.issuer.getOldIds();for(let y of g)this.canonicalIssuer.getId(y)}}let o=[];for(let u of this.quads){let d=or.serializeQuadComponents(this._componentWithCanonicalId(u.subject),u.predicate,this._componentWithCanonicalId(u.object),this._componentWithCanonicalId(u.graph));o.push(d)}return o.sort(),o.join("")})}hashFirstDegreeQuads(t){return E(this,null,function*(){let n=[],r=this.blankNodeInfo.get(t),s=r.quads;for(let i of s){let o={subject:null,predicate:i.predicate,object:null,graph:null};o.subject=this.modifyFirstDegreeComponent(t,i.subject,"subject"),o.object=this.modifyFirstDegreeComponent(t,i.object,"object"),o.graph=this.modifyFirstDegreeComponent(t,i.graph,"graph"),n.push(or.serializeQuad(o))}n.sort();let a=this.createMessageDigest();for(let i of n)a.update(i);return r.hash=yield a.digest(),r.hash})}hashRelatedBlankNode(t,n,r,s){return E(this,null,function*(){let a;this.canonicalIssuer.hasId(t)?a=this.canonicalIssuer.getId(t):r.hasId(t)?a=r.getId(t):a=this.blankNodeInfo.get(t).hash;let i=this.createMessageDigest();return i.update(s),s!=="g"&&i.update(this.getRelatedPredicate(n)),i.update(a),i.digest()})}hashNDegreeQuads(t,n){return E(this,null,function*(){let r=this.deepIterations.get(t)||0;if(r>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(t,r+1);let s=this.createMessageDigest(),a=yield this.createHashToRelated(t,n),i=[...a.keys()].sort();for(let o of i){s.update(o);let u="",d,p=new ps(a.get(o)),g=0;for(;p.hasNext();){let y=p.next();++g%3===0&&(yield this._yield());let l=n.clone(),c="",f=[],m=!1;for(let h of y)if(this.canonicalIssuer.hasId(h)?c+=this.canonicalIssuer.getId(h):(l.hasId(h)||f.push(h),c+=l.getId(h)),u.length!==0&&c>u){m=!0;break}if(!m){for(let h of f){let v=yield this.hashNDegreeQuads(h,l);if(c+=l.getId(h),c+=`<${v.hash}>`,l=v.issuer,u.length!==0&&c>u){m=!0;break}}m||(u.length===0||c<u)&&(u=c,d=l)}}s.update(u),n=d}return{hash:yield s.digest(),issuer:n}})}modifyFirstDegreeComponent(t,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return`<${t.predicate.value}>`}createHashToRelated(t,n){return E(this,null,function*(){let r=new Map,s=this.blankNodeInfo.get(t).quads,a=0;for(let i of s)++a%100===0&&(yield this._yield()),yield Promise.all([this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:t,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:t,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:t,issuer:n,hashToRelated:r})]);return r})}_hashAndTrackBlankNode(r){return E(this,arguments,function*({id:t,hashToBlankNodes:n}){let s=yield this.hashFirstDegreeQuads(t),a=n.get(s);a?a.push(t):n.set(s,[t])})}_addBlankNodeQuadInfo({quad:t,component:n}){if(n.termType!=="BlankNode")return;let r=n.value,s=this.blankNodeInfo.get(r);s?s.quads.add(t):this.blankNodeInfo.set(r,{quads:new Set([t]),hash:null})}_addRelatedBlankNodeHash(o){return E(this,arguments,function*({quad:t,component:n,position:r,id:s,issuer:a,hashToRelated:i}){if(!(n.termType==="BlankNode"&&n.value!==s))return;let u=n.value,d=yield this.hashRelatedBlankNode(u,t,a,r),p=i.get(d);p?p.push(u):i.set(d,[u])})}_componentWithCanonicalId(t){return t.termType==="BlankNode"&&!t.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(t.value)}:t}_yield(){return E(this,null,function*(){return new Promise(t=>setImmediate(t))})}};function hs(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}});var ur=j((So,cr)=>{"use strict";var gs=et(),ys=Xt();cr.exports=class extends ys{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new gs("sha1")}modifyFirstDegreeComponent(t,n,r){return n.termType!=="BlankNode"?n:r==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:n.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return t.predicate.value}createHashToRelated(t,n){return E(this,null,function*(){let r=new Map,s=this.blankNodeInfo.get(t).quads,a=0;for(let i of s){let o,u;if(i.subject.termType==="BlankNode"&&i.subject.value!==t)u=i.subject.value,o="p";else if(i.object.termType==="BlankNode"&&i.object.value!==t)u=i.object.value,o="r";else continue;++a%100===0&&(yield this._yield());let d=yield this.hashRelatedBlankNode(u,i,n,o),p=r.get(d);p?p.push(u):r.set(d,[u])}return r})}}});var $t=j((Oo,pr)=>{"use strict";var dr=mt(),ms=et(),vs=zt(),fr=wt();pr.exports=class{constructor({createMessageDigest:t=()=>new ms("sha256"),canonicalIdMap:n=new Map,maxDeepIterations:r=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new dr("_:c14n",n),this.createMessageDigest=t,this.maxDeepIterations=r,this.quads=null,this.deepIterations=null}main(t){this.deepIterations=new Map,this.quads=t;for(let o of t)this._addBlankNodeQuadInfo({quad:o,component:o.subject}),this._addBlankNodeQuadInfo({quad:o,component:o.object}),this._addBlankNodeQuadInfo({quad:o,component:o.graph});let n=new Map,r=[...this.blankNodeInfo.keys()];for(let o of r)this._hashAndTrackBlankNode({id:o,hashToBlankNodes:n});let s=[...n.keys()].sort(),a=[];for(let o of s){let u=n.get(o);if(u.length>1){a.push(u);continue}let d=u[0];this.canonicalIssuer.getId(d)}for(let o of a){let u=[];for(let d of o){if(this.canonicalIssuer.hasId(d))continue;let p=new dr("_:b");p.getId(d);let g=this.hashNDegreeQuads(d,p);u.push(g)}u.sort(bs);for(let d of u){let p=d.issuer.getOldIds();for(let g of p)this.canonicalIssuer.getId(g)}}let i=[];for(let o of this.quads){let u=fr.serializeQuadComponents(this._componentWithCanonicalId({component:o.subject}),o.predicate,this._componentWithCanonicalId({component:o.object}),this._componentWithCanonicalId({component:o.graph}));i.push(u)}return i.sort(),i.join("")}hashFirstDegreeQuads(t){let n=[],r=this.blankNodeInfo.get(t),s=r.quads;for(let i of s){let o={subject:null,predicate:i.predicate,object:null,graph:null};o.subject=this.modifyFirstDegreeComponent(t,i.subject,"subject"),o.object=this.modifyFirstDegreeComponent(t,i.object,"object"),o.graph=this.modifyFirstDegreeComponent(t,i.graph,"graph"),n.push(fr.serializeQuad(o))}n.sort();let a=this.createMessageDigest();for(let i of n)a.update(i);return r.hash=a.digest(),r.hash}hashRelatedBlankNode(t,n,r,s){let a;this.canonicalIssuer.hasId(t)?a=this.canonicalIssuer.getId(t):r.hasId(t)?a=r.getId(t):a=this.blankNodeInfo.get(t).hash;let i=this.createMessageDigest();return i.update(s),s!=="g"&&i.update(this.getRelatedPredicate(n)),i.update(a),i.digest()}hashNDegreeQuads(t,n){let r=this.deepIterations.get(t)||0;if(r>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(t,r+1);let s=this.createMessageDigest(),a=this.createHashToRelated(t,n),i=[...a.keys()].sort();for(let o of i){s.update(o);let u="",d,p=new vs(a.get(o));for(;p.hasNext();){let g=p.next(),y=n.clone(),l="",c=[],f=!1;for(let m of g)if(this.canonicalIssuer.hasId(m)?l+=this.canonicalIssuer.getId(m):(y.hasId(m)||c.push(m),l+=y.getId(m)),u.length!==0&&l>u){f=!0;break}if(!f){for(let m of c){let h=this.hashNDegreeQuads(m,y);if(l+=y.getId(m),l+=`<${h.hash}>`,y=h.issuer,u.length!==0&&l>u){f=!0;break}}f||(u.length===0||l<u)&&(u=l,d=y)}}s.update(u),n=d}return{hash:s.digest(),issuer:n}}modifyFirstDegreeComponent(t,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return`<${t.predicate.value}>`}createHashToRelated(t,n){let r=new Map,s=this.blankNodeInfo.get(t).quads;for(let a of s)this._addRelatedBlankNodeHash({quad:a,component:a.subject,position:"s",id:t,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:a,component:a.object,position:"o",id:t,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:a,component:a.graph,position:"g",id:t,issuer:n,hashToRelated:r});return r}_hashAndTrackBlankNode({id:t,hashToBlankNodes:n}){let r=this.hashFirstDegreeQuads(t),s=n.get(r);s?s.push(t):n.set(r,[t])}_addBlankNodeQuadInfo({quad:t,component:n}){if(n.termType!=="BlankNode")return;let r=n.value,s=this.blankNodeInfo.get(r);s?s.quads.add(t):this.blankNodeInfo.set(r,{quads:new Set([t]),hash:null})}_addRelatedBlankNodeHash({quad:t,component:n,position:r,id:s,issuer:a,hashToRelated:i}){if(!(n.termType==="BlankNode"&&n.value!==s))return;let o=n.value,u=this.hashRelatedBlankNode(o,t,a,r),d=i.get(u);d?d.push(o):i.set(u,[o])}_componentWithCanonicalId({component:t}){return t.termType==="BlankNode"&&!t.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(t.value)}:t}};function bs(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}});var gr=j((Lo,hr)=>{"use strict";var ws=et(),xs=$t();hr.exports=class extends xs{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new ws("sha1")}modifyFirstDegreeComponent(t,n,r){return n.termType!=="BlankNode"?n:r==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:n.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return t.predicate.value}createHashToRelated(t,n){let r=new Map,s=this.blankNodeInfo.get(t).quads;for(let a of s){let i,o;if(a.subject.termType==="BlankNode"&&a.subject.value!==t)o=a.subject.value,i="p";else if(a.object.termType==="BlankNode"&&a.object.value!==t)o=a.object.value,i="r";else continue;let u=this.hashRelatedBlankNode(o,a,n,i),d=r.get(u);d?d.push(o):r.set(u,[o])}return r}}});var yr=j(()=>{"use strict"});var vr=j(ke=>{"use strict";var Is=Xt(),_s=ur(),Es=$t(),Ns=gr(),Te;try{Te=yr()}catch{}function mr(e){return Array.isArray(e)?e:ke.NQuads.legacyDatasetToQuads(e)}ke.NQuads=wt();ke.IdentifierIssuer=mt();ke._rdfCanonizeNative=function(e){return e&&(Te=e),Te};ke.canonize=function(e,t){return E(this,null,function*(){let n=mr(e,t);if(t.useNative){if(!Te)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((r,s)=>Te.canonize(n,t,(a,i)=>a?s(a):r(i)))}if(t.algorithm==="URDNA2015")return new Is(t).main(n);if(t.algorithm==="URGNA2012"){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new _s(t).main(n)}throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")})};ke._canonizeSync=function(e,t){let n=mr(e,t);if(t.useNative){if(!Te)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return Te.canonizeSync(n,t)}if(t.algorithm==="URDNA2015")return new Es(t).main(n);if(t.algorithm==="URGNA2012"){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new Ns(t).main(n)}throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}});var xt=j((qo,br)=>{"use strict";br.exports=vr()});var Q=j((Fo,wr)=>{"use strict";var ie={};wr.exports=ie;ie.isArray=Array.isArray;ie.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]";ie.isDouble=e=>ie.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21);ie.isEmptyObject=e=>ie.isObject(e)&&Object.keys(e).length===0;ie.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]";ie.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e);ie.isObject=e=>Object.prototype.toString.call(e)==="[object Object]";ie.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]";ie.isUndefined=e=>typeof e>"u"});var ge=j((Jo,xr)=>{"use strict";var Me=Q(),we={};xr.exports=we;we.isSubject=e=>Me.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)?Object.keys(e).length>1||!("@id"in e):!1;we.isSubjectReference=e=>Me.isObject(e)&&Object.keys(e).length===1&&"@id"in e;we.isValue=e=>Me.isObject(e)&&"@value"in e;we.isList=e=>Me.isObject(e)&&"@list"in e;we.isGraph=e=>Me.isObject(e)&&"@graph"in e&&Object.keys(e).filter(t=>t!=="@id"&&t!=="@index").length===1;we.isSimpleGraph=e=>we.isGraph(e)&&!("@id"in e);we.isBlankNode=e=>{if(Me.isObject(e)){if("@id"in e){let t=e["@id"];return!Me.isString(t)||t.indexOf("_:")===0}return Object.keys(e).length===0||!("@value"in e||"@set"in e||"@list"in e)}return!1}});var K=j((Bo,Ir)=>{"use strict";Ir.exports=class extends Error{constructor(t="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(t),this.name=n,this.message=t,this.details=r}}});var Y=j((Po,Nr)=>{"use strict";var tt=ge(),P=Q(),Er=xt().IdentifierIssuer,Ss=K(),js=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,Ds=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,Os=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,Rs=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,Ls=/^@[a-zA-Z]+$/,_r={headers:{accept:"application/ld+json, application/json"}},O={};Nr.exports=O;O.IdentifierIssuer=Er;O.REGEX_BCP47=js;O.REGEX_KEYWORD=Ls;O.clone=function(e){if(e&&typeof e=="object"){let t;if(P.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=O.clone(e[n])}else if(e instanceof Map){t=new Map;for(let[n,r]of e)t.set(n,O.clone(r))}else if(e instanceof Set){t=new Set;for(let n of e)t.add(O.clone(n))}else if(P.isObject(e)){t={};for(let n in e)t[n]=O.clone(e[n])}else t=e.toString();return t}return e};O.asArray=function(e){return Array.isArray(e)?e:[e]};O.buildHeaders=(e={})=>{if(Object.keys(e).some(n=>n.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+_r.headers.accept+'" is supported.');return Object.assign({Accept:_r.headers.accept},e)};O.parseLinkHeader=e=>{let t={},n=e.match(Ds);for(let r=0;r<n.length;++r){let s=n[r].match(Os);if(!s)continue;let a={target:s[1]},i=s[2];for(;s=Rs.exec(i);)a[s[1]]=s[2]===void 0?s[3]:s[2];let o=a.rel||"";Array.isArray(t[o])?t[o].push(a):t.hasOwnProperty(o)?t[o]=[t[o],a]:t[o]=a}return t};O.validateTypeValue=(e,t)=>{if(!P.isString(e)&&!(P.isArray(e)&&e.every(n=>P.isString(n)))){if(t&&P.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&O.asArray(e["@default"]).every(n=>P.isString(n)))return}throw new Ss('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}};O.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){let n=e[t];return!P.isArray(n)||n.length>0}return!1};O.hasValue=(e,t,n)=>{if(O.hasProperty(e,t)){let r=e[t],s=tt.isList(r);if(P.isArray(r)||s){s&&(r=r["@list"]);for(let a=0;a<r.length;++a)if(O.compareValues(n,r[a]))return!0}else if(!P.isArray(n))return O.compareValues(n,r)}return!1};O.addValue=(e,t,n,r)=>{if(r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)e[t]=n;else if(P.isArray(n)){n.length===0&&r.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),r.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let s=0;s<n.length;++s)O.addValue(e,t,n[s],r)}else if(e.hasOwnProperty(t)){let s=!r.allowDuplicate&&O.hasValue(e,t,n);!P.isArray(e[t])&&(!s||r.propertyIsArray)&&(e[t]=[e[t]]),s||(r.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=r.propertyIsArray?[n]:n};O.getValues=(e,t)=>[].concat(e[t]||[]);O.removeProperty=(e,t)=>{delete e[t]};O.removeValue=(e,t,n,r)=>{r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1);let s=O.getValues(e,t).filter(a=>!O.compareValues(a,n));s.length===0?O.removeProperty(e,t):s.length===1&&!r.propertyIsArray?e[t]=s[0]:e[t]=s};O.relabelBlankNodes=(e,t)=>{t=t||{};let n=t.issuer||new Er("_:b");return It(n,e)};O.compareValues=(e,t)=>e===t||tt.isValue(e)&&tt.isValue(t)&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"]?!0:P.isObject(e)&&"@id"in e&&P.isObject(t)&&"@id"in t?e["@id"]===t["@id"]:!1;O.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1;function It(e,t){if(P.isArray(t))for(let n=0;n<t.length;++n)t[n]=It(e,t[n]);else if(tt.isList(t))t["@list"]=It(e,t["@list"]);else if(P.isObject(t)){tt.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));let n=Object.keys(t).sort();for(let r=0;r<n.length;++r){let s=n[r];s!=="@id"&&(t[s]=It(e,t[s]))}}return t}});var _t=j((Uo,Sr)=>{"use strict";var de="http://www.w3.org/1999/02/22-rdf-syntax-ns#",nt="http://www.w3.org/2001/XMLSchema#";Sr.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:de,RDF_LIST:de+"List",RDF_FIRST:de+"first",RDF_REST:de+"rest",RDF_NIL:de+"nil",RDF_TYPE:de+"type",RDF_PLAIN_LITERAL:de+"PlainLiteral",RDF_XML_LITERAL:de+"XMLLiteral",RDF_JSON_LITERAL:de+"JSON",RDF_OBJECT:de+"object",RDF_LANGSTRING:de+"langString",XSD:nt,XSD_BOOLEAN:nt+"boolean",XSD_DOUBLE:nt+"double",XSD_INTEGER:nt+"integer",XSD_STRING:nt+"string"}});var Qt=j((Vo,jr)=>{"use strict";jr.exports=class{constructor(){this._requests={}}wrapLoader(t){let n=this;return n._loader=t,function(){return n.add.apply(n,arguments)}}add(t){return E(this,null,function*(){let n=this._requests[t];if(n)return Promise.resolve(n);n=this._requests[t]=this._loader(t);try{return yield n}finally{delete this._requests[t]}})}}});var xe=j((Xo,Dr)=>{"use strict";var Et=Q(),U={};Dr.exports=U;U.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};U.parse=(e,t)=>{let n={},r=U.parsers[t||"full"],s=r.regex.exec(e),a=r.keys.length;for(;a--;)n[r.keys[a]]=s[a]===void 0?null:s[a];return(n.scheme==="https"&&n.port==="443"||n.scheme==="http"&&n.port==="80")&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=U.removeDotSegments(n.path),n};U.prependBase=(e,t)=>{if(e===null||U.isAbsolute(t))return t;(!e||Et.isString(e))&&(e=U.parse(e||""));let n=U.parse(t),r={protocol:e.protocol||""};if(n.authority!==null)r.authority=n.authority,r.path=n.path,r.query=n.query;else if(r.authority=e.authority,n.path==="")r.path=e.path,n.query!==null?r.query=n.query:r.query=e.query;else{if(n.path.indexOf("/")===0)r.path=n.path;else{let a=e.path;a=a.substr(0,a.lastIndexOf("/")+1),(a.length>0||e.authority)&&a.substr(-1)!=="/"&&(a+="/"),a+=n.path,r.path=a}r.query=n.query}n.path!==""&&(r.path=U.removeDotSegments(r.path));let s=r.protocol;return r.authority!==null&&(s+="//"+r.authority),s+=r.path,r.query!==null&&(s+="?"+r.query),n.fragment!==null&&(s+="#"+n.fragment),s===""&&(s="./"),s};U.removeBase=(e,t)=>{if(e===null)return t;(!e||Et.isString(e))&&(e=U.parse(e||""));let n="";if(e.href!==""?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),t.indexOf(n)!==0)return t;let r=U.parse(t.substr(n.length)),s=e.normalizedPath.split("/"),a=r.normalizedPath.split("/"),i=r.fragment||r.query?0:1;for(;s.length>0&&a.length>i&&s[0]===a[0];)s.shift(),a.shift();let o="";if(s.length>0){s.pop();for(let u=0;u<s.length;++u)o+="../"}return o+=a.join("/"),r.query!==null&&(o+="?"+r.query),r.fragment!==null&&(o+="#"+r.fragment),o===""&&(o="./"),o};U.removeDotSegments=e=>{if(e.length===0)return"";let t=e.split("/"),n=[];for(;t.length>0;){let r=t.shift(),s=t.length===0;if(r==="."){s&&n.push("");continue}if(r===".."){n.pop(),s&&n.push("");continue}n.push(r)}return e[0]==="/"&&n.length>0&&n[0]!==""&&n.unshift(""),n.length===1&&n[0]===""?"/":n.join("/")};var As=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;U.isAbsolute=e=>Et.isString(e)&&As.test(e);U.isRelative=e=>Et.isString(e)});var Rr=j(($o,Or)=>{"use strict";var{parseLinkHeader:Ts,buildHeaders:ks}=Y(),{LINK_HEADER_CONTEXT:Ms}=_t(),rt=K(),qs=Qt(),{prependBase:Fs}=xe(),Js=/(^|(\r\n))link:/i;Or.exports=({secure:e,headers:t={},xhr:n}={headers:{}})=>{return t=ks(t),new qs().wrapLoader(s);function s(a){return E(this,null,function*(){if(a.indexOf("http:")!==0&&a.indexOf("https:")!==0)throw new rt('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a});if(e&&a.indexOf("https")!==0)throw new rt(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:a});let i;try{i=yield Hs(n,a,t)}catch(g){throw new rt("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:g})}if(i.status>=400)throw new rt("URL could not be dereferenced: "+i.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:a,httpStatusCode:i.status});let o={contextUrl:null,documentUrl:a,document:i.response},u=null,d=i.getResponseHeader("Content-Type"),p;if(Js.test(i.getAllResponseHeaders())&&(p=i.getResponseHeader("Link")),p&&d!=="application/ld+json"){let g=Ts(p),y=g[Ms];if(Array.isArray(y))throw new rt("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a});y&&(o.contextUrl=y.target),u=g.alternate,u&&u.type=="application/ld+json"&&!(d||"").match(/^application\/(\w*\+)?json$/)&&(o=yield s(Fs(a,u.target)))}return o})}};function Hs(e,t,n){e=e||XMLHttpRequest;let r=new e;return new Promise((s,a)=>{r.onload=()=>s(r),r.onerror=i=>a(i),r.open("GET",t,!0);for(let i in n)r.setRequestHeader(i,n[i]);r.send()})}});var Ar=j((Co,Lr)=>{"use strict";var Bs=Rr(),Ct={};Lr.exports=Ct;Ct.setupDocumentLoaders=function(e){typeof XMLHttpRequest<"u"&&(e.documentLoaders.xhr=Bs,e.useDocumentLoader("xhr"))};Ct.setupGlobals=function(e){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})}});var kr=j((Wo,Tr)=>{"use strict";Tr.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var qr=j((Ko,Mr)=>{"use strict";Mr.exports=D;D.Node=qe;D.create=D;function D(e){var t=this;if(t instanceof D||(t=new D),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}D.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};D.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};D.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};D.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Us(this,arguments[e]);return this.length};D.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)zs(this,arguments[e]);return this.length};D.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};D.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};D.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};D.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};D.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};D.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};D.prototype.map=function(e,t){t=t||this;for(var n=new D,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};D.prototype.mapReverse=function(e,t){t=t||this;for(var n=new D,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};D.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;r!==null;s++)n=e(n,r.value,s),r=r.next;return n};D.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;r!==null;s--)n=e(n,r.value,s),r=r.prev;return n};D.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};D.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};D.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new D;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,s=this.head;s!==null&&r<e;r++)s=s.next;for(;s!==null&&r<t;r++,s=s.next)n.push(s.value);return n};D.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new D;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,s=this.tail;s!==null&&r>t;r--)s=s.prev;for(;s!==null&&r>e;r--,s=s.prev)n.push(s.value);return n};D.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,s=this.head;s!==null&&r<e;r++)s=s.next;for(var a=[],r=0;s&&r<t;r++)a.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var r=0;r<n.length;r++)s=Ps(this,s,n[r]);return a};D.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Ps(e,t,n){var r=t===e.head?new qe(n,null,t,e):new qe(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Us(e,t){e.tail=new qe(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function zs(e,t){e.head=new qe(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function qe(e,t,n,r){if(!(this instanceof qe))return new qe(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{kr()(D)}catch{}});var en=j((Yo,Br)=>{"use strict";var Vs=qr(),Fe=Symbol("max"),_e=Symbol("length"),$e=Symbol("lengthCalculator"),st=Symbol("allowStale"),Je=Symbol("maxAge"),Ie=Symbol("dispose"),Fr=Symbol("noDisposeOnSet"),q=Symbol("lruList"),fe=Symbol("cache"),Hr=Symbol("updateAgeOnGet"),Wt=()=>1,Yt=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let n=this[Fe]=t.max||1/0,r=t.length||Wt;if(this[$e]=typeof r!="function"?Wt:r,this[st]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Je]=t.maxAge||0,this[Ie]=t.dispose,this[Fr]=t.noDisposeOnSet||!1,this[Hr]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Fe]=t||1/0,it(this)}get max(){return this[Fe]}set allowStale(t){this[st]=!!t}get allowStale(){return this[st]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Je]=t,it(this)}get maxAge(){return this[Je]}set lengthCalculator(t){typeof t!="function"&&(t=Wt),t!==this[$e]&&(this[$e]=t,this[_e]=0,this[q].forEach(n=>{n.length=this[$e](n.value,n.key),this[_e]+=n.length})),it(this)}get lengthCalculator(){return this[$e]}get length(){return this[_e]}get itemCount(){return this[q].length}rforEach(t,n){n=n||this;for(let r=this[q].tail;r!==null;){let s=r.prev;Jr(this,t,r,n),r=s}}forEach(t,n){n=n||this;for(let r=this[q].head;r!==null;){let s=r.next;Jr(this,t,r,n),r=s}}keys(){return this[q].toArray().map(t=>t.key)}values(){return this[q].toArray().map(t=>t.value)}reset(){this[Ie]&&this[q]&&this[q].length&&this[q].forEach(t=>this[Ie](t.key,t.value)),this[fe]=new Map,this[q]=new Vs,this[_e]=0}dump(){return this[q].map(t=>Nt(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[q]}set(t,n,r){if(r=r||this[Je],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let s=r?Date.now():0,a=this[$e](n,t);if(this[fe].has(t)){if(a>this[Fe])return Qe(this,this[fe].get(t)),!1;let u=this[fe].get(t).value;return this[Ie]&&(this[Fr]||this[Ie](t,u.value)),u.now=s,u.maxAge=r,u.value=n,this[_e]+=a-u.length,u.length=a,this.get(t),it(this),!0}let i=new Zt(t,n,a,s,r);return i.length>this[Fe]?(this[Ie]&&this[Ie](t,n),!1):(this[_e]+=i.length,this[q].unshift(i),this[fe].set(t,this[q].head),it(this),!0)}has(t){if(!this[fe].has(t))return!1;let n=this[fe].get(t).value;return!Nt(this,n)}get(t){return Kt(this,t,!0)}peek(t){return Kt(this,t,!1)}pop(){let t=this[q].tail;return t?(Qe(this,t),t.value):null}del(t){Qe(this,this[fe].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let s=t[r],a=s.e||0;if(a===0)this.set(s.k,s.v);else{let i=a-n;i>0&&this.set(s.k,s.v,i)}}}prune(){this[fe].forEach((t,n)=>Kt(this,n,!1))}},Kt=(e,t,n)=>{let r=e[fe].get(t);if(r){let s=r.value;if(Nt(e,s)){if(Qe(e,r),!e[st])return}else n&&(e[Hr]&&(r.value.now=Date.now()),e[q].unshiftNode(r));return s.value}},Nt=(e,t)=>{if(!t||!t.maxAge&&!e[Je])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Je]&&n>e[Je]},it=e=>{if(e[_e]>e[Fe])for(let t=e[q].tail;e[_e]>e[Fe]&&t!==null;){let n=t.prev;Qe(e,t),t=n}},Qe=(e,t)=>{if(t){let n=t.value;e[Ie]&&e[Ie](n.key,n.value),e[_e]-=n.length,e[fe].delete(n.key),e[q].removeNode(t)}},Zt=class{constructor(t,n,r,s,a){this.key=t,this.value=n,this.length=r,this.now=s,this.maxAge=a||0}},Jr=(e,t,n,r)=>{let s=n.value;Nt(e,s)&&(Qe(e,n),e[st]||(s=void 0)),s&&t.call(r,s.value,s.key,e)};Br.exports=Yt});var Ur=j((el,Pr)=>{"use strict";var Gs=en(),Xs=10;Pr.exports=class{constructor({document:t}){this.document=t,this.cache=new Gs({max:Xs})}getProcessed(t){return this.cache.get(t)}setProcessed(t,n){this.cache.set(t,n)}}});var Xr=j((nl,Gr)=>{"use strict";var{isArray:tn,isObject:ot,isString:St}=Q(),{asArray:$s}=Y(),{prependBase:nn}=xe(),at=K(),zr=Ur(),Vr=10;Gr.exports=class{constructor({sharedCache:t}){this.perOpCache=new Map,this.sharedCache=t}resolve(i){return E(this,arguments,function*({activeCtx:t,context:n,documentLoader:r,base:s,cycles:a=new Set}){n&&ot(n)&&n["@context"]&&(n=n["@context"]),n=$s(n);let o=[];for(let u of n){if(St(u)){let g=this._get(u);g||(g=yield this._resolveRemoteContext({activeCtx:t,url:u,documentLoader:r,base:s,cycles:a})),tn(g)?o.push(...g):o.push(g);continue}if(u===null){o.push(new zr({document:null}));continue}ot(u)||Qs(n);let d=JSON.stringify(u),p=this._get(d);p||(p=new zr({document:u}),this._cacheResolvedContext({key:d,resolved:p,tag:"static"})),o.push(p)}return o})}_get(t){let n=this.perOpCache.get(t);if(!n){let r=this.sharedCache.get(t);r&&(n=r.get("static"),n&&this.perOpCache.set(t,n))}return n}_cacheResolvedContext({key:t,resolved:n,tag:r}){if(this.perOpCache.set(t,n),r!==void 0){let s=this.sharedCache.get(t);s||(s=new Map,this.sharedCache.set(t,s)),s.set(r,n)}return n}_resolveRemoteContext(i){return E(this,arguments,function*({activeCtx:t,url:n,documentLoader:r,base:s,cycles:a}){n=nn(s,n);let{context:o,remoteDoc:u}=yield this._fetchContext({activeCtx:t,url:n,documentLoader:r,cycles:a});s=u.documentUrl||n,rn({context:o,base:s});let d=yield this.resolve({activeCtx:t,context:o,documentLoader:r,base:s,cycles:a});return this._cacheResolvedContext({key:n,resolved:d,tag:u.tag}),d})}_fetchContext(a){return E(this,arguments,function*({activeCtx:t,url:n,documentLoader:r,cycles:s}){if(s.size>Vr)throw new at("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:t.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:Vr});if(s.has(n))throw new at("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:t.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:n});s.add(n);let i,o;try{o=yield r(n),i=o.document||null,St(i)&&(i=JSON.parse(i))}catch(u){throw new at("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:n,cause:u})}if(!ot(i))throw new at("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:n});return"@context"in i?i={"@context":i["@context"]}:i={"@context":{}},o.contextUrl&&(tn(i["@context"])||(i["@context"]=[i["@context"]]),i["@context"].push(o.contextUrl)),{context:i,remoteDoc:o}})}};function Qs(e){throw new at("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function rn({context:e,base:t}){if(!e)return;let n=e["@context"];if(St(n)){e["@context"]=nn(t,n);return}if(tn(n)){for(let r=0;r<n.length;++r){let s=n[r];if(St(s)){n[r]=nn(t,s);continue}ot(s)&&rn({context:{"@context":s},base:t})}return}if(ot(n))for(let r in n)rn({context:n[r],base:t})}});var Qr=j((il,$r)=>{"use strict";$r.exports=xt().NQuads});var Ce=j((sl,Kr)=>{"use strict";var sn=K(),{isArray:Cs}=Q(),{asArray:Cr}=Y(),Z={};Kr.exports=Z;Z.defaultEventHandler=null;Z.setupEventHandler=({options:e={}})=>{let t=[].concat(e.safe?Z.safeEventHandler:[],e.eventHandler?Cr(e.eventHandler):[],Z.defaultEventHandler?Z.defaultEventHandler:[]);return t.length===0?null:t};Z.handleEvent=({event:e,options:t})=>{Wr({event:e,handlers:t.eventHandler})};function Wr({event:e,handlers:t}){let n=!0;for(let r=0;n&&r<t.length;++r){n=!1;let s=t[r];if(Cs(s))n=Wr({event:e,handlers:s});else if(typeof s=="function")s({event:e,next:()=>{n=!0}});else if(typeof s=="object")e.code in s?s[e.code]({event:e,next:()=>{n=!0}}):n=!0;else throw new sn("Invalid event handler.","jsonld.InvalidEventHandler",{event:e})}return n}var Ws=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);Z.safeEventHandler=function({event:t,next:n}){if(t.level==="warning"&&Ws.has(t.code))throw new sn("Safe mode validation error.","jsonld.ValidationError",{event:t});n()};Z.logEventHandler=function({event:t,next:n}){console.log(`EVENT: ${t.message}`,{event:t}),n()};Z.logWarningEventHandler=function({event:t,next:n}){t.level==="warning"&&console.warn(`WARNING: ${t.message}`,{event:t}),n()};Z.unhandledEventHandler=function({event:t}){throw new sn("No handler for event.","jsonld.UnhandledEvent",{event:t})};Z.setDefaultEventHandler=function({eventHandler:e}={}){Z.defaultEventHandler=e?Cr(e):null}});var je=j((ti,ni)=>{"use strict";var Yr=Y(),N=K(),{isArray:Zr,isObject:Se,isString:C,isUndefined:Ks}=Q(),{isAbsolute:He,isRelative:Ys,prependBase:lt}=xe(),{handleEvent:Ke}=Ce(),{REGEX_BCP47:Zs,REGEX_KEYWORD:Dt,asArray:ei,compareShortestLeast:ea}=Y(),jt=new Map,ta=1e4,T={};ni.exports=T;T.process=i=>E(ti,[i],function*({activeCtx:e,localCtx:t,options:n,propagate:r=!0,overrideProtected:s=!1,cycles:a=new Set}){if(Se(t)&&"@context"in t&&Zr(t["@context"])&&(t=t["@context"]),ei(t).length===0)return e;let u=[],d=[({event:l,next:c})=>{u.push(l),c()}];n.eventHandler&&d.push(n.eventHandler);let p=n;n=W(J({},n),{eventHandler:d});let g=yield n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});Se(g[0].document)&&typeof g[0].document["@propagate"]=="boolean"&&(r=g[0].document["@propagate"]);let y=e;!r&&!y.previousContext&&(y=y.clone(),y.previousContext=e);for(let l of g){let{document:c}=l;if(e=y,c===null){if(!s&&Object.keys(e.protected).length!==0)throw new N("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});y=e=T.getInitialContext(n).clone();continue}let f=l.getProcessed(e);if(f){if(p.eventHandler)for(let h of f.events)Ke({event:h,options:p});y=e=f.context;continue}if(Se(c)&&"@context"in c&&(c=c["@context"]),!Se(c))throw new N("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:c});y=y.clone();let m=new Map;if("@version"in c){if(c["@version"]!==1.1)throw new N("Unsupported JSON-LD version: "+c["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:c});if(e.processingMode&&e.processingMode==="json-ld-1.0")throw new N("@version: "+c["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:c});y.processingMode="json-ld-1.1",y["@version"]=c["@version"],m.set("@version",!0)}if(y.processingMode=y.processingMode||e.processingMode,"@base"in c){let h=c["@base"];if(!(h===null||He(h)))if(Ys(h))h=lt(y["@base"],h);else throw new N('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:c});y["@base"]=h,m.set("@base",!0)}if("@vocab"in c){let h=c["@vocab"];if(h===null)delete y["@vocab"];else if(C(h)){if(!He(h)&&T.processingMode(y,1))throw new N('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:c});{let v=We(y,h,{vocab:!0,base:!0},void 0,void 0,n);He(v)||n.eventHandler&&Ke({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:v}},options:n}),y["@vocab"]=v}}else throw new N('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:c});m.set("@vocab",!0)}if("@language"in c){let h=c["@language"];if(h===null)delete y["@language"];else if(C(h))h.match(Zs)||n.eventHandler&&Ke({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:h}},options:n}),y["@language"]=h.toLowerCase();else throw new N('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:c});m.set("@language",!0)}if("@direction"in c){let h=c["@direction"];if(e.processingMode==="json-ld-1.0")throw new N("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:c});if(h===null)delete y["@direction"];else{if(h!=="ltr"&&h!=="rtl")throw new N('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:c});y["@direction"]=h}m.set("@direction",!0)}if("@propagate"in c){let h=c["@propagate"];if(e.processingMode==="json-ld-1.0")throw new N("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:c});if(typeof h!="boolean")throw new N("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});m.set("@propagate",!0)}if("@import"in c){let h=c["@import"];if(e.processingMode==="json-ld-1.0")throw new N("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:c});if(!C(h))throw new N("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});let v=yield n.contextResolver.resolve({activeCtx:e,context:h,documentLoader:n.documentLoader,base:n.base});if(v.length!==1)throw new N("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});let b=v[0].getProcessed(e);if(b)c=b;else{let x=v[0].document;if("@import"in x)throw new N("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(let w in x)c.hasOwnProperty(w)||(c[w]=x[w]);v[0].setProcessed(e,c)}m.set("@import",!0)}m.set("@protected",c["@protected"]||!1);for(let h in c)if(T.createTermDefinition({activeCtx:y,localCtx:c,term:h,defined:m,options:n,overrideProtected:s}),Se(c[h])&&"@context"in c[h]){let v=c[h]["@context"],b=!0;if(C(v)){let x=lt(n.base,v);a.has(x)?b=!1:a.add(x)}if(b)try{yield T.process({activeCtx:y.clone(),localCtx:c[h]["@context"],overrideProtected:!0,options:n,cycles:a})}catch{throw new N("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:c[h]["@context"],term:h})}}l.setProcessed(e,{context:y,events:u})}return y});T.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:r,options:s,overrideProtected:a=!1})=>{if(r.has(n)){if(r.get(n))return;throw new N("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}r.set(n,!1);let i;if(t.hasOwnProperty(n)&&(i=t[n]),n==="@type"&&Se(i)&&(i["@container"]||"@set")==="@set"&&T.processingMode(e,1.1)){let l=["@container","@id","@protected"],c=Object.keys(i);if(c.length===0||c.some(f=>!l.includes(f)))throw new N("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(T.isKeyword(n))throw new N("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(Dt)){s.eventHandler&&Ke({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:n}},options:s});return}else if(n==="")throw new N("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}let o=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let u=!1;if((C(i)||i===null)&&(u=!0,i={"@id":i}),!Se(i))throw new N("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});let d={};e.mappings.set(n,d),d.reverse=!1;let p=["@container","@id","@language","@reverse","@type"];T.processingMode(e,1.1)&&p.push("@context","@direction","@index","@nest","@prefix","@protected");for(let l in i)if(!p.includes(l))throw new N("Invalid JSON-LD syntax; a term definition must not contain "+l,"jsonld.SyntaxError",{code:"invalid term definition",context:t});let g=n.indexOf(":");if(d._termHasColon=g>0,"@reverse"in i){if("@id"in i)throw new N("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in i)throw new N("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});let l=i["@reverse"];if(!C(l))throw new N("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(l.match(Dt)){s.eventHandler&&Ke({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:l}},options:s}),o?e.mappings.set(n,o):e.mappings.delete(n);return}let c=We(e,l,{vocab:!0,base:!1},t,r,s);if(!He(c))throw new N("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});d["@id"]=c,d.reverse=!0}else if("@id"in i){let l=i["@id"];if(l&&!C(l))throw new N("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(l===null)d["@id"]=null;else if(!T.isKeyword(l)&&l.match(Dt)){s.eventHandler&&Ke({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:l}},options:s}),o?e.mappings.set(n,o):e.mappings.delete(n);return}else if(l!==n){if(l=We(e,l,{vocab:!0,base:!1},t,r,s),!He(l)&&!T.isKeyword(l))throw new N("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)){let c=new Map(r).set(n,!0);if(We(e,n,{vocab:!0,base:!1},t,c,s)!==l)throw new N("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})}d["@id"]=l,d._prefix=u&&!d._termHasColon&&l.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in d))if(d._termHasColon){let l=n.substr(0,g);if(t.hasOwnProperty(l)&&T.createTermDefinition({activeCtx:e,localCtx:t,term:l,defined:r,options:s}),e.mappings.has(l)){let c=n.substr(g+1);d["@id"]=e.mappings.get(l)["@id"]+c}else d["@id"]=n}else if(n==="@type")d["@id"]=n;else{if(!("@vocab"in e))throw new N("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});d["@id"]=e["@vocab"]+n}if((i["@protected"]===!0||r.get("@protected")===!0&&i["@protected"]!==!1)&&(e.protected[n]=!0,d.protected=!0),r.set(n,!0),"@type"in i){let l=i["@type"];if(!C(l))throw new N("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(l==="@json"||l==="@none"){if(T.processingMode(e,1))throw new N(`Invalid JSON-LD syntax; an @context @type value must not be "${l}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if(l!=="@id"&&l!=="@vocab"){if(l=We(e,l,{vocab:!0,base:!1},t,r,s),!He(l))throw new N("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(l.indexOf("_:")===0)throw new N("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}d["@type"]=l}if("@container"in i){let l=C(i["@container"])?[i["@container"]]:i["@container"]||[],c=["@list","@set","@index","@language"],f=!0,m=l.includes("@set");if(T.processingMode(e,1.1)){if(c.push("@graph","@id","@type"),l.includes("@list")){if(l.length!==1)throw new N("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(l.includes("@graph")){if(l.some(h=>h!=="@graph"&&h!=="@id"&&h!=="@index"&&h!=="@set"))throw new N("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else f&=l.length<=(m?2:1);if(l.includes("@type")&&(d["@type"]=d["@type"]||"@id",!["@id","@vocab"].includes(d["@type"])))throw new N("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else f&=!Zr(i["@container"]),f&=l.length<=1;if(f&=l.every(h=>c.includes(h)),f&=!(m&&l.includes("@list")),!f)throw new N("Invalid JSON-LD syntax; @context @container value must be one of the following: "+c.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(d.reverse&&!l.every(h=>["@index","@set"].includes(h)))throw new N("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});d["@container"]=l}if("@index"in i){if(!("@container"in i)||!d["@container"].includes("@index"))throw new N(`Invalid JSON-LD syntax; @index without @index in @container: "${i["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!C(i["@index"])||i["@index"].indexOf("@")===0)throw new N(`Invalid JSON-LD syntax; @index must expand to an IRI: "${i["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});d["@index"]=i["@index"]}if("@context"in i&&(d["@context"]=i["@context"]),"@language"in i&&!("@type"in i)){let l=i["@language"];if(l!==null&&!C(l))throw new N("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});l!==null&&(l=l.toLowerCase()),d["@language"]=l}if("@prefix"in i){if(n.match(/:|\//))throw new N("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(T.isKeyword(d["@id"]))throw new N("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(typeof i["@prefix"]=="boolean")d._prefix=i["@prefix"]===!0;else throw new N("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t})}if("@direction"in i){let l=i["@direction"];if(l!==null&&l!=="ltr"&&l!=="rtl")throw new N('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});d["@direction"]=l}if("@nest"in i){let l=i["@nest"];if(!C(l)||l!=="@nest"&&l.indexOf("@")===0)throw new N("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});d["@nest"]=l}let y=d["@id"];if(y==="@context"||y==="@preserve")throw new N("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(o&&o.protected&&!a&&(e.protected[n]=!0,d.protected=!0,!an(o,d)))throw new N("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n})};T.expandIri=(e,t,n,r)=>We(e,t,n,void 0,void 0,r);function We(e,t,n,r,s,a){if(t===null||!C(t)||T.isKeyword(t))return t;if(t.match(Dt))return null;if(r&&r.hasOwnProperty(t)&&s.get(t)!==!0&&T.createTermDefinition({activeCtx:e,localCtx:r,term:t,defined:s,options:a}),n=n||{},n.vocab){let o=e.mappings.get(t);if(o===null)return null;if(Se(o)&&"@id"in o)return o["@id"]}let i=t.indexOf(":");if(i>0){let o=t.substr(0,i),u=t.substr(i+1);if(o==="_"||u.indexOf("//")===0)return t;r&&r.hasOwnProperty(o)&&T.createTermDefinition({activeCtx:e,localCtx:r,term:o,defined:s,options:a});let d=e.mappings.get(o);if(d&&d._prefix)return d["@id"]+u;if(He(t))return t}if(n.vocab&&"@vocab"in e)t=e["@vocab"]+t;else if(n.base){let o,u;"@base"in e?e["@base"]?(u=lt(a.base,e["@base"]),o=lt(u,t)):(u=e["@base"],o=t):(u=a.base,o=lt(a.base,t)),t=o}return t}T.getInitialContext=e=>{let t=JSON.stringify({processingMode:e.processingMode}),n=jt.get(t);if(n)return n;let r={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:s,clone:o,revertToPreviousContext:u,protected:{}};return jt.size===ta&&jt.clear(),jt.set(t,r),r;function s(){let d=this;if(d.inverse)return d.inverse;let p=d.inverse={},g=d.fastCurieMap={},y={},l=(d["@language"]||"@none").toLowerCase(),c=d["@direction"],f=d.mappings,m=[...f.keys()].sort(ea);for(let h of m){let v=f.get(h);if(v===null)continue;let b=v["@container"]||"@none";if(b=[].concat(b).sort().join(""),v["@id"]===null)continue;let x=ei(v["@id"]);for(let w of x){let I=p[w],_=T.isKeyword(w);if(I)!_&&!v._termHasColon&&y[w].push(h);else if(p[w]=I={},!_&&!v._termHasColon){y[w]=[h];let L={iri:w,terms:y[w]};w[0]in g?g[w[0]].push(L):g[w[0]]=[L]}if(I[b]||(I[b]={"@language":{},"@type":{},"@any":{}}),I=I[b],i(h,I["@any"],"@none"),v.reverse)i(h,I["@type"],"@reverse");else if(v["@type"]==="@none")i(h,I["@any"],"@none"),i(h,I["@language"],"@none"),i(h,I["@type"],"@none");else if("@type"in v)i(h,I["@type"],v["@type"]);else if("@language"in v&&"@direction"in v){let L=v["@language"],A=v["@direction"];L&&A?i(h,I["@language"],`${L}_${A}`.toLowerCase()):L?i(h,I["@language"],L.toLowerCase()):A?i(h,I["@language"],`_${A}`):i(h,I["@language"],"@null")}else"@language"in v?i(h,I["@language"],(v["@language"]||"@null").toLowerCase()):"@direction"in v?v["@direction"]?i(h,I["@language"],`_${v["@direction"]}`):i(h,I["@language"],"@none"):c?(i(h,I["@language"],`_${c}`),i(h,I["@language"],"@none"),i(h,I["@type"],"@none")):(i(h,I["@language"],l),i(h,I["@language"],"@none"),i(h,I["@type"],"@none"))}}for(let h in g)a(g,h,1);return p}function a(d,p,g){let y=d[p],l=d[p]={},c,f;for(let m of y)c=m.iri,g>=c.length?f="":f=c[g],f in l?l[f].push(m):l[f]=[m];for(let m in l)m!==""&&a(l,m,g+1)}function i(d,p,g){p.hasOwnProperty(g)||(p[g]=d)}function o(){let d={};return d.mappings=Yr.clone(this.mappings),d.clone=this.clone,d.inverse=null,d.getInverse=this.getInverse,d.protected=Yr.clone(this.protected),this.previousContext&&(d.previousContext=this.previousContext.clone()),d.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(d["@base"]=this["@base"]),"@language"in this&&(d["@language"]=this["@language"]),"@vocab"in this&&(d["@vocab"]=this["@vocab"]),d}function u(){return this.previousContext?this.previousContext.clone():this}};T.getContextValue=(e,t,n)=>{if(t===null)return n==="@context"?void 0:null;if(e.mappings.has(t)){let r=e.mappings.get(t);if(Ks(n))return r;if(r.hasOwnProperty(n))return r[n]}if(n==="@language"&&n in e||n==="@direction"&&n in e)return e[n];if(n!=="@context")return null};T.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():e.processingMode==="json-ld-1.0";T.isKeyword=e=>{if(!C(e)||e[0]!=="@")return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function an(e,t){if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return e===t;let n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(let a=0;a<e.length;++a)if(!an(e[a],t[a]))return!1;return!0}let r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let a in e){let i=e[a],o=t[a];if(a==="@container"&&Array.isArray(i)&&Array.isArray(o)&&(i=i.slice().sort(),o=o.slice().sort()),!an(i,o))return!1}return!0}});var ci=j((oi,li)=>{"use strict";var k=K(),{isArray:oe,isObject:se,isEmptyObject:cn,isString:z,isUndefined:Lt}=Q(),{isList:on,isValue:un,isGraph:na,isSubject:ra}=ge(),{expandIri:M,getContextValue:te,isKeyword:dn,process:ct,processingMode:Ot}=je(),{isAbsolute:Rt}=xe(),{REGEX_BCP47:ri,REGEX_KEYWORD:ia,addValue:ee,asArray:pe,getValues:sa,validateTypeValue:aa}=Y(),{handleEvent:ae}=Ce(),De={};li.exports=De;De.expand=o=>E(oi,[o],function*({activeCtx:e,activeProperty:t=null,element:n,options:r={},insideList:s=!1,insideIndex:a=!1,typeScopedContext:i=null}){if(n==null)return null;if(t==="@default"&&(r=Object.assign({},r,{isFrame:!1})),!oe(n)&&!se(n))return!s&&(t===null||M(e,t,{vocab:!0},r)==="@graph")?(r.eventHandler&&ae({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:n}},options:r}),null):ai({activeCtx:e,activeProperty:t,value:n,options:r});if(oe(n)){let f=[],m=te(e,t,"@container")||[];s=s||m.includes("@list");for(let h=0;h<n.length;++h){let v=yield De.expand({activeCtx:e,activeProperty:t,element:n[h],options:r,insideIndex:a,typeScopedContext:i});s&&oe(v)&&(v={"@list":v}),v!==null&&(oe(v)?f=f.concat(v):f.push(v))}return f}let u=M(e,t,{vocab:!0},r),d=te(e,t,"@context");i=i||(e.previousContext?e:null);let p=Object.keys(n).sort(),g=!a;if(g&&i&&p.length<=2&&!p.includes("@context"))for(let f of p){let m=M(i,f,{vocab:!0},r);if(m==="@value"){g=!1,e=i;break}if(m==="@id"&&p.length===1){g=!1;break}}g&&(e=e.revertToPreviousContext()),Lt(d)||(e=yield ct({activeCtx:e,localCtx:d,propagate:!0,overrideProtected:!0,options:r})),"@context"in n&&(e=yield ct({activeCtx:e,localCtx:n["@context"],options:r})),i=e;let y=null;for(let f of p)if(M(e,f,{vocab:!0},r)==="@type"){y=y||f;let h=n[f],v=Array.isArray(h)?h.length>1?h.slice().sort():h:[h];for(let b of v){let x=te(i,b,"@context");Lt(x)||(e=yield ct({activeCtx:e,localCtx:x,options:r,propagate:!1}))}}let l={};yield si({activeCtx:e,activeProperty:t,expandedActiveProperty:u,element:n,expandedParent:l,options:r,insideList:s,typeKey:y,typeScopedContext:i}),p=Object.keys(l);let c=p.length;if("@value"in l){if("@type"in l&&("@language"in l||"@direction"in l))throw new k('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:l});let f=c-1;if("@type"in l&&(f-=1),"@index"in l&&(f-=1),"@language"in l&&(f-=1),"@direction"in l&&(f-=1),f!==0)throw new k('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:l});let m=l["@value"]===null?[]:pe(l["@value"]),h=sa(l,"@type");if(!(Ot(e,1.1)&&h.includes("@json")&&h.length===1))if(m.length===0)r.eventHandler&&ae({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:l}},options:r}),l=null;else{if(!m.every(v=>z(v)||cn(v))&&"@language"in l)throw new k("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:l});if(!h.every(v=>Rt(v)&&!(z(v)&&v.indexOf("_:")===0)||cn(v)))throw new k('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:l})}}else if("@type"in l&&!oe(l["@type"]))l["@type"]=[l["@type"]];else if("@set"in l||"@list"in l){if(c>1&&!(c===2&&"@index"in l))throw new k('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:l});"@set"in l&&(l=l["@set"],p=Object.keys(l),c=p.length)}else c===1&&"@language"in l&&(r.eventHandler&&ae({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:l}},options:r}),l=null);return se(l)&&!r.keepFreeFloatingNodes&&!s&&(t===null||u==="@graph"||(te(e,t,"@container")||[]).includes("@graph"))&&(l=ii({value:l,count:c,options:r})),l});function ii({value:e,count:t,options:n}){if(t===0||"@value"in e||"@list"in e||t===1&&"@id"in e){if(n.eventHandler){let r,s;t===0?(r="empty object",s="Dropping empty object."):"@value"in e?(r="object with only @value",s="Dropping object with only @value."):"@list"in e?(r="object with only @list",s="Dropping object with only @list."):t===1&&"@id"in e&&(r="object with only @id",s="Dropping object with only @id."),ae({event:{type:["JsonLdEvent"],code:r,level:"warning",message:s,details:{value:e}},options:n})}return null}return e}function si(d){return E(this,arguments,function*({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:r,expandedParent:s,options:a={},insideList:i,typeKey:o,typeScopedContext:u}){let p=Object.keys(r).sort(),g=[],y,l=r[o]&&M(e,oe(r[o])?r[o][0]:r[o],{vocab:!0},W(J({},a),{typeExpansion:!0}))==="@json";for(let c of p){let f=r[c],m;if(c==="@context")continue;let h=M(e,c,{vocab:!0},a);if(h===null||!(Rt(h)||dn(h))){a.eventHandler&&ae({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:c,expandedProperty:h}},options:a});continue}if(dn(h)){if(n==="@reverse")throw new k("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:f});if(h in s&&h!=="@included"&&h!=="@type")throw new k("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:h})}if(h==="@id"){if(!z(f)){if(!a.isFrame)throw new k('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:f});if(se(f)){if(!cn(f))throw new k('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:f})}else if(oe(f)){if(!f.every(w=>z(w)))throw new k('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:f})}else throw new k('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:f})}ee(s,"@id",pe(f).map(w=>{if(z(w)){let I=M(e,w,{base:!0},a);return a.eventHandler&&(I===null?ae(w===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:w}},options:a}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:w}},options:a}):Rt(I)||ae({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:w,expandedId:I}},options:a})),I}return w}),{propertyIsArray:a.isFrame});continue}if(h==="@type"){se(f)&&(f=Object.fromEntries(Object.entries(f).map(([w,I])=>[M(u,w,{vocab:!0}),pe(I).map(_=>M(u,_,{base:!0,vocab:!0},W(J({},a),{typeExpansion:!0})))]))),aa(f,a.isFrame),ee(s,"@type",pe(f).map(w=>{if(z(w)){let I=M(u,w,{base:!0,vocab:!0},W(J({},a),{typeExpansion:!0}));return I!=="@json"&&!Rt(I)&&a.eventHandler&&ae({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:w}},options:a}),I}return w}),{propertyIsArray:!!a.isFrame});continue}if(h==="@included"&&Ot(e,1.1)){let w=pe(yield De.expand({activeCtx:e,activeProperty:t,element:f,options:a}));if(!w.every(I=>ra(I)))throw new k("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:f});ee(s,"@included",w,{propertyIsArray:!0});continue}if(h==="@graph"&&!(se(f)||oe(f)))throw new k('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:f});if(h==="@value"){y=f,l&&Ot(e,1.1)?s["@value"]=f:ee(s,"@value",f,{propertyIsArray:a.isFrame});continue}if(h==="@language"){if(f===null)continue;if(!z(f)&&!a.isFrame)throw new k('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:f});f=pe(f).map(w=>z(w)?w.toLowerCase():w);for(let w of f)z(w)&&!w.match(ri)&&a.eventHandler&&ae({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:w}},options:a});ee(s,"@language",f,{propertyIsArray:a.isFrame});continue}if(h==="@direction"){if(!z(f)&&!a.isFrame)throw new k('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:f});f=pe(f);for(let w of f)if(z(w)&&w!=="ltr"&&w!=="rtl")throw new k('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:f});ee(s,"@direction",f,{propertyIsArray:a.isFrame});continue}if(h==="@index"){if(!z(f))throw new k('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:f});ee(s,"@index",f);continue}if(h==="@reverse"){if(!se(f))throw new k('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:f});if(m=yield De.expand({activeCtx:e,activeProperty:"@reverse",element:f,options:a}),"@reverse"in m)for(let I in m["@reverse"])ee(s,I,m["@reverse"][I],{propertyIsArray:!0});let w=s["@reverse"]||null;for(let I in m){if(I==="@reverse")continue;w===null&&(w=s["@reverse"]={}),ee(w,I,[],{propertyIsArray:!0});let _=m[I];for(let L=0;L<_.length;++L){let A=_[L];if(un(A)||on(A))throw new k('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:m});ee(w,I,A,{propertyIsArray:!0})}}continue}if(h==="@nest"){g.push(c);continue}let v=e,b=te(e,c,"@context");Lt(b)||(v=yield ct({activeCtx:e,localCtx:b,propagate:!0,overrideProtected:!0,options:a}));let x=te(e,c,"@container")||[];if(x.includes("@language")&&se(f)){let w=te(v,c,"@direction");m=oa(v,f,w,a)}else if(x.includes("@index")&&se(f)){let w=x.includes("@graph"),I=te(v,c,"@index")||"@index",_=I!=="@index"&&M(e,I,{vocab:!0},a);m=yield ln({activeCtx:v,options:a,activeProperty:c,value:f,asGraph:w,indexKey:I,propertyIndex:_})}else if(x.includes("@id")&&se(f)){let w=x.includes("@graph");m=yield ln({activeCtx:v,options:a,activeProperty:c,value:f,asGraph:w,indexKey:"@id"})}else if(x.includes("@type")&&se(f))m=yield ln({activeCtx:v.revertToPreviousContext(),options:a,activeProperty:c,value:f,asGraph:!1,indexKey:"@type"});else{let w=h==="@list";if(w||h==="@set"){let I=t;w&&n==="@graph"&&(I=null),m=yield De.expand({activeCtx:v,activeProperty:I,element:f,options:a,insideList:w})}else te(e,c,"@type")==="@json"?m={"@type":"@json","@value":f}:m=yield De.expand({activeCtx:v,activeProperty:c,element:f,options:a,insideList:!1})}if(!(m===null&&h!=="@value")){if(h!=="@list"&&!on(m)&&x.includes("@list")&&(m={"@list":pe(m)}),x.includes("@graph")&&!x.some(w=>w==="@id"||w==="@index")){if(m=pe(m),a.isFrame||(m=m.filter(w=>{let I=Object.keys(w).length;return ii({value:w,count:I,options:a})!==null})),m.length===0)continue;m=m.map(w=>({"@graph":pe(w)}))}if(v.mappings.has(c)&&v.mappings.get(c).reverse){let w=s["@reverse"]=s["@reverse"]||{};m=pe(m);for(let I=0;I<m.length;++I){let _=m[I];if(un(_)||on(_))throw new k('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:m});ee(w,h,_,{propertyIsArray:!0})}continue}ee(s,h,m,{propertyIsArray:!0})}}if("@value"in s&&!(s["@type"]==="@json"&&Ot(e,1.1))){if((se(y)||oe(y))&&!a.isFrame)throw new k('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:y})}for(let c of g){let f=oe(r[c])?r[c]:[r[c]];for(let m of f){if(!se(m)||Object.keys(m).some(h=>M(e,h,{vocab:!0},a)==="@value"))throw new k("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:m});yield si({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:m,expandedParent:s,options:a,insideList:i,typeScopedContext:u,typeKey:o})}}})}function ai({activeCtx:e,activeProperty:t,value:n,options:r}){if(n==null)return null;let s=M(e,t,{vocab:!0},r);if(s==="@id")return M(e,n,{base:!0},r);if(s==="@type")return M(e,n,{vocab:!0,base:!0},W(J({},r),{typeExpansion:!0}));let a=te(e,t,"@type");if((a==="@id"||s==="@graph")&&z(n)){let o=M(e,n,{base:!0},r);return o===null&&n.match(ia)&&r.eventHandler&&ae({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:r}),{"@id":o}}if(a==="@vocab"&&z(n))return{"@id":M(e,n,{vocab:!0,base:!0},r)};if(dn(s))return n;let i={};if(a&&!["@id","@vocab","@none"].includes(a))i["@type"]=a;else if(z(n)){let o=te(e,t,"@language");o!==null&&(i["@language"]=o);let u=te(e,t,"@direction");u!==null&&(i["@direction"]=u)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),i["@value"]=n,i}function oa(e,t,n,r){let s=[],a=Object.keys(t).sort();for(let i of a){let o=M(e,i,{vocab:!0},r),u=t[i];oe(u)||(u=[u]);for(let d of u){if(d===null)continue;if(!z(d))throw new k("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});let p={"@value":d};o!=="@none"&&(i.match(ri)||r.eventHandler&&ae({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:i}},options:r}),p["@language"]=i.toLowerCase()),n&&(p["@direction"]=n),s.push(p)}}return s}function ln(o){return E(this,arguments,function*({activeCtx:e,options:t,activeProperty:n,value:r,asGraph:s,indexKey:a,propertyIndex:i}){let u=[],d=Object.keys(r).sort(),p=a==="@type";for(let g of d){if(p){let c=te(e,g,"@context");Lt(c)||(e=yield ct({activeCtx:e,localCtx:c,propagate:!1,options:t}))}let y=r[g];oe(y)||(y=[y]),y=yield De.expand({activeCtx:e,activeProperty:n,element:y,options:t,insideList:!1,insideIndex:!0});let l;i?g==="@none"?l="@none":l=ai({activeCtx:e,activeProperty:a,value:g,options:t}):l=M(e,g,{vocab:!0},t),a==="@id"?g=M(e,g,{base:!0},t):p&&(g=l);for(let c of y){if(s&&!na(c)&&(c={"@graph":[c]}),a==="@type")l==="@none"||(c["@type"]?c["@type"]=[g].concat(c["@type"]):c["@type"]=[g]);else{if(un(c)&&!["@language","@type","@index"].includes(a))throw new k(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${a}".`,"jsonld.SyntaxError",{code:"invalid value object",value:c});i?l!=="@none"&&ee(c,i,l,{propertyIsArray:!0,prependValue:!0}):l!=="@none"&&!(a in c)&&(c[a]=g)}u.push(c)}}return u})}});var ut=j((ll,di)=>{"use strict";var{isKeyword:ui}=je(),ye=ge(),fn=Q(),me=Y(),la=K(),V={};di.exports=V;V.createMergedNodeMap=(e,t)=>{t=t||{};let n=t.issuer||new me.IdentifierIssuer("_:b"),r={"@default":{}};return V.createNodeMap(e,r,"@default",n),V.mergeNodeMaps(r)};V.createNodeMap=(e,t,n,r,s,a)=>{if(fn.isArray(e)){for(let d of e)V.createNodeMap(d,t,n,r,void 0,a);return}if(!fn.isObject(e)){a&&a.push(e);return}if(ye.isValue(e)){if("@type"in e){let d=e["@type"];d.indexOf("_:")===0&&(e["@type"]=d=r.getId(d))}a&&a.push(e);return}else if(a&&ye.isList(e)){let d=[];V.createNodeMap(e["@list"],t,n,r,s,d),a.push({"@list":d});return}if("@type"in e){let d=e["@type"];for(let p of d)p.indexOf("_:")===0&&r.getId(p)}fn.isUndefined(s)&&(s=ye.isBlankNode(e)?r.getId(e["@id"]):e["@id"]),a&&a.push({"@id":s});let i=t[n],o=i[s]=i[s]||{};o["@id"]=s;let u=Object.keys(e).sort();for(let d of u){if(d==="@id")continue;if(d==="@reverse"){let g={"@id":s},y=e["@reverse"];for(let l in y){let c=y[l];for(let f of c){let m=f["@id"];ye.isBlankNode(f)&&(m=r.getId(m)),V.createNodeMap(f,t,n,r,m),me.addValue(i[m],l,g,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(d==="@graph"){s in t||(t[s]={}),V.createNodeMap(e[d],t,s,r);continue}if(d==="@included"){V.createNodeMap(e[d],t,n,r);continue}if(d!=="@type"&&ui(d)){if(d==="@index"&&d in o&&(e[d]!==o[d]||e[d]["@id"]!==o[d]["@id"]))throw new la("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:o});o[d]=e[d];continue}let p=e[d];if(d.indexOf("_:")===0&&(d=r.getId(d)),p.length===0){me.addValue(o,d,[],{propertyIsArray:!0});continue}for(let g of p)if(d==="@type"&&(g=g.indexOf("_:")===0?r.getId(g):g),ye.isSubject(g)||ye.isSubjectReference(g)){if("@id"in g&&!g["@id"])continue;let y=ye.isBlankNode(g)?r.getId(g["@id"]):g["@id"];me.addValue(o,d,{"@id":y},{propertyIsArray:!0,allowDuplicate:!1}),V.createNodeMap(g,t,n,r,y)}else if(ye.isValue(g))me.addValue(o,d,g,{propertyIsArray:!0,allowDuplicate:!1});else if(ye.isList(g)){let y=[];V.createNodeMap(g["@list"],t,n,r,s,y),g={"@list":y},me.addValue(o,d,g,{propertyIsArray:!0,allowDuplicate:!1})}else V.createNodeMap(g,t,n,r,s),me.addValue(o,d,g,{propertyIsArray:!0,allowDuplicate:!1})}};V.mergeNodeMapGraphs=e=>{let t={};for(let n of Object.keys(e).sort())for(let r of Object.keys(e[n]).sort()){let s=e[n][r];r in t||(t[r]={"@id":r});let a=t[r];for(let i of Object.keys(s).sort())if(ui(i)&&i!=="@type")a[i]=me.clone(s[i]);else for(let o of s[i])me.addValue(a,i,me.clone(o),{propertyIsArray:!0,allowDuplicate:!1})}return t};V.mergeNodeMaps=e=>{let t=e["@default"],n=Object.keys(e).sort();for(let r of n){if(r==="@default")continue;let s=e[r],a=t[r];a?"@graph"in a||(a["@graph"]=[]):t[r]=a={"@id":r,"@graph":[]};let i=a["@graph"];for(let o of Object.keys(s).sort()){let u=s[o];ye.isSubjectReference(u)||i.push(u)}}return t}});var hi=j((cl,pi)=>{"use strict";var{isSubjectReference:ca}=ge(),{createMergedNodeMap:ua}=ut(),fi={};pi.exports=fi;fi.flatten=e=>{let t=ua(e),n=[],r=Object.keys(t).sort();for(let s=0;s<r.length;++s){let a=t[r[s]];ca(a)||n.push(a)}return n}});var Ei=j((Ii,_i)=>{"use strict";var vn=K(),pn=ge(),dt=Q(),{REGEX_BCP47:gi,addValue:yi}=Y(),{handleEvent:mi}=Ce(),{RDF_LIST:da,RDF_FIRST:hn,RDF_REST:gn,RDF_NIL:yn,RDF_TYPE:fa,RDF_JSON_LITERAL:pa,XSD_BOOLEAN:vi,XSD_DOUBLE:bi,XSD_INTEGER:wi,XSD_STRING:mn}=_t(),xi={};_i.exports=xi;xi.fromRDF=(e,t)=>E(Ii,null,function*(){let{useRdfType:n=!1,useNativeTypes:r=!1,rdfDirection:s=null}=t,a={},i={"@default":a},o={};if(s){if(s==="compound-literal")throw new vn("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:s});if(s!=="i18n-datatype")throw new vn("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:s})}for(let p of e){let g=p.graph.termType==="DefaultGraph"?"@default":p.graph.value;g in i||(i[g]={}),g!=="@default"&&!(g in a)&&(a[g]={"@id":g});let y=i[g],l=p.subject.value,c=p.predicate.value,f=p.object;l in y||(y[l]={"@id":l});let m=y[l],h=f.termType.endsWith("Node");if(h&&!(f.value in y)&&(y[f.value]={"@id":f.value}),c===fa&&!n&&h){yi(m,"@type",f.value,{propertyIsArray:!0});continue}let v=ha(f,r,s,t);if(yi(m,c,v,{propertyIsArray:!0}),h)if(f.value===yn){let b=y[f.value];"usages"in b||(b.usages=[]),b.usages.push({node:m,property:c,value:v})}else f.value in o?o[f.value]=!1:o[f.value]={node:m,property:c,value:v}}for(let p in i){let g=i[p];if(!(yn in g))continue;let y=g[yn];if(y.usages){for(let l of y.usages){let c=l.node,f=l.property,m=l.value,h=[],v=[],b=Object.keys(c).length;for(;f===gn&&dt.isObject(o[c["@id"]])&&dt.isArray(c[hn])&&c[hn].length===1&&dt.isArray(c[gn])&&c[gn].length===1&&(b===3||b===4&&dt.isArray(c["@type"])&&c["@type"].length===1&&c["@type"][0]===da)&&(h.push(c[hn][0]),v.push(c["@id"]),l=o[c["@id"]],c=l.node,f=l.property,m=l.value,b=Object.keys(c).length,!!pn.isBlankNode(c)););delete m["@id"],m["@list"]=h.reverse();for(let x of v)delete g[x]}delete y.usages}}let u=[],d=Object.keys(a).sort();for(let p of d){let g=a[p];if(p in i){let y=g["@graph"]=[],l=i[p],c=Object.keys(l).sort();for(let f of c){let m=l[f];pn.isSubjectReference(m)||y.push(m)}}pn.isSubjectReference(g)||u.push(g)}return u});function ha(e,t,n,r){if(e.termType.endsWith("Node"))return{"@id":e.value};let s={"@value":e.value};if(e.language)e.language.match(gi)||r.eventHandler&&mi({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e.language}},options:r}),s["@language"]=e.language;else{let a=e.datatype.value;if(a||(a=mn),a===pa){a="@json";try{s["@value"]=JSON.parse(s["@value"])}catch(i){throw new vn("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:s["@value"],cause:i})}}if(t){if(a===vi)s["@value"]==="true"?s["@value"]=!0:s["@value"]==="false"&&(s["@value"]=!1);else if(dt.isNumeric(s["@value"]))if(a===wi){let i=parseInt(s["@value"],10);i.toFixed(0)===s["@value"]&&(s["@value"]=i)}else a===bi&&(s["@value"]=parseFloat(s["@value"]));[vi,wi,bi,mn].includes(a)||(s["@type"]=a)}else if(n==="i18n-datatype"&&a.startsWith("https://www.w3.org/ns/i18n#")){let[,i,o]=a.split(/[#_]/);i.length>0&&(s["@language"]=i,i.match(gi)||r.eventHandler&&mi({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:i}},options:r})),s["@direction"]=o}else a!==mn&&(s["@type"]=a)}return s}});var Si=j((dl,Ni)=>{"use strict";Ni.exports=function e(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((n,r,s)=>{let a=s===0?"":",",i=r===void 0||typeof r=="symbol"?null:r;return n+a+e(i)},"")+"]":"{"+Object.keys(t).sort().reduce((n,r,s)=>{if(t[r]===void 0||typeof t[r]=="symbol")return n;let a=n.length===0?"":",";return n+a+e(r)+":"+e(t[r])},"")+"}"}});var Ai=j((fl,Li)=>{"use strict";var{createNodeMap:ga}=ut(),{isKeyword:ya}=je(),ji=ge(),ma=Si(),Di=K(),ft=Q(),va=Y(),{handleEvent:Be}=Ce(),{RDF_FIRST:ba,RDF_REST:wa,RDF_NIL:xa,RDF_TYPE:Ia,RDF_JSON_LITERAL:_a,RDF_LANGSTRING:Ea,XSD_BOOLEAN:Na,XSD_DOUBLE:Oi,XSD_INTEGER:Sa,XSD_STRING:ja}=_t(),{isAbsolute:At}=xe(),Ri={};Li.exports=Ri;Ri.toRDF=(e,t)=>{let n=new va.IdentifierIssuer("_:b"),r={"@default":{}};ga(e,r,"@default",n);let s=[],a=Object.keys(r).sort();for(let i of a){let o;if(i==="@default")o={termType:"DefaultGraph",value:""};else if(At(i))i.startsWith("_:")?o={termType:"BlankNode"}:o={termType:"NamedNode"},o.value=i;else{t.eventHandler&&Be({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:i}},options:t});continue}Da(s,r[i],o,n,t)}return s};function Da(e,t,n,r,s){let a=Object.keys(t).sort();for(let i of a){let o=t[i],u=Object.keys(o).sort();for(let d of u){let p=o[d];if(d==="@type")d=Ia;else if(ya(d))continue;for(let g of p){let y={termType:i.startsWith("_:")?"BlankNode":"NamedNode",value:i};if(!At(i)){s.eventHandler&&Be({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:i}},options:s});continue}let l={termType:d.startsWith("_:")?"BlankNode":"NamedNode",value:d};if(!At(d)){s.eventHandler&&Be({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:d}},options:s});continue}if(l.termType==="BlankNode"&&!s.produceGeneralizedRdf){s.eventHandler&&Be({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:r.getOldIds().find(f=>r.getId(f)===d)}},options:s});continue}let c=bn(g,r,e,n,s.rdfDirection,s);c&&e.push({subject:y,predicate:l,object:c,graph:n})}}}}function Oa(e,t,n,r,s,a){let i={termType:"NamedNode",value:ba},o={termType:"NamedNode",value:wa},u={termType:"NamedNode",value:xa},d=e.pop(),p=d?{termType:"BlankNode",value:t.getId()}:u,g=p;for(let y of e){let l=bn(y,t,n,r,s,a),c={termType:"BlankNode",value:t.getId()};n.push({subject:g,predicate:i,object:l,graph:r}),n.push({subject:g,predicate:o,object:c,graph:r}),g=c}if(d){let y=bn(d,t,n,r,s,a);n.push({subject:g,predicate:i,object:y,graph:r}),n.push({subject:g,predicate:o,object:u,graph:r})}return p}function bn(e,t,n,r,s,a){let i={};if(ji.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};let o=e["@value"],u=e["@type"]||null;if(u==="@json")i.value=ma(o),i.datatype.value=_a;else if(ft.isBoolean(o))i.value=o.toString(),i.datatype.value=u||Na;else if(ft.isDouble(o)||u===Oi)ft.isDouble(o)||(o=parseFloat(o)),i.value=o.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=u||Oi;else if(ft.isNumber(o))i.value=o.toFixed(0),i.datatype.value=u||Sa;else if("@direction"in e&&s==="i18n-datatype"){let d=(e["@language"]||"").toLowerCase(),p=e["@direction"],g=`https://www.w3.org/ns/i18n#${d}_${p}`;i.datatype.value=g,i.value=o}else{if("@direction"in e&&s==="compound-literal")throw new Di("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:s});if("@direction"in e&&s)throw new Di("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:s});"@language"in e?("@direction"in e&&!s&&a.eventHandler&&Be({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:i.value}},options:a}),i.value=o,i.datatype.value=u||Ea,i.language=e["@language"]):("@direction"in e&&!s&&a.eventHandler&&Be({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:i.value}},options:a}),i.value=o,i.datatype.value=u||ja)}}else if(ji.isList(e)){let o=Oa(e["@list"],t,n,r,s,a);i.termType=o.termType,i.value=o.value}else{let o=ft.isObject(e)?e["@id"]:e;i.termType=o.startsWith("_:")?"BlankNode":"NamedNode",i.value=o}return i.termType==="NamedNode"&&!At(i.value)?(a.eventHandler&&Be({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:i.value}},options:a}),null):i}});var Hi=j((pl,Ji)=>{"use strict";var{isKeyword:wn}=je(),le=ge(),R=Q(),F=Y(),Ti=xe(),pt=K(),{createNodeMap:Ra,mergeNodeMapGraphs:La}=ut(),ce={};Ji.exports=ce;ce.frameMergedOrDefault=(e,t,n)=>{let r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},s=new F.IdentifierIssuer("_:b");Ra(e,r.graphMap,"@default",s),n.merged&&(r.graphMap["@merged"]=La(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];let a=[];ce.frame(r,Object.keys(r.subjects).sort(),t,a),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter(i=>r.bnodeMap[i].length===1));return n.link={},kt(a,n)};ce.frame=(e,t,n,r,s=null)=>{qi(n),n=n[0];let a=e.options,i={embed:Tt(n,a,"embed"),explicit:Tt(n,a,"explicit"),requireAll:Tt(n,a,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});let o=e.link[e.graph],u=Ta(e,t,n,i),d=Object.keys(u).sort();for(let p of d){let g=u[p];if(s===null?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},i.embed==="@link"&&p in o){Pe(r,s,o[p]);continue}let y={"@id":p};if(p.indexOf("_:")===0&&F.addValue(e.bnodeMap,p,y,{propertyIsArray:!0}),o[p]=y,(i.embed==="@first"||i.embed==="@last")&&e.is11)throw new pt("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(!(!e.embedded&&e.uniqueEmbeds[e.graph].hasOwnProperty(p))){if(e.embedded&&(i.embed==="@never"||Aa(g,e.graph,e.subjectStack))){Pe(r,s,y);continue}if(e.embedded&&(i.embed=="@first"||i.embed=="@once")&&e.uniqueEmbeds[e.graph].hasOwnProperty(p)){Pe(r,s,y);continue}if(i.embed==="@last"&&p in e.uniqueEmbeds[e.graph]&&ka(e,p),e.uniqueEmbeds[e.graph][p]={parent:r,property:s},e.subjectStack.push({subject:g,graph:e.graph}),p in e.graphMap){let l=!1,c=null;"@graph"in n?(c=n["@graph"][0],l=!(p==="@merged"||p==="@default"),R.isObject(c)||(c={})):(l=e.graph!=="@merged",c={}),l&&ce.frame(W(J({},e),{graph:p,embedded:!1}),Object.keys(e.graphMap[p]).sort(),[c],y,"@graph")}"@included"in n&&ce.frame(W(J({},e),{embedded:!1}),t,n["@included"],y,"@included");for(let l of Object.keys(g).sort()){if(wn(l)){if(y[l]=F.clone(g[l]),l==="@type")for(let c of g["@type"])c.indexOf("_:")===0&&F.addValue(e.bnodeMap,c,y,{propertyIsArray:!0});continue}if(!(i.explicit&&!(l in n)))for(let c of g[l]){let f=l in n?n[l]:ki(i);if(le.isList(c)){let m=n[l]&&n[l][0]&&n[l][0]["@list"]?n[l][0]["@list"]:ki(i),h={"@list":[]};Pe(y,l,h);let v=c["@list"];for(let b of v)le.isSubjectReference(b)?ce.frame(W(J({},e),{embedded:!0}),[b["@id"]],m,h,"@list"):Pe(h,"@list",F.clone(b))}else le.isSubjectReference(c)?ce.frame(W(J({},e),{embedded:!0}),[c["@id"]],f,y,l):xn(f[0],c)&&Pe(y,l,F.clone(c))}}for(let l of Object.keys(n).sort()){if(l==="@type"){if(!R.isObject(n[l][0])||!("@default"in n[l][0]))continue}else if(wn(l))continue;let c=n[l][0]||{};if(!Tt(c,a,"omitDefault")&&!(l in y)){let m="@null";"@default"in c&&(m=F.clone(c["@default"])),R.isArray(m)||(m=[m]),y[l]=[{"@preserve":m}]}}for(let l of Object.keys(n["@reverse"]||{}).sort()){let c=n["@reverse"][l];for(let f of Object.keys(e.subjects))F.getValues(e.subjects[f],l).some(h=>h["@id"]===p)&&(y["@reverse"]=y["@reverse"]||{},F.addValue(y["@reverse"],l,[],{propertyIsArray:!0}),ce.frame(W(J({},e),{embedded:!0}),[f],c,y["@reverse"][l],s))}Pe(r,s,y),e.subjectStack.pop()}}};ce.cleanupNull=(e,t)=>{if(R.isArray(e))return e.map(r=>ce.cleanupNull(r,t)).filter(r=>r);if(e==="@null")return null;if(R.isObject(e)){if("@id"in e){let n=e["@id"];if(t.link.hasOwnProperty(n)){let r=t.link[n].indexOf(e);if(r!==-1)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(let n in e)e[n]=ce.cleanupNull(e[n],t)}return e};function ki(e){let t={};for(let n in e)e[n]!==void 0&&(t["@"+n]=[e[n]]);return[t]}function Aa(e,t,n){for(let r=n.length-1;r>=0;--r){let s=n[r];if(s.graph===t&&s.subject["@id"]===e["@id"])return!0}return!1}function Tt(e,t,n){let r="@"+n,s=r in e?e[r][0]:t[n];if(n==="embed"){if(s===!0)s="@once";else if(s===!1)s="@never";else if(s!=="@always"&&s!=="@never"&&s!=="@link"&&s!=="@first"&&s!=="@last"&&s!=="@once")throw new pt("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e})}return s}function qi(e){if(!R.isArray(e)||e.length!==1||!R.isObject(e[0]))throw new pt("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0]){for(let t of F.asArray(e[0]["@id"]))if(!(R.isObject(t)||Ti.isAbsolute(t))||R.isString(t)&&t.indexOf("_:")===0)throw new pt("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}if("@type"in e[0]){for(let t of F.asArray(e[0]["@type"]))if(!(R.isObject(t)||Ti.isAbsolute(t)||t==="@json")||R.isString(t)&&t.indexOf("_:")===0)throw new pt("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}}function Ta(e,t,n,r){let s={};for(let a of t){let i=e.graphMap[e.graph][a];Fi(e,i,n,r)&&(s[a]=i)}return s}function Fi(e,t,n,r){let s=!0,a=!1;for(let i in n){let o=!1,u=F.getValues(t,i),d=F.getValues(n,i).length===0;if(i==="@id"){if(R.isEmptyObject(n["@id"][0]||{})?o=!0:n["@id"].length>=0&&(o=n["@id"].includes(u[0])),!r.requireAll)return o}else if(i==="@type"){if(s=!1,d){if(u.length>0)return!1;o=!0}else if(n["@type"].length===1&&R.isEmptyObject(n["@type"][0]))o=u.length>0;else for(let p of n["@type"])R.isObject(p)&&"@default"in p?o=!0:o=o||u.some(g=>g===p);if(!r.requireAll)return o}else{if(wn(i))continue;{let p=F.getValues(n,i)[0],g=!1;if(p&&(qi([p]),g="@default"in p),s=!1,u.length===0&&g)continue;if(u.length>0&&d)return!1;if(p===void 0){if(u.length>0)return!1;o=!0}else if(le.isList(p)){let y=p["@list"][0];if(le.isList(u[0])){let l=u[0]["@list"];le.isValue(y)?o=l.some(c=>xn(y,c)):(le.isSubject(y)||le.isSubjectReference(y))&&(o=l.some(c=>Mi(e,y,c,r)))}}else le.isValue(p)?o=u.some(y=>xn(p,y)):le.isSubjectReference(p)?o=u.some(y=>Mi(e,p,y,r)):R.isObject(p)?o=u.length>0:o=!1}}if(!o&&r.requireAll)return!1;a=a||o}return s||a}function ka(e,t){let n=e.uniqueEmbeds[e.graph],r=n[t],s=r.parent,a=r.property,i={"@id":t};if(R.isArray(s)){for(let u=0;u<s.length;++u)if(F.compareValues(s[u],i)){s[u]=i;break}}else{let u=R.isArray(s[a]);F.removeValue(s,a,i,{propertyIsArray:u}),F.addValue(s,a,i,{propertyIsArray:u})}let o=u=>{let d=Object.keys(n);for(let p of d)p in n&&R.isObject(n[p].parent)&&n[p].parent["@id"]===u&&(delete n[p],o(p))};o(t)}function kt(e,t){if(R.isArray(e))return e.map(n=>kt(n,t));if(R.isObject(e)){if("@preserve"in e)return e["@preserve"][0];if(le.isValue(e))return e;if(le.isList(e))return e["@list"]=kt(e["@list"],t),e;if("@id"in e){let n=e["@id"];if(t.link.hasOwnProperty(n)){let r=t.link[n].indexOf(e);if(r!==-1)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(let n in e){if(n==="@id"&&t.bnodesToClear.includes(e[n])){delete e["@id"];continue}e[n]=kt(e[n],t)}}return e}function Pe(e,t,n){R.isObject(e)?F.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function Mi(e,t,n,r){if(!("@id"in n))return!1;let s=e.subjects[n["@id"]];return s&&Fi(e,s,t,r)}function xn(e,t){let n=t["@value"],r=t["@type"],s=t["@language"],a=e["@value"]?R.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],i=e["@type"]?R.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],o=e["@language"]?R.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return a.length===0&&i.length===0&&o.length===0?!0:!(!(a.includes(n)||R.isEmptyObject(a[0]))||!(!r&&i.length===0||i.includes(r)||r&&R.isEmptyObject(i[0]))||!(!s&&o.length===0||o.includes(s)||s&&R.isEmptyObject(o[0])))}});var Ci=j(($i,Qi)=>{"use strict";var Sn=K(),{isArray:Oe,isObject:Re,isString:zi,isUndefined:In}=Q(),{isList:Nn,isValue:Ee,isGraph:Vi,isSimpleGraph:Bi,isSubjectReference:_n}=ge(),{expandIri:Gi,getContextValue:G,isKeyword:Xi,process:En,processingMode:Ma}=je(),{removeBase:Pi,prependBase:qa}=xe(),{REGEX_KEYWORD:Fa,addValue:ne,asArray:Mt,compareShortestLeast:Ja}=Y(),S={};Qi.exports=S;S.compact=s=>E($i,[s],function*({activeCtx:e,activeProperty:t=null,element:n,options:r={}}){if(Oe(n)){let i=[];for(let o=0;o<n.length;++o){let u=yield S.compact({activeCtx:e,activeProperty:t,element:n[o],options:r});u!==null&&i.push(u)}return r.compactArrays&&i.length===1&&(G(e,t,"@container")||[]).length===0&&(i=i[0]),i}let a=G(e,t,"@context");if(In(a)||(e=yield En({activeCtx:e,localCtx:a,propagate:!0,overrideProtected:!0,options:r})),Re(n)){if(r.link&&"@id"in n&&r.link.hasOwnProperty(n["@id"])){let l=r.link[n["@id"]];for(let c=0;c<l.length;++c)if(l[c].expanded===n)return l[c].compacted}if(Ee(n)||_n(n)){let l=S.compactValue({activeCtx:e,activeProperty:t,value:n,options:r});return r.link&&_n(n)&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:l})),l}if(Nn(n)&&(G(e,t,"@container")||[]).includes("@list"))return S.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:r});let i=t==="@reverse",o={},u=e;!Ee(n)&&!_n(n)&&(e=e.revertToPreviousContext());let d=G(u,t,"@context");In(d)||(e=yield En({activeCtx:e,localCtx:d,propagate:!0,overrideProtected:!0,options:r})),r.link&&"@id"in n&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:o}));let p=n["@type"]||[];p.length>1&&(p=Array.from(p).sort());let g=e;for(let l of p){let c=S.compactIri({activeCtx:g,iri:l,relativeTo:{vocab:!0}}),f=G(u,c,"@context");In(f)||(e=yield En({activeCtx:e,localCtx:f,options:r,propagate:!1}))}let y=Object.keys(n).sort();for(let l of y){let c=n[l];if(l==="@id"){let f=Mt(c).map(h=>S.compactIri({activeCtx:e,iri:h,relativeTo:{vocab:!1},base:r.base}));f.length===1&&(f=f[0]);let m=S.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o[m]=f;continue}if(l==="@type"){let f=Mt(c).map(x=>S.compactIri({activeCtx:u,iri:x,relativeTo:{vocab:!0}}));f.length===1&&(f=f[0]);let m=S.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),b=(G(e,m,"@container")||[]).includes("@set")&&Ma(e,1.1)||Oe(f)&&c.length===0;ne(o,m,f,{propertyIsArray:b});continue}if(l==="@reverse"){let f=yield S.compact({activeCtx:e,activeProperty:"@reverse",element:c,options:r});for(let m in f)if(e.mappings.has(m)&&e.mappings.get(m).reverse){let h=f[m],b=(G(e,m,"@container")||[]).includes("@set")||!r.compactArrays;ne(o,m,h,{propertyIsArray:b}),delete f[m]}if(Object.keys(f).length>0){let m=S.compactIri({activeCtx:e,iri:l,relativeTo:{vocab:!0}});ne(o,m,f)}continue}if(l==="@preserve"){let f=yield S.compact({activeCtx:e,activeProperty:t,element:c,options:r});Oe(f)&&f.length===0||ne(o,l,f);continue}if(l==="@index"){if((G(e,t,"@container")||[]).includes("@index"))continue;let m=S.compactIri({activeCtx:e,iri:l,relativeTo:{vocab:!0}});ne(o,m,c);continue}if(l!=="@graph"&&l!=="@list"&&l!=="@included"&&Xi(l)){let f=S.compactIri({activeCtx:e,iri:l,relativeTo:{vocab:!0}});ne(o,f,c);continue}if(!Oe(c))throw new Sn("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(c.length===0){let f=S.compactIri({activeCtx:e,iri:l,value:c,relativeTo:{vocab:!0},reverse:i}),m=e.mappings.has(f)?e.mappings.get(f)["@nest"]:null,h=o;m&&(Ui(e,m,r),Re(o[m])||(o[m]={}),h=o[m]),ne(h,f,c,{propertyIsArray:!0})}for(let f of c){let m=S.compactIri({activeCtx:e,iri:l,value:f,relativeTo:{vocab:!0},reverse:i}),h=e.mappings.has(m)?e.mappings.get(m)["@nest"]:null,v=o;h&&(Ui(e,h,r),Re(o[h])||(o[h]={}),v=o[h]);let b=G(e,m,"@container")||[],x=Vi(f),w=Nn(f),I;w?I=f["@list"]:x&&(I=f["@graph"]);let _=yield S.compact({activeCtx:e,activeProperty:m,element:w||x?I:f,options:r});if(w)if(Oe(_)||(_=[_]),!b.includes("@list"))_={[S.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:_},"@index"in f&&(_[S.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=f["@index"]);else{ne(v,m,_,{valueIsArray:!0,allowDuplicate:!0});continue}if(x)if(b.includes("@graph")&&(b.includes("@id")||b.includes("@index")&&Bi(f))){let L;v.hasOwnProperty(m)?L=v[m]:v[m]=L={};let A=(b.includes("@id")?f["@id"]:f["@index"])||S.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});ne(L,A,_,{propertyIsArray:!r.compactArrays||b.includes("@set")})}else b.includes("@graph")&&Bi(f)?(Oe(_)&&_.length>1&&(_={"@included":_}),ne(v,m,_,{propertyIsArray:!r.compactArrays||b.includes("@set")})):(Oe(_)&&_.length===1&&r.compactArrays&&(_=_[0]),_={[S.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:_},"@id"in f&&(_[S.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=f["@id"]),"@index"in f&&(_[S.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=f["@index"]),ne(v,m,_,{propertyIsArray:!r.compactArrays||b.includes("@set")}));else if(b.includes("@language")||b.includes("@index")||b.includes("@id")||b.includes("@type")){let L;v.hasOwnProperty(m)?L=v[m]:v[m]=L={};let A;if(b.includes("@language"))Ee(_)&&(_=_["@value"]),A=f["@language"];else if(b.includes("@index")){let X=G(e,m,"@index")||"@index",ze=S.compactIri({activeCtx:e,iri:X,relativeTo:{vocab:!0}});if(X==="@index")A=f["@index"],delete _[ze];else{let ht;if([A,...ht]=Mt(_[X]||[]),!zi(A))A=null;else switch(ht.length){case 0:delete _[X];break;case 1:_[X]=ht[0];break;default:_[X]=ht;break}}}else if(b.includes("@id")){let X=S.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});A=_[X],delete _[X]}else if(b.includes("@type")){let X=S.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),ze;switch([A,...ze]=Mt(_[X]||[]),ze.length){case 0:delete _[X];break;case 1:_[X]=ze[0];break;default:_[X]=ze;break}Object.keys(_).length===1&&"@id"in f&&(_=yield S.compact({activeCtx:e,activeProperty:m,element:{"@id":f["@id"]},options:r}))}A||(A=S.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),ne(L,A,_,{propertyIsArray:b.includes("@set")})}else{let L=!r.compactArrays||b.includes("@set")||b.includes("@list")||Oe(_)&&_.length===0||l==="@list"||l==="@graph";ne(v,m,_,{propertyIsArray:L})}}}return o}return n});S.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:r={vocab:!1},reverse:s=!1,base:a=null})=>{if(t===null)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);let i=e.getInverse();if(Xi(t)&&t in i&&"@none"in i[t]&&"@type"in i[t]["@none"]&&"@none"in i[t]["@none"]["@type"])return i[t]["@none"]["@type"]["@none"];if(r.vocab&&t in i){let g=e["@language"]||"@none",y=[];Re(n)&&"@index"in n&&!("@graph"in n)&&y.push("@index","@index@set"),Re(n)&&"@preserve"in n&&(n=n["@preserve"][0]),Vi(n)?("@index"in n&&y.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&y.push("@graph@id","@graph@id@set"),y.push("@graph","@graph@set","@set"),"@index"in n||y.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||y.push("@graph@id","@graph@id@set")):Re(n)&&!Ee(n)&&y.push("@id","@id@set","@type","@set@type");let l="@language",c="@null";if(s)l="@type",c="@reverse",y.push("@set");else if(Nn(n)){"@index"in n||y.push("@list");let m=n["@list"];if(m.length===0)l="@any",c="@none";else{let h=m.length===0?g:null,v=null;for(let b=0;b<m.length;++b){let x=m[b],w="@none",I="@none";if(Ee(x))if("@direction"in x){let _=(x["@language"]||"").toLowerCase(),L=x["@direction"];w=`${_}_${L}`}else"@language"in x?w=x["@language"].toLowerCase():"@type"in x?I=x["@type"]:w="@null";else I="@id";if(h===null?h=w:w!==h&&Ee(x)&&(h="@none"),v===null?v=I:I!==v&&(v="@none"),h==="@none"&&v==="@none")break}h=h||"@none",v=v||"@none",v!=="@none"?(l="@type",c=v):c=h}}else{if(Ee(n))if("@language"in n&&!("@index"in n)){y.push("@language","@language@set"),c=n["@language"];let m=n["@direction"];m&&(c=`${c}_${m}`)}else"@direction"in n&&!("@index"in n)?c=`_${n["@direction"]}`:"@type"in n&&(l="@type",c=n["@type"]);else l="@type",c="@id";y.push("@set")}y.push("@none"),Re(n)&&!("@index"in n)&&y.push("@index","@index@set"),Ee(n)&&Object.keys(n).length===1&&y.push("@language","@language@set");let f=Ha(e,t,n,y,l,c);if(f!==null)return f}if(r.vocab&&"@vocab"in e){let g=e["@vocab"];if(t.indexOf(g)===0&&t!==g){let y=t.substr(g.length);if(!e.mappings.has(y))return y}}let o=null,u=[],d=e.fastCurieMap,p=t.length-1;for(let g=0;g<p&&t[g]in d;++g)d=d[t[g]],""in d&&u.push(d[""][0]);for(let g=u.length-1;g>=0;--g){let y=u[g],l=y.terms;for(let c of l){let f=c+":"+t.substr(y.iri.length);e.mappings.get(c)._prefix&&(!e.mappings.has(f)||n===null&&e.mappings.get(f)["@id"]===t)&&(o===null||Ja(f,o)<0)&&(o=f)}}if(o!==null)return o;for(let[g,y]of e.mappings)if(y&&y._prefix&&t.startsWith(g+":"))throw new Sn(`Absolute IRI "${t}" confused with prefix "${g}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});if(!r.vocab)if("@base"in e)if(e["@base"]){let g=Pi(qa(a,e["@base"]),t);return Fa.test(g)?`./${g}`:g}else return t;else return Pi(a,t);return t};S.compactValue=({activeCtx:e,activeProperty:t,value:n,options:r})=>{if(Ee(n)){let o=G(e,t,"@type"),u=G(e,t,"@language"),d=G(e,t,"@direction"),p=G(e,t,"@container")||[],g="@index"in n&&!p.includes("@index");if(!g&&o!=="@none"&&(n["@type"]===o||"@language"in n&&n["@language"]===u&&"@direction"in n&&n["@direction"]===d||"@language"in n&&n["@language"]===u||"@direction"in n&&n["@direction"]===d))return n["@value"];let y=Object.keys(n).length,l=y===1||y===2&&"@index"in n&&!g,c="@language"in e,f=zi(n["@value"]),m=e.mappings.has(t)&&e.mappings.get(t)["@language"]===null;if(l&&o!=="@none"&&(!c||!f||m))return n["@value"];let h={};return g&&(h[S.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?h[S.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=S.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(h[S.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(h[S.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),h[S.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],h}let s=Gi(e,t,{vocab:!0},r),a=G(e,t,"@type"),i=S.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:a==="@vocab"},base:r.base});return a==="@id"||a==="@vocab"||s==="@graph"?i:{[S.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:i}};function Ha(e,t,n,r,s,a){a===null&&(a="@null");let i=[];if((a==="@id"||a==="@reverse")&&Re(n)&&"@id"in n){a==="@reverse"&&i.push("@reverse");let u=S.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(u)&&e.mappings.get(u)&&e.mappings.get(u)["@id"]===n["@id"]?i.push.apply(i,["@vocab","@id"]):i.push.apply(i,["@id","@vocab"])}else{i.push(a);let u=i.find(d=>d.includes("_"));u&&i.push(u.replace(/^[^_]+_/,"_"))}i.push("@none");let o=e.inverse[t];for(let u of r){if(!(u in o))continue;let d=o[u][s];for(let p of i)if(p in d)return d[p]}return null}function Ui(e,t,n){if(Gi(e,t,{vocab:!0},n)!=="@nest")throw new Sn("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}});var Ki=j((yl,Wi)=>{"use strict";Wi.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(n,r)},t.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(n)},t.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(n)},t}});var rs=j((ml,ns)=>{"use strict";var Yi=xt(),Zi=Ar(),Le=Y(),Ne=Xr(),jn=Le.IdentifierIssuer,ve=K(),Ba=en(),qt=Qr(),{expand:Pa}=ci(),{flatten:Ua}=hi(),{fromRDF:za}=Ei(),{toRDF:Va}=Ai(),{frameMergedOrDefault:Ga,cleanupNull:Xa}=Hi(),{isArray:Ye,isObject:Ue,isString:be}=Q(),{isSubjectReference:$a}=ge(),{expandIri:Qa,getInitialContext:Ft,process:es,processingMode:Dn}=je(),{compact:Ca,compactIri:Wa}=Ci(),{createNodeMap:Ka,createMergedNodeMap:Ya,mergeNodeMaps:Za}=ut(),{logEventHandler:eo,logWarningEventHandler:to,safeEventHandler:no,setDefaultEventHandler:ro,setupEventHandler:io,strictEventHandler:so,unhandledEventHandler:ao}=Ce(),ts=function(e){let t={},r=new Ba({max:100});e.compact=function(u,d,p){return E(this,arguments,function*(a,i,o){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(i===null)throw new ve("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(a===null)return null;o=s(o,{base:be(a)?a:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new jn("_:b"),contextResolver:new Ne({sharedCache:r})}),o.link&&(o.skipExpansion=!0),o.compactToRelative||delete o.base;let g;o.skipExpansion?g=a:g=yield e.expand(a,o);let y=yield e.processContext(Ft(o),i,o),l=yield Ca({activeCtx:y,element:g,options:o});o.compactArrays&&!o.graph&&Ye(l)?l.length===1?l=l[0]:l.length===0&&(l={}):o.graph&&Ue(l)&&(l=[l]),Ue(i)&&"@context"in i&&(i=i["@context"]),i=Le.clone(i),Ye(i)||(i=[i]);let c=i;i=[];for(let m=0;m<c.length;++m)(!Ue(c[m])||Object.keys(c[m]).length>0)&&i.push(c[m]);let f=i.length>0;if(i.length===1&&(i=i[0]),Ye(l)){let m=Wa({activeCtx:y,iri:"@graph",relativeTo:{vocab:!0}}),h=l;l={},f&&(l["@context"]=i),l[m]=h}else if(Ue(l)&&f){let m=l;l={"@context":i};for(let h in m)l[h]=m[h]}return l})},e.expand=function(o,u){return E(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");i=s(i,{keepFreeFloatingNodes:!1,contextResolver:new Ne({sharedCache:r})});let d={},p=[];if("expandContext"in i){let c=Le.clone(i.expandContext);Ue(c)&&"@context"in c?d.expandContext=c:d.expandContext={"@context":c},p.push(d.expandContext)}let g;if(!be(a))d.input=Le.clone(a);else{let c=yield e.get(a,i);g=c.documentUrl,d.input=c.document,c.contextUrl&&(d.remoteContext={"@context":c.contextUrl},p.push(d.remoteContext))}"base"in i||(i.base=g||"");let y=Ft(i);for(let c of p)y=yield es({activeCtx:y,localCtx:c,options:i});let l=yield Pa({activeCtx:y,element:d.input,options:i});return Ue(l)&&"@graph"in l&&Object.keys(l).length===1?l=l["@graph"]:l===null&&(l=[]),Ye(l)||(l=[l]),l})},e.flatten=function(u,d,p){return E(this,arguments,function*(a,i,o){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof i=="function"?i=null:i=i||null,o=s(o,{base:be(a)?a:"",contextResolver:new Ne({sharedCache:r})});let g=yield e.expand(a,o),y=Ua(g);return i===null?y:(o.graph=!0,o.skipExpansion=!0,yield e.compact(y,i,o))})},e.frame=function(u,d,p){return E(this,arguments,function*(a,i,o){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(o=s(o,{base:be(a)?a:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new Ne({sharedCache:r})}),be(i)){let b=yield e.get(i,o);if(i=b.document,b.contextUrl){let x=i["@context"];x?Ye(x)?x.push(b.contextUrl):x=[x,b.contextUrl]:x=b.contextUrl,i["@context"]=x}}let g=i?i["@context"]||{}:{},y=yield e.processContext(Ft(o),g,o);o.hasOwnProperty("omitGraph")||(o.omitGraph=Dn(y,1.1)),o.hasOwnProperty("pruneBlankNodeIdentifiers")||(o.pruneBlankNodeIdentifiers=Dn(y,1.1));let l=yield e.expand(a,o),c=J({},o);c.isFrame=!0,c.keepFreeFloatingNodes=!0;let f=yield e.expand(i,c),m=Object.keys(i).map(b=>Qa(y,b,{vocab:!0}));c.merged=!m.includes("@graph"),c.is11=Dn(y,1.1);let h=Ga(l,f,c);c.graph=!o.omitGraph,c.skipExpansion=!0,c.link={},c.framing=!0;let v=yield e.compact(h,g,c);return c.link={},v=Xa(v,c),v})},e.link=function(a,i,o){return E(this,null,function*(){let u={};return i&&(u["@context"]=i),u["@embed"]="@link",e.frame(a,u,o)})},e.normalize=e.canonize=function(o,u){return E(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(i=s(i,{base:be(a)?a:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new Ne({sharedCache:r})}),"inputFormat"in i){if(i.inputFormat!=="application/n-quads"&&i.inputFormat!=="application/nquads")throw new ve("Unknown canonicalization input format.","jsonld.CanonizeError");let g=qt.parse(a);return Yi.canonize(g,i)}let d=J({},i);delete d.format,d.produceGeneralizedRdf=!1;let p=yield e.toRDF(a,d);return Yi.canonize(p,i)})},e.fromRDF=function(o,u){return E(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");i=s(i,{format:be(a)?"application/n-quads":void 0});let{format:d}=i,{rdfParser:p}=i;if(d){if(p=p||t[d],!p)throw new ve("Unknown input format.","jsonld.UnknownFormat",{format:d})}else p=()=>a;let g=yield p(a);return za(g,i)})},e.toRDF=function(o,u){return E(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");i=s(i,{base:be(a)?a:"",skipExpansion:!1,contextResolver:new Ne({sharedCache:r})});let d;i.skipExpansion?d=a:d=yield e.expand(a,i);let p=Va(d,i);if(i.format){if(i.format==="application/n-quads"||i.format==="application/nquads")return qt.serialize(p);throw new ve("Unknown output format.","jsonld.UnknownFormat",{format:i.format})}return p})},e.createNodeMap=function(o,u){return E(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");i=s(i,{base:be(a)?a:"",contextResolver:new Ne({sharedCache:r})});let d=yield e.expand(a,i);return Ya(d,i)})},e.merge=function(u,d,p){return E(this,arguments,function*(a,i,o){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Ye(a))throw new TypeError('Could not merge, "docs" must be an array.');typeof i=="function"?i=null:i=i||null,o=s(o,{contextResolver:new Ne({sharedCache:r})});let g=yield Promise.all(a.map(b=>{let x=J({},o);return e.expand(b,x)})),y=!0;"mergeNodes"in o&&(y=o.mergeNodes);let l=o.issuer||new jn("_:b"),c={"@default":{}};for(let b=0;b<g.length;++b){let x=Le.relabelBlankNodes(g[b],{issuer:new jn("_:b"+b+"-")}),w=y||b===0?c:{"@default":{}};if(Ka(x,w,"@default",l),w!==c)for(let I in w){let _=w[I];if(!(I in c)){c[I]=_;continue}let L=c[I];for(let A in _)A in L||(L[A]=_[A])}}let f=Za(c),m=[],h=Object.keys(f).sort();for(let b=0;b<h.length;++b){let x=f[h[b]];$a(x)||m.push(x)}return i===null?m:(o.graph=!0,o.skipExpansion=!0,yield e.compact(m,i,o))})},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:a=>e._documentLoader=a}),e.documentLoader=a=>E(this,null,function*(){throw new ve("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:a})}),e.get=function(a,i){return E(this,null,function*(){let o;typeof i.documentLoader=="function"?o=i.documentLoader:o=e.documentLoader;let u=yield o(a);try{if(!u.document)throw new ve("No remote document found at the given URL.","jsonld.NullRemoteDocument");be(u.document)&&(u.document=JSON.parse(u.document))}catch(d){throw new ve("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:d,remoteDoc:u})}return u})},e.processContext=function(a,i,o){return E(this,null,function*(){return o=s(o,{base:"",contextResolver:new Ne({sharedCache:r})}),i===null?Ft(o):(i=Le.clone(i),Ue(i)&&"@context"in i||(i={"@context":i}),es({activeCtx:a,localCtx:i,options:o}))})},e.getContextValue=je().getContextValue,e.documentLoaders={},e.useDocumentLoader=function(a){if(!(a in e.documentLoaders))throw new ve('Unknown document loader type: "'+a+'"',"jsonld.UnknownDocumentLoader",{type:a});e.documentLoader=e.documentLoaders[a].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(a,i){t[a]=i},e.unregisterRDFParser=function(a){delete t[a]},e.registerRDFParser("application/n-quads",qt.parse),e.registerRDFParser("application/nquads",qt.parse),e.url=xe(),e.logEventHandler=eo,e.logWarningEventHandler=to,e.safeEventHandler=no,e.setDefaultEventHandler=ro,e.strictEventHandler=so,e.unhandledEventHandler=ao,e.util=Le,Object.assign(e,Le),e.promises=e,e.RequestQueue=Qt(),e.JsonLdProcessor=Ki()(e),Zi.setupGlobals(e),Zi.setupDocumentLoaders(e);function s(a,u){var d=u,{documentLoader:i=e.documentLoader}=d,o=Ln(d,["documentLoader"]);if(a&&"compactionMap"in a)throw new ve('"compactionMap" not supported.',"jsonld.OptionsError");if(a&&"expansionMap"in a)throw new ve('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:i},o,a,{eventHandler:io({options:a})})}return e},On=function(){return ts(function(){return On()})};ts(On);ns.exports=On});var Rn=ss(rs());function is(e,t){return E(this,null,function*(){let n=ttl2jsonld.parse(e),r=ttl2jsonld.parse(t),s=yield(0,Rn.canonize)(n,{algorithm:"URDNA2015",format:"application/n-quads"}),a=yield(0,Rn.canonize)(r,{algorithm:"URDNA2015",format:"application/n-quads"}),i=new Set(s.split(`.
`).map(p=>p.trim()).filter(p=>p!=="")),o=new Set(a.split(`.
`).map(p=>p.trim()).filter(p=>p!==""));console.log(i);let u=new Set([...i].filter(p=>!o.has(p))),d=new Set([...o].filter(p=>!i.has(p)));return{triplesOnlyInFile1:u,triplesOnlyInFile2:d,file1TripleCount:i.size,file2TripleCount:o.size}})}function oo(e,t){if(e&1&&($(0,"span"),re(1),H()),e&2){let n=Ge();B(),Ze("(",n.file1Size," triples)")}}function lo(e,t){if(e&1&&($(0,"span"),re(1),H()),e&2){let n=Ge();B(),Ze("(",n.file2Size," triples)")}}function co(e,t){if(e&1&&($(0,"span"),re(1),H()),e&2){let n=Ge(2);B(),Ze("(",n.diff1Size," triples)")}}function uo(e,t){if(e&1&&($(0,"span"),re(1),H()),e&2){let n=Ge(2);B(),Ze("(",n.diff2Size," triples)")}}function fo(e,t){if(e&1&&($(0,"div",2)(1,"mat-form-field",3)(2,"mat-label"),re(3,"Triples only in 1 "),Ve(4,co,2,1,"span",4),H(),Jt(5,"textarea",9,0),H(),$(7,"mat-form-field",3)(8,"mat-label"),re(9,"Triples only in 2 "),Ve(10,uo,2,1,"span",4),H(),Jt(11,"textarea",9,0),H()()),e&2){let n=Ge();B(4),he("ngIf",n.diff1Size),B(),he("value",n.triplesOnlyInFile1),B(5),he("ngIf",n.diff2Size),B(),he("value",n.triplesOnlyInFile2)}}function po(e,t){e&1&&($(0,"p"),re(1,"Congratulations! The RDF contents are identical"),H())}var Jl=(()=>{let t=class t{constructor(){this.file1Content="",this.file2Content="",this.triplesOnlyInFile1="",this.triplesOnlyInFile2="",this.file1Size=0,this.file2Size=0,this.diff1Size=0,this.diff2Size=0,this.identical=!1}compare(){return E(this,null,function*(){this.identical=!1;let{triplesOnlyInFile1:r,triplesOnlyInFile2:s,file1TripleCount:a,file2TripleCount:i}=yield is(this.file1Content,this.file2Content);r.size===0&&s.size===0&&(this.identical=!0),this.diff1Size=r.size,this.diff2Size=s.size,this.triplesOnlyInFile1=Array.from(r).join(`.
`),this.triplesOnlyInFile2=Array.from(s).join(`.
`),this.file1Size=a,this.file2Size=i})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=An({type:t,selectors:[["app-rdf-diff"]],standalone:!0,features:[Mn],decls:20,vars:7,consts:[["autosize","cdkTextareaAutosize"],["title","RDF diff"],[1,"row"],[2,"width","100%"],[4,"ngIf"],["matInput","","siz","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"ngModelChange","ngModel"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"ngModelChange","ngModel"],["mat-stroked-button","",2,"margin-bottom","5px",3,"click","disabled"],["class","row",4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"value"]],template:function(s,a){if(s&1){let i=Tn();$(0,"lib-page-section",1)(1,"p"),re(2,"Compares two Turtle/NTriples files"),H(),$(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),re(6,"RDF 1 "),Ve(7,oo,2,1,"span",4),H(),$(8,"textarea",5,0),Pt("ngModelChange",function(u){return gt(i),Bt(a.file1Content,u)||(a.file1Content=u),yt(u)}),H()(),$(10,"mat-form-field",3)(11,"mat-label"),re(12,"RDF 2 "),Ve(13,lo,2,1,"span",4),H(),$(14,"textarea",6,0),Pt("ngModelChange",function(u){return gt(i),Bt(a.file2Content,u)||(a.file2Content=u),yt(u)}),H()()(),$(16,"button",7),kn("click",function(){return gt(i),yt(a.compare())}),re(17," Compare "),H(),Ve(18,fo,13,4,"div",8)(19,po,2,0,"p",4),H()}s&2&&(B(7),he("ngIf",a.file1Size),B(),Ht("ngModel",a.file1Content),B(5),he("ngIf",a.file2Size),B(),Ht("ngModel",a.file2Content),B(2),he("disabled",!a.file1Content||!a.file2Content),B(2),he("ngIf",(a.triplesOnlyInFile1||a.triplesOnlyInFile2)&&!a.identical),B(),he("ngIf",a.identical))},dependencies:[Fn,qn,Bn,$n,Xn,Gn,Kn,Wn,Qn,Cn,Vn,Pn,Un,zn,Hn,Jn],styles:[".row[_ngcontent-%COMP%]{display:flex;gap:5px;font-size:.8em}"]});let e=t;return e})();export{Jl as a};
